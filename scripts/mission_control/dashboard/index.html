<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Boardroom - Cricket Playbook</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==================== THEME SYSTEM ==================== */
        :root {
            /* Dark Theme (Default) */
            --bg-primary: #000000;
            --bg-secondary: #1c1c1e;
            --bg-tertiary: #2c2c2e;
            --bg-elevated: #3a3a3c;
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --text-tertiary: #636366;
            --accent: #0a84ff;
            --accent-green: #30d158;
            --accent-yellow: #ffd60a;
            --accent-orange: #ff9f0a;
            --accent-red: #ff453a;
            --accent-purple: #bf5af2;
            --accent-pink: #ff375f;
            --accent-teal: #64d2ff;
            --border: rgba(255, 255, 255, 0.1);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.08);
            --bg-sports: rgba(255, 255, 255, 0.02);
            --text-sports: rgba(255, 255, 255, 0.04);
            --shadow: rgba(0, 0, 0, 0.4);
        }

        [data-theme="light"] {
            /* Light Theme */
            --bg-primary: #f5f5f7;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e5e5ea;
            --bg-elevated: #d1d1d6;
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
            --text-tertiary: #8e8e93;
            --accent: #007aff;
            --accent-green: #28cd41;
            --accent-yellow: #ffcc00;
            --accent-orange: #ff9500;
            --accent-red: #ff3b30;
            --accent-purple: #af52de;
            --accent-pink: #ff2d55;
            --accent-teal: #5ac8fa;
            --border: rgba(0, 0, 0, 0.08);
            --glass: rgba(0, 0, 0, 0.03);
            --glass-border: rgba(0, 0, 0, 0.06);
            --bg-sports: rgba(0, 0, 0, 0.02);
            --text-sports: rgba(0, 0, 0, 0.04);
            --shadow: rgba(0, 0, 0, 0.15);
        }

        /* ==================== TOOLTIP SYSTEM (TKT-109) ==================== */
        .has-tooltip {
            position: relative;
            cursor: help;
        }
        .has-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            padding: 8px 12px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 4px 12px var(--shadow);
        }
        .has-tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }
        .help-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 14px;
            height: 14px;
            font-size: 10px;
            color: var(--text-tertiary);
            cursor: help;
            margin-left: 4px;
            vertical-align: middle;
        }
        .help-icon:hover { color: var(--accent); }

        /* Mobile-safe tooltip adjustments */
        @media (max-width: 768px) {
            .has-tooltip::after {
                white-space: normal;
                max-width: 200px;
                left: 0;
                transform: none;
                font-size: 11px;
            }
        }
        @media (max-width: 480px) {
            .has-tooltip::after {
                max-width: 160px;
                padding: 6px 10px;
                font-size: 10px;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            overflow-x: hidden;
            max-width: 100vw;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100dvh;  /* Dynamic viewport height - accounts for mobile browser chrome */
            min-height: 100vh;   /* Fallback for older browsers */
            -webkit-font-smoothing: antialiased;
            position: relative;
            transition: background 0.3s ease, color 0.3s ease;
            -webkit-overflow-scrolling: touch;  /* Smooth scrolling on iOS */
        }

        /* ==================== PROFESSIONAL SPORTS BACKGROUND ==================== */
        /* Inspired by ESPN, NBA broadcasts - clean, geometric, premium */
        .bg-gradient {
            position: fixed;
            inset: 0;
            z-index: -4;
            background:
                linear-gradient(135deg, #000000 0%, #0a0a12 25%, #0d1020 50%, #0a0a15 75%, #000000 100%);
        }

        [data-theme="light"] .bg-gradient {
            background:
                linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f1f3f5 100%);
        }

        /* Accent glow - top corner */
        .bg-gradient::before {
            content: '';
            position: absolute;
            top: -20%;
            right: -10%;
            width: 60%;
            height: 60%;
            background: radial-gradient(ellipse, rgba(10, 132, 255, 0.18) 0%, transparent 70%);
            filter: blur(80px);
            animation: pulse-glow 8s ease-in-out infinite;
        }

        /* Accent glow - bottom corner */
        .bg-gradient::after {
            content: '';
            position: absolute;
            bottom: -20%;
            left: -10%;
            width: 50%;
            height: 50%;
            background: radial-gradient(ellipse, rgba(191, 90, 242, 0.12) 0%, transparent 70%);
            filter: blur(80px);
            animation: pulse-glow 8s ease-in-out infinite 4s;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        [data-theme="light"] .bg-gradient::before {
            background: radial-gradient(ellipse, rgba(0, 100, 200, 0.1) 0%, transparent 70%);
        }

        [data-theme="light"] .bg-gradient::after {
            background: radial-gradient(ellipse, rgba(120, 80, 200, 0.08) 0%, transparent 70%);
        }

        /* Cricket Icons Pattern Layer */
        .cricket-icons {
            position: fixed;
            inset: 0;
            z-index: -3;
            opacity: 0.025;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3C!-- Cricket Ball --%3E%3Ccircle cx='30' cy='30' r='12' fill='none' stroke='%23ffffff' stroke-width='1.5'/%3E%3Cpath d='M22 24 Q30 30 22 36' fill='none' stroke='%23ffffff' stroke-width='1'/%3E%3Cpath d='M38 24 Q30 30 38 36' fill='none' stroke='%23ffffff' stroke-width='1'/%3E%3C!-- Cricket Bat --%3E%3Crect x='140' y='20' width='8' height='35' rx='2' fill='%23ffffff' opacity='0.8'/%3E%3Crect x='141' y='55' width='6' height='15' rx='1' fill='%23ffffff' opacity='0.6'/%3E%3C!-- Stumps --%3E%3Crect x='85' y='130' width='3' height='40' fill='%23ffffff'/%3E%3Crect x='92' y='130' width='3' height='40' fill='%23ffffff'/%3E%3Crect x='99' y='130' width='3' height='40' fill='%23ffffff'/%3E%3Crect x='83' y='128' width='22' height='3' rx='1' fill='%23ffffff'/%3E%3Crect x='83' y='135' width='22' height='3' rx='1' fill='%23ffffff'/%3E%3C!-- Six/Four marker --%3E%3Ctext x='160' y='150' font-family='Arial' font-size='24' font-weight='bold' fill='%23ffffff' opacity='0.5'%3E6%3C/text%3E%3C!-- Trophy --%3E%3Cpath d='M30 100 L30 115 L25 120 L35 120 L30 115' fill='none' stroke='%23ffffff' stroke-width='1.5'/%3E%3Cellipse cx='30' cy='95' rx='10' ry='6' fill='none' stroke='%23ffffff' stroke-width='1.5'/%3E%3Cpath d='M20 95 Q15 100 20 105' fill='none' stroke='%23ffffff' stroke-width='1'/%3E%3Cpath d='M40 95 Q45 100 40 105' fill='none' stroke='%23ffffff' stroke-width='1'/%3E%3C/svg%3E");
            background-size: 200px 200px;
        }

        [data-theme="light"] .cricket-icons {
            opacity: 0.04;
            filter: invert(1);
        }

        /* Sharp geometric grid */
        .bg-grid {
            position: fixed;
            inset: 0;
            z-index: -2;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
        }

        [data-theme="light"] .bg-grid {
            background-image:
                linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
        }

        /* Diagonal accent lines */
        .sports-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        /* Sharp diagonal stripe accents */
        .accent-stripe {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(10, 132, 255, 0.3), transparent);
            transform-origin: left center;
        }

        [data-theme="light"] .accent-stripe {
            background: linear-gradient(90deg, transparent, rgba(0, 100, 200, 0.2), transparent);
        }

        /* Corner accent brackets - larger and bolder */
        .corner-accent {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 2px solid rgba(10, 132, 255, 0.15);
            pointer-events: none;
            transition: border-color 0.5s ease;
        }

        .corner-accent.top-left {
            top: 60px;
            left: 20px;
            border-right: none;
            border-bottom: none;
        }

        .corner-accent.top-right {
            top: 60px;
            right: 20px;
            border-left: none;
            border-bottom: none;
        }

        .corner-accent.bottom-left {
            bottom: 20px;
            left: 20px;
            border-right: none;
            border-top: none;
        }

        .corner-accent.bottom-right {
            bottom: 20px;
            right: 20px;
            border-left: none;
            border-top: none;
        }

        [data-theme="light"] .corner-accent {
            border-color: rgba(0, 100, 200, 0.1);
        }

        /* Floating cricket ball decoration */
        .floating-ball {
            position: fixed;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(220, 50, 50, 0.08), rgba(139, 0, 0, 0.04));
            border: 1px solid rgba(220, 50, 50, 0.1);
            z-index: -1;
            pointer-events: none;
            animation: float-ball 20s ease-in-out infinite;
        }

        .floating-ball::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transform: translateY(-50%) rotate(-20deg);
        }

        .floating-ball.ball-1 {
            bottom: 10%;
            right: 5%;
            animation-delay: 0s;
        }

        .floating-ball.ball-2 {
            top: 20%;
            left: 3%;
            width: 100px;
            height: 100px;
            animation-delay: -10s;
            opacity: 0.6;
        }

        @keyframes float-ball {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(20px) rotate(-5deg); }
        }

        [data-theme="light"] .floating-ball {
            background: radial-gradient(circle at 30% 30%, rgba(200, 30, 30, 0.06), rgba(139, 0, 0, 0.03));
            border-color: rgba(200, 30, 30, 0.08);
        }

        /* "MISSION CONTROL" watermark */
        .bg-watermark {
            position: fixed;
            bottom: 5%;
            right: -5%;
            font-size: 180px;
            font-weight: 800;
            letter-spacing: -0.05em;
            color: rgba(255, 255, 255, 0.015);
            z-index: -1;
            pointer-events: none;
            transform: rotate(-5deg);
            white-space: nowrap;
            user-select: none;
        }

        [data-theme="light"] .bg-watermark {
            color: rgba(0, 0, 0, 0.02);
        }

        /* Subtle dot pattern overlay */
        .dot-pattern {
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 24px 24px;
            mask-image: radial-gradient(ellipse 80% 60% at 50% 50%, black, transparent);
            -webkit-mask-image: radial-gradient(ellipse 80% 60% at 50% 50%, black, transparent);
        }

        [data-theme="light"] .dot-pattern {
            background-image: radial-gradient(rgba(0, 0, 0, 0.04) 1px, transparent 1px);
        }

        /* Vertical accent line */
        .vertical-accent {
            position: absolute;
            width: 1px;
            height: 100%;
            background: linear-gradient(180deg, transparent, rgba(10, 132, 255, 0.2), transparent);
        }

        [data-theme="light"] .vertical-accent {
            background: linear-gradient(180deg, transparent, rgba(0, 100, 200, 0.15), transparent);
        }

        /* ==================== NAVIGATION ==================== */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 52px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 100;
            transition: background 0.3s ease;
        }

        [data-theme="light"] .nav {
            background: rgba(245, 245, 247, 0.85);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-logo {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .nav-title {
            font-size: 15px;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .nav-tabs {
            display: flex;
            gap: 4px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            padding: 5px;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .nav-tab {
            padding: 8px 18px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.25s ease;
            border: 1px solid transparent;
            background: none;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
            border-color: var(--border);
        }

        .nav-tab:hover::before { opacity: 1; }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 2px 12px rgba(10, 132, 255, 0.4);
        }

        .nav-tab.active::before { opacity: 1; }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .nav-time {
            font-size: 11px;
            color: var(--text-tertiary);
            font-variant-numeric: tabular-nums;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        /* Theme toggle */
        .theme-toggle {
            width: 38px;
            height: 38px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.25s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .theme-toggle:hover {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-elevated) 100%);
            color: var(--accent-yellow);
            border-color: var(--accent-yellow);
            box-shadow: 0 0 16px rgba(255, 214, 10, 0.3);
            transform: scale(1.05);
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border: 1px solid var(--border);
            color: var(--accent);
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            font-family: inherit;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.2) 0%, rgba(191, 90, 242, 0.2) 100%);
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(10, 132, 255, 0.3);
            transform: translateY(-1px);
        }

        /* Special styling for About button */
        .nav-btn[href="about.html"] {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            color: white;
            border: none;
        }

        .nav-btn[href="about.html"]:hover {
            box-shadow: 0 0 24px rgba(10, 132, 255, 0.5);
            transform: translateY(-2px);
        }

        /* ==================== MAIN CONTAINER ==================== */
        .main {
            padding-top: 68px; /* Extra padding to prevent content cutoff under fixed nav */
            min-height: 100vh;
        }

        .view { display: none; }
        .view.active { display: block; }

        /* ==================== HERO SECTION ==================== */
        .hero {
            padding: 48px 24px 40px;
            border-bottom: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.03) 0%, rgba(191, 90, 242, 0.02) 100%);
            pointer-events: none;
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .sprint-label {
            display: inline-block;
            font-size: 11px;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 12px;
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 20px;
            box-shadow: 0 2px 12px rgba(10, 132, 255, 0.3);
        }

        .sprint-title {
            font-size: 52px;
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sprint-dates {
            font-size: 17px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sprint-dates::before {
            content: 'üìÖ';
            font-size: 16px;
        }

        /* Stats Grid */
        .stats-grid {
            display: flex;
            flex-wrap: nowrap;
            gap: 1px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 50%, var(--accent-pink) 100%);
            border-radius: 16px;
            overflow: hidden;
            margin-top: 32px;
            padding: 2px;
            box-shadow: 0 4px 24px rgba(10, 132, 255, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .stats-grid .stat-item {
            flex: 1;
            min-width: 0;
        }

        .stat-item {
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .stat-item:hover {
            background: var(--bg-tertiary);
        }

        .stat-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            border-radius: 3px 3px 0 0;
            opacity: 0;
            transition: opacity 0.3s ease, width 0.3s ease;
        }

        .stat-item:hover::after {
            opacity: 1;
            width: 60%;
        }

        .stat-item:nth-child(1)::after { background: var(--accent-green); }
        .stat-item:nth-child(2)::after { background: var(--accent-yellow); }
        .stat-item:nth-child(3)::after { background: var(--accent-red); }
        .stat-item:nth-child(4)::after { background: var(--accent); }

        .stat-value {
            font-size: 40px;
            font-weight: 700;
            letter-spacing: -0.02em;
            font-variant-numeric: tabular-nums;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value.accent-green { color: var(--accent-green); }
        .stat-value.accent-yellow { color: var(--accent-yellow); }
        .stat-value.accent-red { color: var(--accent-red); }
        .stat-value.accent-blue { color: var(--accent); }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 4px;
            font-weight: 500;
        }

        /* ==================== BOARD SECTION ==================== */
        .board-section {
            padding: 32px 24px;
            max-width: 1800px;
            margin: 0 auto;
        }

        .board-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .board-title {
            font-size: 22px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .board-tagline {
            font-size: 13px;
            color: var(--text-tertiary);
            margin-top: 4px;
            font-style: italic;
        }

        .board-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-separator {
            width: 1px;
            height: 24px;
            background: var(--border);
            margin: 0 4px;
        }

        /* Time Tracking Badge */
        .time-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 6px;
            background: var(--bg-tertiary);
            color: var(--text-tertiary);
        }
        .time-badge.fast { color: var(--accent-green); }
        .time-badge.medium { color: var(--accent-yellow); }
        .time-badge.slow { color: var(--accent-red); }

        /* Review Age Badge (TKT-105) */
        .review-age-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: 6px;
        }
        .review-age-badge.fresh {
            background: rgba(48, 209, 88, 0.15);
            color: var(--accent-green);
        }
        .review-age-badge.aging {
            background: rgba(255, 214, 10, 0.15);
            color: var(--accent-yellow);
        }
        .review-age-badge.stale {
            background: rgba(255, 69, 58, 0.15);
            color: var(--accent-red);
            animation: pulse-stale 2s ease-in-out infinite;
        }
        @keyframes pulse-stale {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Search Box */
        .search-box-mc {
            position: relative;
            min-width: 200px;
        }
        .search-box-mc input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 14px;
            font-family: inherit;
            transition: all 0.25s ease;
        }
        .search-box-mc input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.2);
        }
        .search-box-mc::before {
            content: 'üîç';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            pointer-events: none;
        }

        .filter-btn {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            font-family: inherit;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .filter-btn:hover {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-elevated) 100%);
            color: var(--text-primary);
            border-color: var(--accent);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 0 0 1px var(--accent);
        }

        .filter-btn:hover::before { opacity: 1; }

        .filter-btn.active {
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.25) 0%, rgba(191, 90, 242, 0.15) 100%);
            color: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 16px rgba(10, 132, 255, 0.3), inset 0 0 12px rgba(10, 132, 255, 0.1);
        }

        .filter-btn.active::before { opacity: 1; }

        /* Filter Dropdowns (Priority, Effort) */
        .filter-dropdown {
            position: relative;
        }

        .filter-dropdown-btn {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 8px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 8px;
            min-width: 240px;
            display: none;
            z-index: 50;
            box-shadow: 0 20px 40px var(--shadow);
        }

        .filter-dropdown-menu.active { display: block; }

        .filter-option {
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .filter-option:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .filter-option.selected {
            background: rgba(10, 132, 255, 0.15);
            color: var(--accent);
        }

        /* Agent filter dropdown */
        .agent-filter {
            position: relative;
        }

        .agent-filter-btn {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ==================== AGENT SELECTION MODAL ==================== */
        .agent-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .agent-modal-overlay.active {
            display: flex;
        }

        /* Hide mobile nav when modal is open to prevent weird scrolling behavior */
        body.modal-open {
            overflow: hidden;
        }
        body.modal-open .mobile-nav {
            display: none !important;
        }

        .agent-modal {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            width: 100%;
            max-width: 480px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.4);
            animation: modalSlideIn 0.25s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.95) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .agent-modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .agent-modal-title {
            font-size: 16px;
            font-weight: 600;
        }

        .agent-modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--bg-tertiary);
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.15s ease;
        }

        .agent-modal-close:hover {
            background: var(--accent-red);
            color: white;
        }

        .agent-modal-body {
            padding: 16px;
            overflow-y: auto;
            max-height: calc(80vh - 140px);
        }

        .agent-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .agent-grid-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.15s ease;
            border: 2px solid transparent;
            background: var(--bg-tertiary);
        }

        .agent-grid-item:hover {
            background: var(--bg-elevated);
            transform: translateY(-2px);
        }

        .agent-grid-item.selected {
            border-color: var(--accent);
            background: rgba(10, 132, 255, 0.15);
        }

        .agent-grid-item.selected::after {
            content: '‚úì';
            position: absolute;
            top: 4px;
            right: 4px;
            width: 18px;
            height: 18px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .agent-grid-item {
            position: relative;
        }

        .agent-grid-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            overflow: hidden;
        }

        .agent-grid-avatar img {
            width: 100%;
            height: 100%;
        }

        .agent-grid-name {
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            color: var(--text-secondary);
            line-height: 1.2;
        }

        .agent-grid-count {
            font-size: 10px;
            color: var(--text-tertiary);
            background: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .agent-modal-footer {
            padding: 12px 16px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .agent-modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
            border: none;
            font-family: inherit;
        }

        .agent-modal-btn.secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .agent-modal-btn.secondary:hover {
            background: var(--bg-elevated);
        }

        .agent-modal-btn.primary {
            background: var(--accent);
            color: white;
        }

        .agent-modal-btn.primary:hover {
            background: #0077ed;
        }

        /* Mobile adjustments */
        @media (max-width: 600px) {
            .agent-modal-overlay { padding: 12px; }
            .agent-modal { max-height: 85vh; }
            .agent-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
            .agent-grid-item { padding: 10px 6px; }
            .agent-grid-avatar { width: 44px; height: 44px; }
            .agent-grid-name { font-size: 10px; }
            .agent-modal-body { max-height: calc(85vh - 140px); }
        }

        .agent-option-count {
            font-size: 12px;
            color: var(--text-tertiary);
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* ==================== KANBAN BOARD ==================== */
        .kanban {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 12px;
        }

        .column {
            background: linear-gradient(180deg, var(--bg-secondary) 0%, rgba(28, 28, 30, 0.8) 100%);
            backdrop-filter: blur(10px);
            border-radius: 14px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .column::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--border);
            transition: background 0.3s ease;
        }

        .column:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        /* Column accent colors */
        .column[data-state="IDEA"]::before { background: linear-gradient(90deg, var(--accent-purple), rgba(191, 90, 242, 0.3)); }
        .column[data-state="BACKLOG"]::before { background: linear-gradient(90deg, var(--text-secondary), rgba(142, 142, 147, 0.3)); }
        .column[data-state="READY"]::before { background: linear-gradient(90deg, var(--accent), rgba(10, 132, 255, 0.3)); }
        .column[data-state="RUNNING"]::before { background: linear-gradient(90deg, var(--accent-yellow), rgba(255, 214, 10, 0.3)); }
        .column[data-state="BLOCKED"]::before { background: linear-gradient(90deg, var(--accent-red), rgba(255, 69, 58, 0.3)); }
        .column[data-state="REVIEW"]::before { background: linear-gradient(90deg, var(--accent-orange), rgba(255, 159, 10, 0.3)); }
        .column[data-state="FOUNDER_REVIEW"]::before { background: linear-gradient(90deg, var(--accent-pink), rgba(255, 55, 95, 0.3)); }
        .column[data-state="VALIDATION"]::before { background: linear-gradient(90deg, var(--accent-pink), rgba(255, 55, 95, 0.3)); }
        .column[data-state="DONE"]::before { background: linear-gradient(90deg, var(--accent-green), rgba(48, 209, 88, 0.3)); }

        .column-header {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.2);
        }

        /* Special Founder Review Column Styling */
        .column.founder-column {
            border-color: rgba(196, 30, 58, 0.3);
            background: linear-gradient(180deg, rgba(139, 0, 0, 0.08) 0%, var(--bg-secondary) 20%);
        }
        .column.founder-column .column-header {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.2) 0%, rgba(196, 30, 58, 0.15) 100%);
            border-bottom-color: rgba(196, 30, 58, 0.3);
        }
        .column.founder-column .column-name {
            color: #ffd700;
        }
        .column.founder-column .column-count {
            background: linear-gradient(135deg, #8b0000 0%, #c41e3a 100%);
            color: white;
        }

        .column-name {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .column-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            box-shadow: 0 0 8px currentColor;
        }

        .dot-idea { background: var(--accent-purple); }
        .dot-backlog { background: var(--text-secondary); }
        .dot-ready { background: var(--accent); }
        .dot-running { background: var(--accent-yellow); box-shadow: 0 0 10px var(--accent-yellow); }
        .dot-blocked { background: var(--accent-red); box-shadow: 0 0 10px var(--accent-red); }
        .dot-review { background: var(--accent-orange); }
        .dot-validation { background: var(--accent-pink); }
        .dot-founder {
            background: linear-gradient(135deg, #8b0000 0%, #c41e3a 100%);
            box-shadow: 0 0 12px rgba(196, 30, 58, 0.6);
            animation: founder-pulse 2s ease-in-out infinite;
        }
        @keyframes founder-pulse {
            0%, 100% { box-shadow: 0 0 8px rgba(196, 30, 58, 0.4); }
            50% { box-shadow: 0 0 16px rgba(196, 30, 58, 0.8); }
        }
        .dot-done { background: var(--accent-green); }

        .column-count {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-secondary);
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-elevated) 100%);
            padding: 4px 10px;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .column-body {
            padding: 12px;
            flex: 1;
            overflow-y: auto;
        }

        /* ==================== TICKET CARD ==================== */
        .ticket {
            background: linear-gradient(145deg, var(--bg-tertiary) 0%, rgba(44, 44, 46, 0.8) 100%);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.25s ease;
            border: 1px solid rgba(255, 255, 255, 0.06);
            position: relative;
            overflow: hidden;
        }

        .ticket::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, transparent 50%);
            pointer-events: none;
        }

        .ticket::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--accent);
            opacity: 0;
            transition: opacity 0.25s ease;
            border-radius: 3px 0 0 3px;
        }

        .ticket:hover {
            background: linear-gradient(145deg, var(--bg-elevated) 0%, rgba(58, 58, 60, 0.9) 100%);
            border-color: var(--accent);
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(10, 132, 255, 0.3);
        }

        .ticket:hover::after {
            opacity: 1;
        }

        .ticket.filtered-out {
            opacity: 0.3;
            transform: scale(0.98);
        }

        /* Priority-based left accent colors */
        .ticket[data-priority="P0"]::after { background: var(--accent-red); }
        .ticket[data-priority="P1"]::after { background: var(--accent-orange); }
        .ticket[data-priority="P2"]::after { background: var(--accent); }
        .ticket[data-priority="P3"]::after { background: var(--text-secondary); }

        .ticket-top {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 10px;
        }

        /* Agent Avatar */
        .agent-avatar {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            padding: 2px;
            box-shadow: 0 2px 8px rgba(10, 132, 255, 0.2);
            transition: all 0.25s ease;
        }

        .ticket:hover .agent-avatar {
            box-shadow: 0 4px 12px rgba(10, 132, 255, 0.35);
            transform: scale(1.05);
        }

        .agent-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
            background: var(--bg-secondary);
        }

        .ticket-info { flex: 1; min-width: 0; }

        .ticket-id {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-tertiary);
            font-variant-numeric: tabular-nums;
        }

        /* Sport icons for all tickets - based on agent's sport */
        .ticket::before {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 11px;
            opacity: 0.5;
        }
        .ticket.sport-nfl::before { content: 'üèà'; }
        .ticket.sport-nba::before { content: 'üèÄ'; }
        .ticket.sport-soccer::before { content: '‚öΩ'; }
        .ticket.sport-cricket::before { content: 'üèè'; }
        .ticket.sport-founder::before { content: 'üåπ'; }

        /* Agent-specific border colors based on team colors */
        /* üèà NFL */
        .ticket.agent-tom-brady { border-left: 3px solid #002244; } /* Patriots Navy */
        .ticket.agent-brock-purdy { border-left: 3px solid #aa0000; } /* 49ers Red */

        /* üèÄ NBA */
        .ticket.agent-stephen-curry { border-left: 3px solid #1d428a; } /* Warriors Blue */
        .ticket.agent-lebron-james { border-left: 3px solid #552583; } /* Lakers Purple */
        .ticket.agent-brad-stevens { border-left: 3px solid #007a33; } /* Celtics Green */
        .ticket.agent-ime-udoka { border-left: 3px solid #ce1141; } /* Houston Rockets Red */
        .ticket.agent-jayson-tatum { border-left: 3px solid #007a33; } /* Celtics Green */

        /* ‚öΩ Soccer */
        .ticket.agent-kevin-de-bruyne { border-left: 3px solid #12a0d7; } /* Napoli Light Blue */
        .ticket.agent-pep-guardiola { border-left: 3px solid #6cabdd; } /* Man City Sky Blue */
        .ticket.agent-ngolo-kante { border-left: 3px solid #002654; } /* France Navy */
        .ticket.agent-jose-mourinho { border-left: 3px solid #e20e0e; } /* Benfica Red */
        .ticket.agent-florentino-perez { border-left: 3px solid #febe10; } /* Real Madrid Gold */

        /* üèè Cricket */
        .ticket.agent-andy-flower { border-left: 3px solid #ec1c24; } /* RCB Red */
        .ticket.agent-virat-kohli { border-left: 3px solid #ec1c24; } /* RCB Red */

        /* üåπ Founder */
        .ticket.agent-founder { border-left: 3px solid #e84a27; } /* Illinois Orange - Go Fighting Illini! */

        /* RETRO ticket special styling - Pep Guardiola's retrospectives */
        .ticket.is-retro {
            border: 2px solid rgba(108, 171, 221, 0.4);
            border-left: 3px solid #6cabdd;
            background: linear-gradient(135deg, rgba(108, 171, 221, 0.08) 0%, var(--bg-secondary) 100%);
        }
        .ticket.is-retro .ticket-id {
            color: #6cabdd;
            font-weight: 700;
        }
        .ticket.is-retro::before {
            content: '‚öΩ';
            opacity: 0.7;
        }

        .ticket-title {
            font-size: 14px;
            font-weight: 500;
            line-height: 1.35;
            margin-top: 3px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .ticket-agent {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .ticket-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .priority {
            font-size: 10px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            border: 1px solid transparent;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .priority-p0 {
            background: linear-gradient(135deg, rgba(255, 69, 58, 0.2) 0%, rgba(255, 69, 58, 0.1) 100%);
            color: var(--accent-red);
            border-color: rgba(255, 69, 58, 0.3);
            box-shadow: 0 0 8px rgba(255, 69, 58, 0.2);
        }
        .priority-p1 {
            background: linear-gradient(135deg, rgba(255, 159, 10, 0.2) 0%, rgba(255, 159, 10, 0.1) 100%);
            color: var(--accent-orange);
            border-color: rgba(255, 159, 10, 0.3);
        }
        .priority-p2 {
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.2) 0%, rgba(10, 132, 255, 0.1) 100%);
            color: var(--accent);
            border-color: rgba(10, 132, 255, 0.3);
        }
        .priority-p3 {
            background: linear-gradient(135deg, rgba(142, 142, 147, 0.15) 0%, rgba(142, 142, 147, 0.08) 100%);
            color: var(--text-secondary);
            border-color: rgba(142, 142, 147, 0.2);
        }

        /* Effort Level Badges */
        .effort {
            font-size: 9px;
            font-weight: 600;
            padding: 3px 6px;
            border-radius: 4px;
            border: 1px solid transparent;
        }

        .effort-quick-win {
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.2) 0%, rgba(48, 209, 88, 0.1) 100%);
            color: var(--accent-green);
            border-color: rgba(48, 209, 88, 0.3);
        }

        .effort-hustle {
            background: linear-gradient(135deg, rgba(255, 214, 10, 0.2) 0%, rgba(255, 214, 10, 0.1) 100%);
            color: var(--accent-yellow);
            border-color: rgba(255, 214, 10, 0.3);
        }

        .effort-deep-work {
            background: linear-gradient(135deg, rgba(255, 159, 10, 0.2) 0%, rgba(255, 159, 10, 0.1) 100%);
            color: var(--accent-orange);
            border-color: rgba(255, 159, 10, 0.3);
        }

        .effort-marathon {
            background: linear-gradient(135deg, rgba(255, 69, 58, 0.2) 0%, rgba(255, 69, 58, 0.1) 100%);
            color: var(--accent-red);
            border-color: rgba(255, 69, 58, 0.3);
        }

        .tag {
            font-size: 10px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 6px;
            background: linear-gradient(135deg, var(--glass) 0%, rgba(255, 255, 255, 0.02) 100%);
            color: var(--text-secondary);
            border: 1px solid rgba(255, 255, 255, 0.06);
            transition: all 0.2s ease;
        }

        .ticket:hover .tag {
            background: var(--bg-tertiary);
            border-color: var(--border);
        }

        /* Special Tag Styles */
        .tag.tag-founder {
            /* Rose/Pink for Founder Review */
            background: linear-gradient(135deg, rgba(255, 55, 95, 0.15) 0%, rgba(255, 55, 95, 0.08) 100%);
            color: #ff375f;
            border-color: rgba(255, 55, 95, 0.25);
        }
        .tag.tag-approved {
            /* Green for Approved */
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.15) 0%, rgba(48, 209, 88, 0.08) 100%);
            color: #30d158;
            border-color: rgba(48, 209, 88, 0.25);
        }
        .tag.tag-progress {
            /* Blue for In Progress */
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.15) 0%, rgba(10, 132, 255, 0.08) 100%);
            color: #0a84ff;
            border-color: rgba(10, 132, 255, 0.25);
        }

        /* ==================== FOUNDER REVIEW HIGHLIGHT ==================== */
        /* Orange background tint for tickets needing Founder review */
        .ticket.needs-founder-review {
            background: linear-gradient(135deg,
                rgba(232, 74, 39, 0.12) 0%,
                rgba(232, 74, 39, 0.06) 50%,
                var(--bg-secondary) 100%) !important;
            border-color: rgba(232, 74, 39, 0.3) !important;
        }
        .ticket.needs-founder-review:hover {
            background: linear-gradient(135deg,
                rgba(232, 74, 39, 0.18) 0%,
                rgba(232, 74, 39, 0.10) 50%,
                var(--bg-tertiary) 100%) !important;
            border-color: rgba(232, 74, 39, 0.5) !important;
        }

        .ticket-links {
            display: flex;
            gap: 6px;
            margin-top: 10px;
        }

        .link-btn {
            font-size: 10px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 6px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            color: var(--accent);
            transition: all 0.25s ease;
            border: 1px solid var(--border);
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        a.link-btn {
            text-decoration: none;
        }

        .link-btn:hover {
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.2) 0%, rgba(191, 90, 242, 0.15) 100%);
            border-color: var(--accent);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(10, 132, 255, 0.2);
        }

        .branch-btn {
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.15) 0%, rgba(48, 176, 88, 0.1) 100%);
            color: var(--accent-green);
            border-color: rgba(48, 209, 88, 0.3);
            font-family: monospace;
            font-size: 9px;
        }

        .branch-btn:hover {
            background: rgba(48, 209, 88, 0.25);
            border-color: var(--accent-green);
        }

        .link-btn.review-btn {
            color: var(--accent-pink);
            border-color: rgba(255, 55, 95, 0.3);
        }

        .link-btn.review-btn:hover {
            background: linear-gradient(135deg, rgba(255, 55, 95, 0.2) 0%, rgba(255, 55, 95, 0.1) 100%);
            border-color: var(--accent-pink);
            box-shadow: 0 2px 8px rgba(255, 55, 95, 0.2);
        }

        .gate-progress {
            display: flex;
            gap: 3px;
            margin-top: 12px;
            padding: 6px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .gate-step {
            flex: 1;
            height: 4px;
            border-radius: 4px;
            background: var(--bg-secondary);
            transition: all 0.3s ease;
        }

        .gate-step.passed {
            background: linear-gradient(90deg, var(--accent-green), #4ade80);
            box-shadow: 0 0 8px rgba(48, 209, 88, 0.4);
        }

        .gate-step.current {
            background: linear-gradient(90deg, var(--accent-yellow), #fbbf24);
            box-shadow: 0 0 8px rgba(255, 214, 10, 0.4);
            animation: pulse-gate 2s ease-in-out infinite;
        }

        @keyframes pulse-gate {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .empty-state {
            text-align: center;
            padding: 32px 16px;
            color: var(--text-tertiary);
            font-size: 13px;
        }

        /* ==================== AGENT ROSTER ==================== */
        .roster-section {
            padding: 32px 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .roster-header {
            margin-bottom: 32px;
        }

        .roster-title {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
        }

        .roster-subtitle {
            font-size: 17px;
            color: var(--text-secondary);
        }

        .roster-hero {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            margin-bottom: 24px;
            min-height: 420px;
        }
        .roster-hero .founder-card {
            background: linear-gradient(145deg, rgba(254, 190, 16, 0.08) 0%, var(--bg-secondary) 100%);
            border: 2px solid rgba(254, 190, 16, 0.3);
            border-radius: 18px;
            padding: 24px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 10px;
        }
        .roster-hero .founder-card .founder-avatar {
            width: 72px; height: 72px;
            border-radius: 50%;
            border: 3px solid rgba(254, 190, 16, 0.5);
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(254, 190, 16, 0.2);
        }
        .roster-hero .founder-card .founder-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .roster-hero .founder-card .founder-name {
            font-size: 20px; font-weight: 700; letter-spacing: -0.02em;
        }
        .roster-hero .founder-card .founder-role {
            color: #febe10; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;
        }
        .roster-hero .founder-card .founder-desc {
            font-size: 12.5px; color: var(--text-secondary); line-height: 1.6; text-align: left; padding: 0 4px;
        }
        .roster-hero .founder-card .founder-stat-row {
            display: flex; gap: 16px; justify-content: center; margin-top: 4px;
        }
        .roster-hero .founder-card .founder-stat {
            text-align: center;
        }
        .roster-hero .founder-card .founder-stat-val {
            font-size: 22px; font-weight: 700; color: #febe10;
        }
        .roster-hero .founder-card .founder-stat-lbl {
            font-size: 10px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.04em;
        }
        .roster-hero .founder-card .founder-quote {
            font-style: italic; color: var(--text-secondary); font-size: 12px; margin-top: auto; padding-top: 10px; border-top: 1px solid var(--border);
        }
        .roster-hero .spider-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 24px rgba(10, 132, 255, 0.06);
        }
        .roster-hero .spider-card .spider-title {
            font-size: 18px; font-weight: 600; margin-bottom: 4px;
        }
        .roster-hero .spider-card .spider-subtitle {
            font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;
        }
        .skill-map-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; flex: 1;
        }
        .skill-tile {
            background: var(--bg-primary); border: 1px solid var(--border);
            border-radius: 10px; padding: 10px 12px; border-left: 3px solid var(--border);
            transition: border-color 0.2s;
        }
        .skill-tile[data-depth="good"] { border-left-color: #30d158; }
        .skill-tile[data-depth="moderate"] { border-left-color: #ff9f0a; }
        .skill-tile[data-depth="thin"] { border-left-color: #ff453a; background: rgba(255,69,58,0.04); }
        .skill-tile-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;
        }
        .skill-tile-name { font-weight: 600; font-size: 12px; color: var(--text-primary); }
        .skill-tile[data-depth="thin"] .skill-tile-name { color: #ff453a; }
        .skill-tile-score { font-size: 14px; font-weight: 700; color: var(--accent-color, #0a84ff); }
        .skill-tile-bar {
            height: 4px; background: var(--border); border-radius: 2px; margin-bottom: 8px; overflow: hidden;
        }
        .skill-tile-bar-fill {
            height: 100%; border-radius: 2px; transition: width 0.5s ease;
        }
        .skill-tile-bar-fill.bar-green { background: linear-gradient(90deg, #30d158, #34c759); }
        .skill-tile-bar-fill.bar-amber { background: linear-gradient(90deg, #ff9f0a, #ffb340); }
        .skill-tile-bar-fill.bar-red { background: linear-gradient(90deg, #ff453a, #ff6961); }
        .skill-tile-agents { display: flex; gap: 4px; flex-wrap: wrap; align-items: center; }
        .skill-tile-avatar {
            width: 24px; height: 24px; border-radius: 50%; overflow: hidden;
            border: 2px solid var(--border); flex-shrink: 0; cursor: default;
        }
        .skill-tile-avatar svg { width: 100%; height: 100%; display: block; }
        .skill-tile-depth-badge {
            font-size: 9px; font-weight: 600; padding: 1px 6px; border-radius: 8px;
            margin-left: auto; flex-shrink: 0;
        }
        .skill-tile-depth-badge.badge-good { background: rgba(48,209,88,0.15); color: #30d158; }
        .skill-tile-depth-badge.badge-moderate { background: rgba(255,159,10,0.15); color: #ff9f0a; }
        .skill-tile-depth-badge.badge-thin { background: rgba(255,69,58,0.15); color: #ff453a; }
        @media (max-width: 900px) {
            .roster-hero { grid-template-columns: 1fr; min-height: auto; }
        }
        @media (max-width: 500px) {
            .skill-map-grid { grid-template-columns: 1fr; }
        }

        .roster-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 16px;
        }

        .agent-card {
            background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(28, 28, 30, 0.7) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .agent-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(10, 132, 255, 0.08) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }

        .agent-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 18px;
            padding: 2px;
            background: linear-gradient(135deg, var(--accent), var(--accent-purple), var(--accent-pink));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .agent-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3), 0 0 30px rgba(10, 132, 255, 0.15);
        }

        .agent-card:hover::before {
            opacity: 1;
        }

        .agent-card:hover::after {
            opacity: 1;
        }

        /* Available Agent Styling */
        .agent-card.agent-available {
            border: 1px dashed var(--accent-green);
            background: linear-gradient(145deg, rgba(48, 209, 88, 0.05) 0%, rgba(28, 28, 30, 0.7) 100%);
        }

        .agent-card.agent-available::after {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-teal));
        }

        .available-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-teal));
            color: #000;
            font-size: 11px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .agent-available-message {
            text-align: center;
            padding: 20px 0;
            color: var(--accent-green);
            font-size: 14px;
        }

        .agent-available-message p {
            margin: 0;
            opacity: 0.9;
        }

        .agent-card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .agent-card-avatar {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            padding: 3px;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 4px 16px rgba(10, 132, 255, 0.25);
            transition: all 0.3s ease;
        }

        .agent-card:hover .agent-card-avatar {
            transform: scale(1.05);
            box-shadow: 0 6px 24px rgba(10, 132, 255, 0.4);
        }

        .agent-card-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 13px;
            background: var(--bg-secondary);
        }

        .agent-card-info h3 {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .agent-card-role {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .agent-card-team {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 4px;
        }

        .agent-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .agent-stat {
            text-align: center;
            padding: 12px 8px;
            background: var(--bg-tertiary);
            border-radius: 10px;
        }

        .agent-stat-value {
            font-size: 24px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }

        .agent-stat-label {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 2px;
        }

        .agent-priority-breakdown {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .priority-chip {
            flex: 1;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
        }

        .priority-chip.p0 { background: rgba(255, 69, 58, 0.1); color: var(--accent-red); }
        .priority-chip.p1 { background: rgba(255, 159, 10, 0.1); color: var(--accent-orange); }
        .priority-chip.p2 { background: rgba(10, 132, 255, 0.1); color: var(--accent); }
        .priority-chip.p3 { background: rgba(142, 142, 147, 0.1); color: var(--text-secondary); }

        .agent-progress {
            margin-top: 16px;
        }

        .agent-progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .agent-progress-bar {
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
        }

        .agent-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-teal));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .agent-recent {
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .agent-recent-title {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 12px;
        }

        .agent-recent-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
        }

        .recent-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .recent-status.done { background: var(--accent-green); }
        .recent-status.running { background: var(--accent-yellow); }
        .recent-status.blocked { background: var(--accent-red); }

        .recent-title {
            flex: 1;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .recent-time {
            font-size: 11px;
            color: var(--text-tertiary);
        }

        .recent-effort {
            font-size: 10px;
            color: var(--text-tertiary);
            white-space: nowrap;
        }

        /* ==================== MODAL ==================== */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            z-index: 200;
            justify-content: center;
            align-items: center;
            padding: 24px;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--bg-secondary);
            border-radius: 16px;
            width: 100%;
            max-width: 560px;
            max-height: 85vh;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .modal-header-content {
            display: flex;
            gap: 16px;
            align-items: flex-start;
        }

        .modal-avatar {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .modal-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            line-height: 1.3;
        }

        .modal-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .modal-close {
            background: var(--bg-tertiary);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .modal-close:hover { background: var(--bg-elevated); color: var(--text-primary); }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(85vh - 100px);
        }

        .modal-section { margin-bottom: 24px; }
        .modal-section:last-child { margin-bottom: 0; }

        /* Context cards (Ask/Goal/Reason/Audible) */
        .context-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (max-width: 600px) {
            .context-grid { grid-template-columns: 1fr; }
        }

        .context-card {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 14px;
            border-left: 3px solid var(--accent);
        }

        .context-card.ask { border-left-color: var(--accent-teal); }
        .context-card.goal { border-left-color: var(--accent-green); }
        .context-card.reason { border-left-color: var(--accent-yellow); }
        .context-card.audible { border-left-color: var(--accent-purple); }

        .context-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }

        .context-card.ask .context-label { color: var(--accent-teal); }
        .context-card.goal .context-label { color: var(--accent-green); }
        .context-card.reason .context-label { color: var(--accent-yellow); }
        .context-card.audible .context-label { color: var(--accent-purple); }

        .context-text {
            font-size: 13px;
            color: var(--text-primary);
            line-height: 1.5;
        }

        .modal-section-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 12px;
        }

        .gate-list { display: flex; flex-direction: column; gap: 8px; }

        .gate-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            background: var(--bg-tertiary);
            border-radius: 10px;
        }

        .gate-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .gate-icon.passed { background: rgba(48, 209, 88, 0.15); color: var(--accent-green); }
        .gate-icon.pending { background: rgba(255, 214, 10, 0.15); color: var(--accent-yellow); }
        .gate-icon.waiting { background: var(--bg-elevated); color: var(--text-tertiary); }

        .gate-info { flex: 1; }
        .gate-name { font-size: 14px; font-weight: 500; }
        .gate-approver { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .detail-item {
            background: var(--bg-tertiary);
            padding: 14px;
            border-radius: 10px;
        }

        .detail-label {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-value {
            font-size: 15px;
            font-weight: 500;
            margin-top: 4px;
        }

        .link-list { display: flex; flex-direction: column; gap: 8px; }

        .modal-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 14px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .modal-link:hover { background: var(--bg-elevated); }
        .modal-link.disabled {
            cursor: default;
            opacity: 0.6;
            background: var(--bg-secondary);
        }
        .modal-link.disabled:hover { background: var(--bg-secondary); }
        .modal-link-icon { font-size: 16px; }
        .modal-link-text { font-size: 14px; font-weight: 500; }
        .modal-plan-inline { display: flex; gap: 8px; padding: 10px 12px; background: var(--bg-tertiary); border-radius: 8px; font-size: 13px; line-height: 1.5; color: var(--text-secondary); }
        .modal-plan-text { flex: 1; }
        .modal-link-arrow { margin-left: auto; color: var(--text-tertiary); }

        /* Link Categories - Collapsible with Visual Zing */
        .link-category {
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        .link-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
        }
        .link-category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        /* Category-specific colors */
        .link-category.cat-prd .link-category-header {
            background: linear-gradient(135deg, rgba(10, 132, 255, 0.12) 0%, rgba(10, 132, 255, 0.05) 100%);
            border-left-color: var(--accent);
        }
        .link-category.cat-output .link-category-header {
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.12) 0%, rgba(48, 209, 88, 0.05) 100%);
            border-left-color: var(--accent-green);
        }
        .link-category.cat-review .link-category-header {
            background: linear-gradient(135deg, rgba(255, 69, 58, 0.12) 0%, rgba(255, 69, 58, 0.05) 100%);
            border-left-color: var(--accent-red);
        }
        .link-category.cat-links .link-category-header {
            background: linear-gradient(135deg, rgba(191, 90, 242, 0.12) 0%, rgba(191, 90, 242, 0.05) 100%);
            border-left-color: var(--accent-purple);
        }
        .link-category-header:hover { filter: brightness(1.1); }
        .link-category-icon {
            font-size: 20px;
            transition: transform 0.3s ease;
        }
        .link-category:hover .link-category-icon { transform: scale(1.15); }
        .link-category-title {
            font-size: 14px;
            font-weight: 600;
            flex: 1;
            letter-spacing: 0.3px;
        }
        .link-category-count {
            font-size: 11px;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 12px;
            min-width: 24px;
            text-align: center;
            transition: all 0.3s ease;
        }
        /* Count badge colors by category */
        .link-category.cat-prd .link-category-count {
            background: rgba(10, 132, 255, 0.2);
            color: var(--accent);
        }
        .link-category.cat-output .link-category-count {
            background: rgba(48, 209, 88, 0.2);
            color: var(--accent-green);
        }
        .link-category.cat-review .link-category-count {
            background: rgba(255, 69, 58, 0.2);
            color: var(--accent-red);
        }
        .link-category.cat-links .link-category-count {
            background: rgba(191, 90, 242, 0.2);
            color: var(--accent-purple);
        }
        /* Glow effect for non-zero counts */
        .link-category.has-content .link-category-count {
            box-shadow: 0 0 8px currentColor;
        }
        .link-category-chevron {
            font-size: 12px;
            color: var(--text-tertiary);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .link-category.open .link-category-chevron { transform: rotate(180deg); }
        .link-category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--bg-primary);
        }
        .link-category.open .link-category-content { max-height: 500px; }
        .link-category-content .modal-link {
            border-radius: 0;
            border-bottom: 1px solid var(--border);
            padding: 14px 20px;
            transition: all 0.2s ease;
        }
        .link-category-content .modal-link:hover {
            background: var(--bg-tertiary);
            padding-left: 28px;
        }
        .link-category-content .modal-link:last-child { border-bottom: none; }
        .link-category-content .modal-link-icon {
            transition: transform 0.2s ease;
        }
        .link-category-content .modal-link:hover .modal-link-icon {
            transform: scale(1.2);
        }
        .link-category-content .modal-link-arrow {
            transition: transform 0.2s ease;
        }
        .link-category-content .modal-link:hover .modal-link-arrow {
            transform: translateX(4px);
        }
        .link-category-empty {
            padding: 16px 20px;
            color: var(--text-tertiary);
            font-size: 13px;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .link-category-empty::before {
            content: '‚óã';
            opacity: 0.5;
        }

        /* ==================== FOUNDER REVIEW INSTRUCTION BUBBLE ==================== */
        .founder-instruction-bubble {
            position: relative;
            margin: 20px 0;
            padding: 20px 24px;
            background: linear-gradient(135deg, rgba(255, 69, 58, 0.15) 0%, rgba(191, 90, 242, 0.1) 50%, rgba(255, 159, 10, 0.1) 100%);
            border: 2px solid rgba(255, 69, 58, 0.4);
            border-radius: 20px;
            box-shadow:
                0 8px 32px rgba(255, 69, 58, 0.2),
                0 0 0 1px rgba(255, 255, 255, 0.05) inset,
                0 0 40px rgba(255, 69, 58, 0.1);
            animation: bubble-pulse 3s ease-in-out infinite;
        }
        @keyframes bubble-pulse {
            0%, 100% { box-shadow: 0 8px 32px rgba(255, 69, 58, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05) inset, 0 0 40px rgba(255, 69, 58, 0.1); }
            50% { box-shadow: 0 8px 40px rgba(255, 69, 58, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.08) inset, 0 0 60px rgba(255, 69, 58, 0.15); }
        }
        .founder-instruction-bubble::before {
            content: '';
            position: absolute;
            left: 24px;
            bottom: -12px;
            width: 0;
            height: 0;
            border-left: 14px solid transparent;
            border-right: 14px solid transparent;
            border-top: 14px solid rgba(255, 69, 58, 0.4);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }
        .founder-instruction-bubble::after {
            content: '';
            position: absolute;
            left: 26px;
            bottom: -8px;
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 12px solid rgba(255, 69, 58, 0.15);
        }
        .founder-instruction-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .founder-instruction-icon {
            font-size: 28px;
            animation: icon-float 2s ease-in-out infinite;
        }
        @keyframes icon-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        .founder-instruction-label {
            font-family: 'Cinzel', 'Times New Roman', serif;
            font-size: 16px;
            font-weight: 700;
            color: var(--accent-red);
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 0 2px 12px rgba(255, 69, 58, 0.4);
        }
        .founder-instruction-text {
            font-family: inherit;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.6;
            color: var(--text-primary);
            letter-spacing: 0.2px;
            padding-left: 40px;
        }
        [data-theme="light"] .founder-instruction-bubble {
            background: linear-gradient(135deg, rgba(255, 59, 48, 0.12) 0%, rgba(175, 82, 222, 0.08) 50%, rgba(255, 149, 0, 0.08) 100%);
            border-color: rgba(255, 59, 48, 0.5);
            box-shadow:
                0 8px 32px rgba(255, 59, 48, 0.15),
                0 0 0 1px rgba(0, 0, 0, 0.05) inset;
        }
        [data-theme="light"] .founder-instruction-bubble::before {
            border-top-color: rgba(255, 59, 48, 0.5);
        }
        [data-theme="light"] .founder-instruction-bubble::after {
            border-top-color: rgba(255, 59, 48, 0.12);
        }
        [data-theme="light"] .founder-instruction-label {
            color: #ff3b30;
        }

        /* ==================== EPIC VIEW (TKT-129) ==================== */
        .epic-section {
            padding: 32px 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .epic-header {
            margin-bottom: 24px;
        }

        .epic-title {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
        }

        .epic-subtitle {
            font-size: 17px;
            color: var(--text-secondary);
            font-style: italic;
        }

        .epic-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            align-items: center;
            margin-bottom: 24px;
        }

        .epic-search {
            flex: 1;
            min-width: 200px;
            max-width: 400px;
        }

        .epic-search-input {
            width: 100%;
            padding: 10px 16px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.2s ease;
        }

        .epic-search-input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.15);
        }

        .epic-search-input::placeholder {
            color: var(--text-tertiary);
        }

        .epic-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .epic-filter-btn {
            padding: 8px 16px;
            border: 1px solid var(--border);
            border-radius: 20px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .epic-filter-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .epic-filter-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .epic-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .epic-summary-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .epic-summary-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }
        .epic-summary-card.active-filter {
            border-color: var(--accent);
            background: rgba(10, 132, 255, 0.1);
            box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.15);
        }

        .epic-summary-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .epic-summary-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 4px;
        }

        .epic-summary-card.has-warning {
            border-color: var(--accent-orange);
            background: rgba(255, 159, 10, 0.08);
        }

        .epic-summary-card.has-warning .epic-summary-value {
            color: var(--accent-orange);
        }

        .epic-tree {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .epic-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .epic-card:hover {
            border-color: var(--accent);
        }

        .epic-card-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }

        .epic-card-header:hover {
            background: var(--bg-tertiary);
        }

        .epic-card-info {
            flex: 1;
            min-width: 0;
        }

        .epic-card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .epic-card-title .epic-id {
            color: var(--text-tertiary);
            font-size: 14px;
            font-weight: 400;
        }

        .epic-card-meta {
            font-size: 13px;
            color: var(--text-secondary);
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .epic-card-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .epic-owner-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid var(--border);
        }

        .epic-type-badge {
            display: inline-flex;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .epic-type-badge.delivery { background: rgba(48, 209, 88, 0.15); color: var(--accent-green); }
        .epic-type-badge.research { background: rgba(10, 132, 255, 0.15); color: var(--accent); }
        .epic-type-badge.retro { background: rgba(255, 159, 10, 0.15); color: var(--accent-orange); }
        .epic-type-badge.spike { background: rgba(191, 90, 242, 0.15); color: var(--accent-purple); }

        .epic-progress-container {
            width: 120px;
            text-align: right;
        }

        .epic-progress-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 4px;
        }

        .epic-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .epic-progress-text {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .epic-card-toggle {
            font-size: 16px;
            color: var(--text-tertiary);
            transition: transform 0.2s ease;
        }

        .epic-card.expanded .epic-card-toggle {
            transform: rotate(180deg);
        }

        .epic-card-body {
            display: none;
            border-top: 1px solid var(--border);
            padding: 16px 20px;
            background: var(--bg-primary);
        }

        .epic-card.expanded .epic-card-body {
            display: block;
        }

        .epic-ticket-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .epic-ticket {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: 8px;
            font-size: 14px;
            transition: background 0.2s ease;
        }

        .epic-ticket:hover {
            background: var(--bg-tertiary);
        }

        .epic-ticket.is-parent {
            border-left: 3px solid var(--accent);
        }

        .epic-ticket.is-child {
            margin-left: 24px;
            border-left: 3px solid var(--border);
        }

        .epic-ticket-id {
            font-weight: 500;
            color: var(--text-tertiary);
            min-width: 70px;
        }

        .epic-ticket-title {
            flex: 1;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .epic-ticket-state {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 500;
        }

        .epic-ticket-state.done { background: rgba(48, 209, 88, 0.15); color: var(--accent-green); }
        .epic-ticket-state.in-progress { background: rgba(10, 132, 255, 0.15); color: var(--accent); }
        .epic-ticket-state.review { background: rgba(255, 214, 10, 0.15); color: var(--accent-yellow); }
        .epic-ticket-state.todo { background: rgba(142, 142, 147, 0.15); color: var(--text-secondary); }
        .epic-ticket-state.validation { background: rgba(191, 90, 242, 0.15); color: var(--accent-purple); }

        /* Mobile responsive for Epic View */
        @media (max-width: 600px) {
            .epic-section { padding: 20px 16px; }
            .epic-title { font-size: 28px; }
            .epic-card-header { padding: 16px; flex-wrap: wrap; }
            .epic-card-title { font-size: 16px; }
            .epic-progress-container { width: 100%; margin-top: 12px; }
            .epic-progress-bar { width: 100%; }
            .epic-ticket { padding: 10px 12px; font-size: 13px; }
            .epic-ticket.is-child { margin-left: 16px; }
            .epic-ticket-id { min-width: 60px; font-size: 12px; }
        }

        @media (max-width: 380px) {
            .epic-title { font-size: 24px; }
            .epic-filters { gap: 6px; }
            .epic-filter-btn { padding: 6px 12px; font-size: 12px; }
        }

        /* ==================== LIST VIEW ==================== */
        .list-section {
            padding: 32px 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .list-header {
            margin-bottom: 24px;
        }

        .list-title {
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
        }

        .list-subtitle {
            font-size: 15px;
            color: var(--text-secondary);
        }

        /* Desktop Table */
        .ticket-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .ticket-table th,
        .ticket-table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .ticket-table th {
            background: var(--bg-tertiary);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            position: sticky;
            top: 0;
        }

        .ticket-table tr:last-child td {
            border-bottom: none;
        }

        .ticket-table tr {
            transition: background 0.15s ease;
            cursor: pointer;
        }

        .ticket-table tbody tr:hover {
            background: var(--bg-tertiary);
        }

        .table-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            overflow: hidden;
        }

        .table-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .table-agent-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .table-agent-name {
            font-weight: 500;
            font-size: 14px;
        }

        .table-id {
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .table-title {
            font-weight: 500;
            font-size: 14px;
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .table-state {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .state-idea { background: rgba(191, 90, 242, 0.15); color: var(--accent-purple); }
        .state-backlog { background: var(--glass); color: var(--text-secondary); }
        .state-ready { background: rgba(10, 132, 255, 0.15); color: var(--accent); }
        .state-running { background: rgba(255, 214, 10, 0.15); color: var(--accent-yellow); }
        .state-blocked { background: rgba(255, 69, 58, 0.15); color: var(--accent-red); }
        .state-review { background: rgba(255, 159, 10, 0.15); color: var(--accent-orange); }
        .state-validation { background: rgba(255, 55, 95, 0.15); color: var(--accent-pink); }
        .state-done { background: rgba(48, 209, 88, 0.15); color: var(--accent-green); }

        .table-sprint {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .table-priority {
            font-size: 11px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 12px;
        }

        /* Mobile Cards View */
        .mobile-cards {
            display: none;
        }

        .mobile-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mobile-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow);
        }

        .mobile-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .mobile-card-avatar {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .mobile-card-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .mobile-card-main {
            flex: 1;
            min-width: 0;
        }

        .mobile-card-id {
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 600;
        }

        .mobile-card-title {
            font-size: 15px;
            font-weight: 500;
            line-height: 1.3;
            margin-top: 2px;
        }

        .mobile-card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .mobile-card-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-top: 1px solid var(--border);
        }

        .mobile-card-label {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .mobile-card-value {
            font-size: 13px;
            font-weight: 500;
        }

        /* Mobile nav tabs */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 6px 8px;
            padding-bottom: max(6px, env(safe-area-inset-bottom));
            z-index: 100;
            /* GPU compositing for stable positioning during browser chrome changes */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .mobile-nav-tabs {
            display: flex;
            justify-content: space-between;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
            gap: 2px;
        }

        .mobile-nav-tabs::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .mobile-nav-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: 6px 8px;
            border: none;
            background: none;
            color: var(--text-tertiary);
            font-size: 9px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-family: inherit;
            text-decoration: none;
            flex-shrink: 0;
            min-width: 48px;
        }

        .mobile-nav-tab.active {
            color: var(--accent);
            background: rgba(10, 132, 255, 0.1);
        }

        .mobile-nav-icon {
            font-size: 18px;
        }

        /* ==================== TECH HEALTH DASHBOARD ==================== */
        .tech-health-section {
            padding: 40px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .tech-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .tech-title-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 8px;
        }

        .scouting-avatar {
            display: inline-block;
        }

        .scouting-avatar img {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .tech-title {
            font-family: 'Cinzel', serif;
            font-size: 42px;
            color: var(--text-primary);
            margin: 0;
        }

        .tech-subtitle {
            color: var(--text-secondary);
            font-size: 16px;
        }

        .tech-purpose {
            margin: 20px 0;
            text-align: center;
        }

        .purpose-divider {
            color: var(--accent-purple);
            font-size: 12px;
            letter-spacing: 2px;
            opacity: 0.6;
            margin: 8px 0;
        }

        .purpose-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 700px;
            margin: 0 auto;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(191, 90, 242, 0.08) 0%, rgba(10, 132, 255, 0.08) 100%);
            border-radius: 8px;
            border-left: 3px solid var(--accent-purple);
        }

        .purpose-text strong {
            color: var(--accent-purple);
        }

        @media (max-width: 600px) {
            .tech-purpose { margin: 16px 0; }
            .purpose-text { font-size: 13px; padding: 10px 16px; }
            .purpose-divider { font-size: 10px; }
        }

        .tech-last-updated {
            margin-top: 12px;
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .refresh-health-btn {
            background: var(--glass);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 4px 12px;
            border-radius: 4px;
            margin-left: 12px;
            cursor: pointer;
            font-size: 12px;
        }

        .refresh-health-btn:hover {
            background: var(--accent);
            color: white;
        }

        /* Health Score Card */
        .health-score-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .score-main {
            display: flex;
            align-items: center;
            gap: 40px;
            margin-bottom: 32px;
        }

        .score-circle {
            position: relative;
            width: 140px;
            height: 140px;
        }

        .score-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .score-bg {
            fill: none;
            stroke: var(--bg-tertiary);
            stroke-width: 8;
        }

        .score-progress {
            fill: none;
            stroke: var(--accent-green);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 339.29;
            stroke-dashoffset: 62.77;
            transition: stroke-dashoffset 1s ease;
        }

        .score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .score-info h2 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .score-status {
            font-size: 18px;
            color: var(--accent-yellow);
            font-weight: 600;
        }

        .score-target {
            font-size: 14px;
            color: var(--text-tertiary);
            margin-top: 8px;
        }

        .score-explainer {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed var(--border);
            font-size: 12px;
            color: var(--text-secondary);
        }

        .explainer-item {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .explainer-divider {
            color: var(--text-tertiary);
            margin: 0 4px;
        }

        .score-tickets {
            margin-top: 20px;
            padding: 16px;
            background: linear-gradient(135deg, rgba(191, 90, 242, 0.1) 0%, rgba(10, 132, 255, 0.1) 100%);
            border: 1px dashed var(--accent-purple);
            border-radius: 12px;
        }

        .score-tickets-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .score-tickets-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .score-tickets-epic {
            font-size: 11px;
            font-weight: 600;
            padding: 4px 10px;
            background: var(--accent-purple);
            color: white;
            border-radius: 12px;
        }

        .score-tickets-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .ticket-chip {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ticket-chip.running {
            background: rgba(48, 209, 88, 0.2);
            color: var(--accent-green);
            border: 1px solid rgba(48, 209, 88, 0.3);
        }

        .ticket-chip.running:hover {
            background: rgba(48, 209, 88, 0.3);
        }

        .ticket-chip.backlog {
            background: rgba(142, 142, 147, 0.2);
            color: var(--text-secondary);
            border: 1px solid rgba(142, 142, 147, 0.3);
        }

        .ticket-chip.backlog:hover {
            background: rgba(142, 142, 147, 0.3);
        }

        .ticket-chip.review, .ticket-chip.validation {
            background: rgba(255, 159, 10, 0.2);
            color: var(--accent-orange);
            border: 1px solid rgba(255, 159, 10, 0.3);
        }

        .ticket-chip.review:hover, .ticket-chip.validation:hover {
            background: rgba(255, 159, 10, 0.3);
        }

        .ticket-chip.ready {
            background: rgba(10, 132, 255, 0.2);
            color: var(--accent-blue);
            border: 1px solid rgba(10, 132, 255, 0.3);
        }

        .ticket-chip.ready:hover {
            background: rgba(10, 132, 255, 0.3);
        }

        .ticket-chip.done {
            background: rgba(48, 209, 88, 0.1);
            color: var(--text-tertiary);
            border: 1px solid rgba(48, 209, 88, 0.2);
            text-decoration: line-through;
        }

        @media (max-width: 600px) {
            .score-explainer { flex-direction: column; align-items: flex-start; gap: 6px; }
            .explainer-divider { display: none; }
            .score-tickets { padding: 12px; }
            .score-tickets-header { flex-direction: column; align-items: flex-start; }
            .ticket-chip { font-size: 10px; padding: 5px 10px; }
        }

        .score-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .category-item {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .category-name {
            font-size: 14px;
            font-weight: 500;
        }

        .category-score {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent-green);
        }

        .category-bar {
            height: 6px;
            background: var(--bg-elevated);
            border-radius: 3px;
            overflow: hidden;
        }

        .category-fill {
            height: 100%;
            background: var(--accent-green);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Tech Grid */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .tech-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
        }

        .tech-card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .stack-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stack-item {
            display: grid;
            grid-template-columns: 32px 1fr;
            grid-template-rows: auto auto;
            align-items: start;
            gap: 4px 12px;
            padding: 10px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .stack-icon {
            font-size: 20px;
            grid-row: 1 / 3;
            align-self: center;
        }

        .stack-name {
            font-weight: 500;
            color: var(--text-primary);
            grid-column: 2;
            grid-row: 1;
        }

        .stack-desc {
            font-size: 12px;
            color: var(--text-tertiary);
            grid-column: 2;
            grid-row: 2;
            line-height: 1.4;
        }

        /* Benchmarks */
        .benchmark-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .benchmark-item {
            display: grid;
            grid-template-columns: 1fr 150px 50px;
            align-items: center;
            gap: 12px;
        }

        .benchmark-name {
            font-size: 14px;
            font-weight: 500;
            min-width: 0; /* Prevent overflow */
        }

        .benchmark-name.benchmark-with-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .benchmark-name.benchmark-with-logo span {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .benchmark-logo {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .benchmark-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .benchmark-fill {
            height: 100%;
            border-radius: 4px;
        }

        .benchmark-fill.anthropic {
            background: linear-gradient(90deg, #CC785C, #E8956E);
        }

        .benchmark-fill.microsoft {
            background: linear-gradient(90deg, #00A4EF, #7FBA00);
        }

        .benchmark-fill.google {
            background: linear-gradient(90deg, #4285F4, #34A853);
        }

        .benchmark-score {
            font-weight: 600;
            text-align: right;
            color: var(--accent-green);
        }

        /* Automation Grid */
        .automation-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .automation-item {
            display: grid;
            grid-template-columns: 24px 1fr auto;
            align-items: center;
            gap: 8px;
            padding: 12px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            min-width: 0; /* Prevent grid blowout */
        }

        .automation-item.good .auto-pct { color: var(--accent-green); }
        .automation-item.warning .auto-pct { color: var(--accent-yellow); }
        .automation-item.bad .auto-pct { color: var(--accent-red); }

        .auto-icon { font-size: 16px; flex-shrink: 0; }
        .auto-name { font-size: 13px; font-weight: 500; min-width: 0; }
        .auto-pct { font-size: 14px; font-weight: 700; white-space: nowrap; }

        /* Circular Progress */
        .circular-progress {
            position: relative;
            width: 56px;
            height: 56px;
            flex-shrink: 0;
        }

        .circular-progress svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .circular-progress .bg-circle {
            fill: none;
            stroke: var(--bg-elevated);
            stroke-width: 6;
        }

        .circular-progress .progress-circle {
            fill: none;
            stroke-width: 6;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .circular-progress .progress-circle.green { stroke: var(--accent-green); }
        .circular-progress .progress-circle.yellow { stroke: var(--accent-yellow); }
        .circular-progress .progress-circle.red { stroke: var(--accent-red); }
        .circular-progress .progress-circle.blue { stroke: var(--accent); }
        .circular-progress .progress-circle.orange { stroke: #F59E0B; }
        .circular-progress .progress-circle.google { stroke: #4285F4; }

        .circular-progress .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* Circular Benchmark/Automation Items */
        .circular-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-radius: 12px;
        }

        .circular-item-info {
            flex: 1;
            min-width: 0;
        }

        .circular-item-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .circular-item-name svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .circular-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .circular-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        @media (max-width: 600px) {
            .circular-grid { grid-template-columns: 1fr; }
            .circular-progress { width: 48px; height: 48px; }
            .circular-progress .progress-text { font-size: 11px; }
            .circular-item { padding: 10px 12px; gap: 12px; }
            .circular-item-name { font-size: 13px; }
        }

        /* Workflows Card */
        .workflows-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .workflow-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .workflow-item {
            display: grid;
            grid-template-columns: 24px 180px 150px 1fr;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .workflow-status {
            font-size: 12px;
        }

        .workflow-status.active { color: var(--accent-green); }
        .workflow-status.scheduled { color: var(--accent-yellow); }
        .workflow-status.chained { color: var(--accent-purple); }

        .workflow-name {
            font-family: monospace;
            font-size: 13px;
            font-weight: 600;
        }

        .workflow-trigger {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .workflow-owner {
            font-size: 12px;
            color: var(--text-tertiary);
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 8px;
        }

        .workflow-owner-avatar {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            flex-shrink: 0;
        }

        /* Gaps Card */
        .gaps-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
        }

        .gaps-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .gap-item {
            display: grid;
            grid-template-columns: 50px 1fr auto;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .gap-priority {
            font-size: 11px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            text-align: center;
        }

        .gap-item.p0 .gap-priority {
            background: rgba(255, 69, 58, 0.2);
            color: var(--accent-red);
        }

        .gap-item.p1 .gap-priority {
            background: rgba(255, 159, 10, 0.2);
            color: var(--accent-orange);
        }

        .gap-item.done .gap-priority {
            background: rgba(48, 209, 88, 0.2);
            color: var(--accent-green);
        }

        .gap-item.done .gap-status {
            color: var(--accent-green);
            font-weight: 600;
        }

        /* Resources Card */
        .resources-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .resource-category {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
        }

        .resource-category-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .resource-links {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .resource-link {
            display: grid;
            grid-template-columns: 24px 1fr 20px;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: var(--bg-secondary);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .resource-link:hover {
            background: var(--bg-elevated);
            transform: translateX(4px);
        }

        .resource-icon {
            font-size: 16px;
        }

        .resource-name {
            font-size: 13px;
            font-weight: 500;
        }

        .resource-arrow {
            color: var(--text-tertiary);
            font-size: 14px;
        }

        .resource-link:hover .resource-arrow {
            color: var(--accent);
        }

        /* Token Accounting / Production Dashboard */
        .token-dashboard {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .token-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .token-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .token-plan-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent) 100%);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }

        .token-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .token-metric {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .token-metric-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .token-metric-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .token-metric-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .token-metric.good .token-metric-value { color: var(--accent-green); }
        .token-metric.warning .token-metric-value { color: var(--accent-yellow); }
        .token-metric.critical .token-metric-value { color: var(--accent-red); }

        .token-progress-section {
            margin-bottom: 24px;
        }

        .token-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .token-progress-title {
            font-size: 14px;
            font-weight: 600;
        }

        .token-progress-value {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .token-progress-bar {
            height: 12px;
            background: var(--bg-elevated);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .token-progress-fill {
            height: 100%;
            border-radius: 6px;
            background: linear-gradient(90deg, var(--accent-green) 0%, var(--accent-yellow) 50%, var(--accent-red) 100%);
            transition: width 0.5s ease;
        }

        .token-progress-marker {
            position: absolute;
            top: -20px;
            transform: translateX(-50%);
            font-size: 10px;
            color: var(--text-tertiary);
        }

        .token-insights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
        }

        .token-insight-card {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
        }

        .token-insight-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .token-insight-icon {
            font-size: 20px;
        }

        .token-insight-title {
            font-size: 14px;
            font-weight: 600;
        }

        .token-insight-content {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .token-insight-content strong {
            color: var(--text-primary);
        }

        .token-tips {
            margin-top: 12px;
        }

        .token-tip {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 8px 0;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .token-tip::before {
            content: 'üí°';
            font-size: 12px;
        }

        @media (max-width: 600px) {
            .token-dashboard { padding: 16px; }
            .token-header { flex-direction: column; align-items: flex-start; }
            .token-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .token-metric { padding: 12px; }
            .token-metric-icon { font-size: 24px; }
            .token-metric-value { font-size: 20px; }
            .token-insights { grid-template-columns: 1fr; }
        }

        /* Agent Skill Cards */
        .agent-skills {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .skills-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .skills-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .skills-grid {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .skill-row {
            display: grid;
            grid-template-columns: 80px 1fr 30px;
            align-items: center;
            gap: 8px;
        }

        .skill-name {
            font-size: 11px;
            color: var(--text-secondary);
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }

        .skill-bar {
            height: 6px;
            background: var(--bg-elevated);
            border-radius: 3px;
            overflow: hidden;
        }

        .skill-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .skill-score {
            font-size: 11px;
            font-weight: 700;
            text-align: right;
        }

        .skill-score.high { color: var(--accent-green); }
        .skill-score.medium { color: var(--accent-yellow); }
        .skill-score.low { color: var(--accent-red); }

        .agent-traits {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 10px;
        }

        .trait-chip {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }

        .trait-chip.strength {
            background: rgba(48, 209, 88, 0.15);
            color: var(--accent-green);
        }

        .trait-chip.weakness {
            background: rgba(255, 69, 58, 0.15);
            color: var(--accent-red);
        }

        .gap-name {
            font-size: 14px;
            font-weight: 500;
        }

        .gap-status {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 1400px) {
            .kanban { grid-template-columns: repeat(4, 1fr); }
        }

        @media (max-width: 900px) {
            .kanban { grid-template-columns: repeat(2, 1fr); }
            .sprint-title, .roster-title, .list-title { font-size: 28px; }
            .nav-tabs { display: none; }
            .mobile-nav { display: block; }
            .main { padding-bottom: 80px; }
            .sports-text.names { font-size: 50px; }
            .ticket-table { font-size: 13px; }
            .table-title { max-width: 180px; }
        }

        @media (max-width: 600px) {
            .kanban { grid-template-columns: 1fr; }
            .stats-grid {
                flex-wrap: wrap;
                gap: 2px;
            }
            .stats-grid .stat-item {
                flex: 1 1 30%;
                min-width: 60px;
            }
            .roster-grid { grid-template-columns: 1fr; }
            .agent-stats { grid-template-columns: repeat(2, 1fr); }
            .table-wrapper { display: none; }
            .mobile-cards { display: block; }
            .hero { padding: 24px 16px 20px; }
            .board-section, .list-section, .roster-section { padding: 20px 16px; }
            .sprint-title, .roster-title, .list-title { font-size: 24px; }
            .stat-value { font-size: 24px; }
            .stat-item { padding: 12px 8px; }
            .stat-label { font-size: 10px; }
            /* ==================== MOBILE FILTER LAYOUT ==================== */
            /* Tom Brady - Uniform 2-column grid for cleaner mobile view */
            .board-filters {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                align-items: stretch;
                width: 100%;
            }

            /* Search spans full width at top */
            .search-box-mc {
                grid-column: 1 / -1;
                width: 100%;
            }
            .search-box-mc input { width: 100%; }

            /* All filter buttons fill their grid cell */
            .filter-btn {
                width: 100%;
                height: 100%;
                justify-content: center;
                padding: 12px 8px;
                font-size: 12px;
                display: flex;
                align-items: center;
            }

            /* Dropdowns fill their grid cell */
            .filter-dropdown {
                width: 100%;
                display: flex;
            }
            .filter-dropdown-btn {
                width: 100%;
                height: 100%;
                justify-content: center;
                font-size: 12px;
                flex: 1;
            }

            /* Agent filter spans full width at bottom */
            .agent-filter {
                grid-column: 1 / -1;
                width: 100%;
                display: flex;
                position: relative;
            }
            .agent-filter-btn {
                width: 100%;
                justify-content: center;
                font-size: 12px;
                flex: 1;
            }


            /* ==================== MOBILE COLLAPSIBLE COLUMNS ==================== */
            /* Tom Brady - Collapsible sections for cleaner mobile view */

            .column.collapsible .column-header {
                cursor: pointer;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
            }

            .column.collapsible .column-header:active {
                background: rgba(255, 255, 255, 0.05);
            }

            .column-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 24px;
                height: 24px;
                font-size: 12px;
                color: var(--text-secondary);
                transition: transform 0.3s ease;
                margin-left: 8px;
            }

            .column.collapsed .column-toggle {
                transform: rotate(-90deg);
            }

            .column.collapsed .column-body {
                display: none;
            }

            .column.collapsible {
                min-height: auto;
            }

            .column.collapsible.collapsed {
                min-height: auto;
            }

            /* Collapsed column header styling */
            .column.collapsed .column-header {
                border-bottom: none;
                border-radius: 12px;
            }

            .column.collapsed .column-count {
                background: linear-gradient(135deg, var(--accent) 0%, var(--accent-orange) 100%);
                color: white;
            }
        }

        /* ==================== ADDITIONAL RESPONSIVE FIXES ==================== */
        /* Tom Brady UI/UX Review - February 2026 */

        /* 768px Breakpoint - Tablets */
        @media (max-width: 768px) {
            .hero { padding: 32px 20px 28px; }
            .sprint-title { font-size: 32px; }
            .stat-value { font-size: 32px; }
            .board-header { flex-direction: column; align-items: flex-start; gap: 16px; }
            .roster-grid { grid-template-columns: 1fr; }
            .agent-card { padding: 20px; }
            .nav-actions { gap: 6px; flex-wrap: wrap; }
            .nav-time { display: none; }
            .nav-actions .nav-btn[href="about.html"] { display: none; } /* About in mobile nav */
            .table-title { max-width: 220px; }
        }

        /* 600px Breakpoint - Mobile Nav Fix */
        @media (max-width: 600px) {
            .nav { padding: 0 12px; }
            .nav-brand { gap: 6px; }
            .nav-title { font-size: 14px; }
            .nav-actions { gap: 4px; }
            .nav-actions .nav-btn[href="sprints.html"],
            .nav-actions .nav-btn[href*="the_lab"],
            .nav-actions .nav-btn[href="about.html"] { display: none; }
            /* Refresh button - icon only */
            .nav-btn.refresh-btn {
                padding: 8px;
                font-size: 0;
                min-width: 44px;
                min-height: 44px;
                justify-content: center;
            }
            .nav-btn.refresh-btn::before {
                content: 'üîÑ';
                font-size: 16px;
            }
            .theme-toggle { width: 44px; height: 44px; }
        }

        /* 480px Breakpoint - Small Phones */
        @media (max-width: 480px) {
            .hero { padding: 20px 12px 16px; }
            .sprint-title { font-size: 20px; }
            .sprint-dates { font-size: 14px; }
            .stat-value { font-size: 20px; }
            .stat-label { font-size: 9px; }
            .stat-item { padding: 10px 6px; }
            .stats-grid .stat-item { flex: 1 1 45%; min-width: 90px; }
            .board-section, .roster-section, .list-section { padding: 16px 12px; }
            .ticket { padding: 12px; }
            .agent-avatar { width: 36px; height: 36px; }
            .ticket-title { font-size: 13px; }
            .mobile-nav-tab { padding: 5px 6px; min-height: 44px; min-width: 44px; font-size: 8px; }
            .mobile-nav-icon { font-size: 16px; }
            .column { min-height: 180px; }
            .theme-toggle { width: 44px; height: 44px; font-size: 14px; }
            .nav-btn.refresh-btn { width: 44px; height: 44px; min-width: 44px; min-height: 44px; padding: 6px; }
            .nav-btn.refresh-btn::before { font-size: 14px; }
            /* Filter buttons - more compact */
            .board-filters { gap: 6px; }
            .filter-btn { padding: 8px 6px; font-size: 11px; min-height: 44px; }
            .filter-dropdown-btn, .agent-filter-btn { font-size: 11px; }
            .search-box-mc input { padding: 10px 12px 10px 36px; font-size: 13px; }
            /* Agent Stats */
            .agent-stats { gap: 8px; }
            .agent-stat { padding: 10px 6px; }
            .agent-stat-value { font-size: 20px; }
            .agent-stat-label { font-size: 9px; }
            /* Modal */
            .modal-overlay { padding: 12px; }
            .modal { max-height: calc(100vh - 24px); border-radius: 12px; }
            .modal-header { padding: 16px; }
            .modal-body { padding: 16px; }
            .modal-title { font-size: 16px; }
            .modal-avatar { width: 44px; height: 44px; }
            .detail-grid { grid-template-columns: 1fr; }
        }

        /* Touch Target Minimum Sizes (WCAG Compliance) */
        .filter-btn { min-height: 44px; }
        .mobile-nav-tab { min-height: 44px; min-width: 44px; }

        /* Scrollbar Styling */
        .column-body::-webkit-scrollbar { width: 6px; }
        .column-body::-webkit-scrollbar-track { background: transparent; }
        .column-body::-webkit-scrollbar-thumb { background: var(--bg-elevated); border-radius: 3px; }
        .column-body::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }

        /* Stats Grid Border Radius Fix */
        .stats-grid .stat-item:first-child { border-radius: 14px 0 0 14px; }
        .stats-grid .stat-item:last-child { border-radius: 0 14px 14px 0; }
        @media (max-width: 600px) {
            .stats-grid .stat-item:first-child,
            .stats-grid .stat-item:last-child { border-radius: 0; }
        }

        /* Z-Index Fix for Dropdowns */
        .filter-dropdown-menu, .agent-dropdown { z-index: 110; }

        /* ==================== NAVIGATION GUIDE ==================== */
        .nav-guide-btn {
            position: fixed; bottom: 24px; right: 24px; width: 56px; height: 56px;
            background: linear-gradient(135deg, #ff9f0a 0%, #ff6b35 100%);
            border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 50%;
            color: white; font-size: 24px; cursor: pointer;
            box-shadow: 0 4px 20px rgba(255, 159, 10, 0.4); z-index: 90;
            transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;
            animation: pulse-guide 2s ease-in-out infinite;
        }
        @keyframes pulse-guide {
            0%, 100% { box-shadow: 0 4px 20px rgba(255, 159, 10, 0.4); }
            50% { box-shadow: 0 4px 30px rgba(255, 159, 10, 0.6); }
        }
        .nav-guide-btn:hover { transform: scale(1.1); box-shadow: 0 6px 28px rgba(255, 159, 10, 0.6); animation: none; }
        .nav-guide-overlay {
            position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px); z-index: 250; display: none;
            align-items: center; justify-content: center; padding: 20px;
        }
        .nav-guide-overlay.active { display: flex; }
        .nav-guide-modal {
            background: var(--bg-secondary); border-radius: 20px; padding: 32px;
            max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto;
            border: 1px solid var(--border); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); position: relative;
        }
        .nav-guide-header { text-align: center; margin-bottom: 24px; }
        .nav-guide-header h3 { font-size: 22px; font-weight: 700; margin-bottom: 8px; }
        .nav-guide-header p { color: var(--text-secondary); font-size: 14px; }
        .nav-guide-item {
            display: flex; gap: 16px; padding: 16px; background: var(--bg-tertiary);
            border-radius: 12px; margin-bottom: 12px; align-items: flex-start; transition: all 0.2s ease;
        }
        .nav-guide-item:hover { background: var(--bg-elevated); transform: translateX(4px); }
        .nav-guide-icon {
            font-size: 28px; width: 48px; height: 48px; display: flex;
            align-items: center; justify-content: center; background: var(--bg-secondary);
            border-radius: 12px; flex-shrink: 0;
        }
        .nav-guide-text h4 { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
        .nav-guide-text p { font-size: 12px; color: var(--text-secondary); line-height: 1.4; }
        .nav-guide-start { border: 2px solid var(--accent-green); }
        .nav-guide-start .nav-guide-icon { background: rgba(48, 209, 88, 0.2); }
        .nav-guide-close {
            position: absolute; top: 16px; right: 16px; width: 32px; height: 32px;
            background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;
            color: var(--text-secondary); font-size: 18px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .nav-guide-close:hover { background: var(--bg-elevated); color: var(--text-primary); }
        @media (max-width: 600px) {
            .nav-guide-btn { bottom: 90px; } /* Above mobile nav */
        }

        /* ==================== SCOUTING REPORT MOBILE ==================== */
        @media (max-width: 900px) {
            .tech-health-section { padding: 24px 16px; }
            .tech-title { font-size: 28px; }
            .tech-grid { grid-template-columns: 1fr; gap: 16px; }
            .score-main { flex-direction: column; gap: 20px; text-align: center; }
            .score-circle { width: 120px; height: 120px; margin: 0 auto; }
            .score-value { font-size: 28px; }
            .score-info h2 { font-size: 20px; }
            .score-categories { grid-template-columns: 1fr 1fr; gap: 12px; }
            .benchmark-item { grid-template-columns: 1fr 120px 45px; gap: 8px; }
            .benchmark-name span { font-size: 12px; }
            .benchmark-list { gap: 12px; }
            .automation-grid { grid-template-columns: 1fr; gap: 10px; }
            .workflow-list { font-size: 13px; }
            .gap-item { grid-template-columns: 40px 1fr auto; gap: 10px; }
        }

        @media (max-width: 600px) {
            .tech-health-section { padding: 16px 12px; }
            .tech-title { font-size: 22px; }
            .tech-subtitle { font-size: 13px; }
            .health-score-card { padding: 20px 16px; }
            .score-circle { width: 100px; height: 100px; }
            .score-value { font-size: 24px; }
            .score-info h2 { font-size: 18px; }
            .score-status { font-size: 16px; }
            .score-target { font-size: 12px; }
            .score-categories { grid-template-columns: 1fr; gap: 10px; }
            .category-item { padding: 12px; }
            .category-name { font-size: 13px; }
            .tech-card { padding: 16px; }
            .tech-card-title { font-size: 16px; margin-bottom: 16px; }
            .stack-item { grid-template-columns: 28px 1fr; gap: 3px 10px; padding: 8px; }
            .stack-icon { font-size: 18px; }
            .stack-name { font-size: 13px; }
            .stack-desc { font-size: 11px; }
            /* Benchmark mobile: stacked layout with better visual grouping */
            .benchmark-item {
                grid-template-columns: 1fr;
                gap: 8px;
                padding: 12px;
                background: var(--bg-tertiary);
                border-radius: 8px;
            }
            .benchmark-name.benchmark-with-logo {
                margin-bottom: 0;
            }
            .benchmark-name.benchmark-with-logo span {
                white-space: normal;
                font-size: 13px;
            }
            .benchmark-bar { width: 100%; height: 10px; }
            .benchmark-score {
                text-align: left;
                font-size: 16px;
            }
            /* Automation mobile fixes */
            .automation-item {
                padding: 10px;
                grid-template-columns: 20px 1fr auto;
                gap: 6px;
            }
            .auto-name { font-size: 12px; white-space: normal; }
            .auto-pct { font-size: 13px; }
            .workflow-item { flex-wrap: wrap; gap: 8px; }
            .workflow-name { flex: 1 1 100%; }
            .gap-item { grid-template-columns: 1fr; gap: 8px; }
            .gap-priority { width: fit-content; }
        }
    </style>
</head>
<body>
    <!-- Sports-themed background -->
    <div class="bg-gradient"></div>
    <div class="cricket-icons"></div>
    <div class="bg-grid"></div>
    <div class="sports-bg" id="sportsBg"></div>
    <div class="floating-ball ball-1"></div>
    <div class="floating-ball ball-2"></div>
    <div class="bg-watermark">THE BOARDROOM</div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-brand">
            <div class="nav-logo">üèè</div>
            <span class="nav-title">The Boardroom</span>
        </div>
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showView('board')">Board</button>
            <button class="nav-tab" onclick="showView('list')">List</button>
            <button class="nav-tab" onclick="showView('epic')">Epic View</button>
            <button class="nav-tab" onclick="showView('roster')">Roster</button>
            <button class="nav-tab" onclick="showView('techHealth')">Tech Health</button>
        </div>
        <div class="nav-actions">
            <span class="nav-time" id="navTime">--:--:--</span>
            <a href="sprints.html" class="nav-btn">üìÖ Sprints</a>
            <a href="../../the_lab/dashboard/index.html" class="nav-btn">üî¨ The Lab</a>
            <a href="about.html" class="nav-btn">About</a>
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme" id="themeToggle">üåô</button>
            <button class="nav-btn refresh-btn" onclick="loadData()">Refresh</button>
        </div>
    </nav>

    <!-- Main -->
    <main class="main">
        <!-- Board View -->
        <div class="view active" id="boardView">
            <section class="hero">
                <div class="hero-content">
                    <div class="sprint-label">Active Sprint</div>
                    <h1 class="sprint-title">Sprint 4</h1>
                    <p class="sprint-dates">Jan 31 ‚Äî Feb 14, 2026</p>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value accent-blue" id="statTotal">156</div>
                            <div class="stat-label">Total</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value accent-purple" id="statBacklog">6</div>
                            <div class="stat-label">Backlog</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value accent-yellow" id="statRunning">2</div>
                            <div class="stat-label">In Progress</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value accent-orange" id="statReview">1</div>
                            <div class="stat-label">In Review</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value accent-pink" id="statFounder">8</div>
                            <div class="stat-label">üåπ Founder</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value accent-green" id="statDone">139</div>
                            <div class="stat-label">Done</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="board-section">
                <div class="board-header">
                    <div class="board-title-group">
                        <h2 class="board-title">The Front Office</h2>
                        <p class="board-tagline">üèÄ Where Pieces Move and Epics Are Built</p>
                    </div>
                    <div class="board-filters">
                        <!-- Search Box -->
                        <div class="search-box-mc">
                            <input type="text" id="ticketSearch" placeholder="Search tickets..." oninput="handleTicketSearch(event)">
                        </div>

                        <!-- All Tickets Button -->
                        <button class="filter-btn active" data-filter="all" onclick="resetFilters()">üìã All Tickets</button>

                        <!-- TKT-105: Stale Reviews Filter -->
                        <button class="filter-btn" data-filter="stale-reviews" onclick="filterStaleReviews()" id="staleReviewsBtn">üî¥ Stale Reviews</button>

                        <!-- Priority Dropdown -->
                        <div class="filter-dropdown">
                            <button class="filter-btn filter-dropdown-btn" onclick="toggleDropdown('priorityDropdown')">
                                <span id="priorityFilterLabel">üéØ Priority</span> ‚ñæ
                            </button>
                            <div class="filter-dropdown-menu" id="priorityDropdown">
                                <div class="filter-option" data-filter="all" onclick="setPriorityFilter('all')">All Priorities</div>
                                <div class="filter-option" data-filter="p0" onclick="setPriorityFilter('p0')">üî¥ P0 ‚Äî Drop Everything</div>
                                <div class="filter-option" data-filter="p1" onclick="setPriorityFilter('p1')">üü† P1 ‚Äî This Sprint</div>
                                <div class="filter-option" data-filter="p2" onclick="setPriorityFilter('p2')">üü° P2 ‚Äî Next Sprint</div>
                                <div class="filter-option" data-filter="p3" onclick="setPriorityFilter('p3')">üü¢ P3 ‚Äî Nice to Have</div>
                            </div>
                        </div>

                        <!-- Effort Dropdown -->
                        <div class="filter-dropdown">
                            <button class="filter-btn filter-dropdown-btn" onclick="toggleDropdown('effortDropdown')">
                                <span id="effortFilterLabel">üí™ Effort</span> ‚ñæ
                            </button>
                            <div class="filter-dropdown-menu" id="effortDropdown">
                                <div class="filter-option" data-filter="all" onclick="setEffortFilter('all')">All Effort Levels</div>
                                <div class="filter-option" data-filter="quick-win" onclick="setEffortFilter('quick-win')">‚ö° Quick Win ‚Äî Under 1 day</div>
                                <div class="filter-option" data-filter="hustle" onclick="setEffortFilter('hustle')">üèÉ Hustle ‚Äî 1-2 days</div>
                                <div class="filter-option" data-filter="deep-work" onclick="setEffortFilter('deep-work')">üß† Deep Work ‚Äî 3-5 days</div>
                                <div class="filter-option" data-filter="marathon" onclick="setEffortFilter('marathon')">üèîÔ∏è Marathon ‚Äî 5+ days</div>
                            </div>
                        </div>

                        <!-- Agent Filter -->
                        <div class="agent-filter">
                            <button class="filter-btn agent-filter-btn" onclick="openAgentModal()">
                                <span id="agentFilterLabel">üë• All Agents</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="kanban" id="kanban"></div>
            </section>
        </div>

        <!-- List View -->
        <div class="view" id="listView">
            <section class="list-section">
                <div class="list-header">
                    <h1 class="list-title">All Tickets</h1>
                    <p class="list-subtitle">Complete ticket overview with all details</p>
                </div>

                <!-- Desktop Table -->
                <div class="table-wrapper">
                    <table class="ticket-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Title</th>
                                <th>Agent</th>
                                <th>State</th>
                                <th>Sprint</th>
                                <th>Priority</th>
                                <th>Progress</th>
                            </tr>
                        </thead>
                        <tbody id="ticketTableBody"></tbody>
                    </table>
                </div>

                <!-- Mobile Cards -->
                <div class="mobile-cards" id="mobileCards"></div>
            </section>
        </div>

        <!-- Agent Roster View -->
        <div class="view" id="rosterView">
            <section class="roster-section">
                <div class="roster-header">
                    <h1 class="roster-title">Agent Roster</h1>
                    <p class="roster-subtitle">Performance metrics and workload distribution</p>
                </div>
                <div class="roster-hero" id="rosterHero"></div>
                <div class="roster-grid" id="rosterGrid"></div>
            </section>
        </div>

        <!-- Epic View (TKT-129: The Strategy Map) -->
        <div class="view" id="epicView">
            <section class="epic-section">
                <div class="epic-header">
                    <h1 class="epic-title">üèõÔ∏è The Strategy Map</h1>
                    <p class="epic-subtitle">Your playbook for victory ‚Äî every play, every player, every path to the finish line</p>
                </div>
                <div class="epic-controls">
                    <div class="epic-search">
                        <input type="text" class="epic-search-input" id="epicSearchInput" placeholder="Search EPICs, tickets, owners..." oninput="handleEpicSearch(this.value)">
                    </div>
                    <div class="epic-filters">
                        <button class="epic-filter-btn active" onclick="filterEpics('all')">All</button>
                        <button class="epic-filter-btn" onclick="filterEpics('delivery')">Delivery</button>
                        <button class="epic-filter-btn" onclick="filterEpics('research')">Research</button>
                        <button class="epic-filter-btn" onclick="filterEpics('spike')">Spike</button>
                    </div>
                </div>
                <div class="epic-summary" id="epicSummary"></div>
                <div class="epic-tree" id="epicTree"></div>
            </section>
        </div>

        <!-- Tech Health View (Jose Mourinho's Dashboard) -->
        <div class="view" id="techHealthView">
            <section class="tech-health-section">
                <div class="tech-header">
                    <div class="tech-title-row">
                        <span id="scoutingReportAvatar" class="scouting-avatar"></span>
                        <h1 class="tech-title">The Scouting Report</h1>
                    </div>
                    <p class="tech-subtitle">‚öΩ System Health, Quality Gates & AI Compliance Metrics</p>

                    <!-- Purpose Statement -->
                    <div class="tech-purpose">
                        <div class="purpose-divider">‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî</div>
                        <p class="purpose-text">
                            <strong>üéØ Purpose:</strong> Monitor codebase health, track quality improvements, ensure compliance with AI safety standards, and maintain transparency in our engineering practices.
                        </p>
                        <div class="purpose-divider">‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî</div>
                    </div>

                    <div class="tech-last-updated">
                        Last updated: <span id="healthLastUpdated">Loading...</span>
                        <button class="refresh-health-btn" onclick="refreshHealthData()">üîÑ Refresh</button>
                    </div>
                </div>

                <!-- System Health Score -->
                <div class="health-score-card">
                    <div class="score-main">
                        <div class="score-circle" id="healthScoreCircle">
                            <svg viewBox="0 0 120 120">
                                <circle class="score-bg" cx="60" cy="60" r="54"/>
                                <circle class="score-progress" cx="60" cy="60" r="54" id="scoreProgress"/>
                            </svg>
                            <div class="score-value" id="healthScoreValue">--</div>
                        </div>
                        <div class="score-info">
                            <h2>System Health Score</h2>
                            <div class="score-status" id="healthStatus">Loading...</div>
                            <div class="score-target">Target: 85/100 | Baseline: 67.4</div>
                            <div class="score-explainer">
                                <span class="explainer-item">üìç <strong>Baseline (67.4)</strong> ‚Äî Our starting point</span>
                                <span class="explainer-divider">‚Äî</span>
                                <span class="explainer-item">üéØ <strong>Target (85)</strong> ‚Äî Where we want to be</span>
                            </div>
                        </div>
                    </div>

                    <!-- Health Score Improvement Tickets (Dynamic) -->
                    <div class="score-tickets">
                        <div class="score-tickets-header">
                            <span class="score-tickets-title">üìà Tickets Improving Health Score</span>
                            <span class="score-tickets-epic">EPIC-014: Foundation Fortification | EPIC-015: Operational Maturity</span>
                        </div>
                        <div class="score-tickets-list" id="healthTicketsList">
                            <!-- Dynamically populated - excludes DONE tickets -->
                        </div>
                    </div>

                    <div class="score-categories" id="healthCategories">
                        <!-- Dynamically populated -->
                    </div>
                </div>

                <!-- Tech Stack Grid -->
                <div class="tech-grid">
                    <!-- Tech Stack -->
                    <div class="tech-card">
                        <h3 class="tech-card-title">üõ†Ô∏è Tech Stack</h3>
                        <div class="stack-list">
                            <div class="stack-item">
                                <span class="stack-icon">üêç</span>
                                <span class="stack-name">Python 3.12</span>
                                <span class="stack-desc">Core runtime</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">ü¶Ü</span>
                                <span class="stack-name">DuckDB</span>
                                <span class="stack-desc">Analytics database</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üêº</span>
                                <span class="stack-name">Pandas + NumPy</span>
                                <span class="stack-desc">Data processing</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">ü§ñ</span>
                                <span class="stack-name">scikit-learn</span>
                                <span class="stack-desc">K-means clustering</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">‚ö°</span>
                                <span class="stack-name">GitHub Actions</span>
                                <span class="stack-desc">CI/CD automation</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üìÑ</span>
                                <span class="stack-name">GitHub Pages</span>
                                <span class="stack-desc">Dashboard hosting</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI Stack -->
                    <div class="tech-card">
                        <h3 class="tech-card-title">ü§ñ AI Agent Stack</h3>
                        <div class="stack-list">
                            <div class="stack-item">
                                <span class="stack-icon">üß†</span>
                                <span class="stack-name">Claude Opus 4.6</span>
                                <span class="stack-desc">Primary LLM</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üë•</span>
                                <span class="stack-name">14 Specialized Agents</span>
                                <span class="stack-desc">Role-based architecture</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üîÑ</span>
                                <span class="stack-name">8-Step Task Loop</span>
                                <span class="stack-desc">Quality governance</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üõ°Ô∏è</span>
                                <span class="stack-name">5 Veto Rights</span>
                                <span class="stack-desc">Florentino, Kant√©, Flower, KDB, Mourinho</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üìã</span>
                                <span class="stack-name">Mission Control</span>
                                <span class="stack-desc">Task tracking</span>
                            </div>
                            <div class="stack-item">
                                <span class="stack-icon">üìú</span>
                                <span class="stack-name">Constitution v2.2</span>
                                <span class="stack-desc">Binding governance</span>
                            </div>
                        </div>
                    </div>

                    <!-- Benchmark Compliance -->
                    <div class="tech-card">
                        <h3 class="tech-card-title">üìä Industry Benchmarks</h3>
                        <div class="circular-grid">
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle orange" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="4.52"/>
                                    </svg>
                                    <span class="progress-text">97%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">
                                        <svg viewBox="0 0 24 24" fill="none">
                                            <path d="M12 3L4 21h3.5l1.5-4h6l1.5 4H20L12 3zm0 6l2 5h-4l2-5z" fill="#CC785C"/>
                                        </svg>
                                        Anthropic AI Safety
                                    </div>
                                    <div class="circular-item-desc">Responsible AI development, safety guidelines, transparency standards</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle blue" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="15.08"/>
                                    </svg>
                                    <span class="progress-text">90%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">
                                        <svg viewBox="0 0 24 24" fill="none">
                                            <rect x="1" y="1" width="10" height="10" fill="#F25022"/>
                                            <rect x="13" y="1" width="10" height="10" fill="#7FBA00"/>
                                            <rect x="1" y="13" width="10" height="10" fill="#00A4EF"/>
                                            <rect x="13" y="13" width="10" height="10" fill="#FFB900"/>
                                        </svg>
                                        Microsoft Responsible AI
                                    </div>
                                    <div class="circular-item-desc">Fairness, reliability, privacy, inclusiveness principles</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle google" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="27.14"/>
                                    </svg>
                                    <span class="progress-text">82%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                                        </svg>
                                        Google ML Best Practices
                                    </div>
                                    <div class="circular-item-desc">ML lifecycle management, model cards, testing practices</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Automation Coverage -->
                    <div class="tech-card">
                        <h3 class="tech-card-title">üîÑ Automation Coverage</h3>
                        <div class="circular-grid" id="automationGrid">
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="7.54"/>
                                    </svg>
                                    <span class="progress-text">95%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">Pre-commit Hooks</div>
                                    <div class="circular-item-desc">Ruff linting & formatting, trailing whitespace, file checks</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="7.54"/>
                                    </svg>
                                    <span class="progress-text">95%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">GitHub Actions CI/CD</div>
                                    <div class="circular-item-desc">Linting, type checking, pytest with coverage, artifact uploads</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="15.08"/>
                                    </svg>
                                    <span class="progress-text">90%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">Output Generation Pipeline</div>
                                    <div class="circular-item-desc">Stat packs, depth charts, predicted XIs auto-generation</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="15.08"/>
                                    </svg>
                                    <span class="progress-text">90%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">Dashboard Deployment</div>
                                    <div class="circular-item-desc">GitHub Pages auto-deploy on push to main branch</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="15.08"/>
                                    </svg>
                                    <span class="progress-text">90%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">Data Ingestion Pipeline</div>
                                    <div class="circular-item-desc">Incremental ingestion, transaction boundaries, backup/recovery</div>
                                </div>
                            </div>
                            <div class="circular-item">
                                <div class="circular-progress">
                                    <svg viewBox="0 0 56 56">
                                        <circle class="bg-circle" cx="28" cy="28" r="24"/>
                                        <circle class="progress-circle green" cx="28" cy="28" r="24" stroke-dasharray="150.8" stroke-dashoffset="22.62"/>
                                    </svg>
                                    <span class="progress-text">85%</span>
                                </div>
                                <div class="circular-item-info">
                                    <div class="circular-item-name">Automated Testing</div>
                                    <div class="circular-item-desc">Unit + integration + edge case tests (251 tests), 70% coverage floor enforced in CI</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CI/CD Workflows -->
                <div class="workflows-card">
                    <h3 class="tech-card-title">‚ö° Active Workflows</h3>
                    <div class="workflow-list" id="workflowList">
                        <!-- Dynamically populated with avatars -->
                    </div>
                </div>

                <!-- Known Gaps (from Jose Mourinho audit) -->
                <div class="gaps-card">
                    <h3 class="tech-card-title">üî¥ Known Gaps (System Audit)</h3>
                    <div class="gaps-list">
                        <div class="gap-item done">
                            <span class="gap-priority">‚úÖ</span>
                            <span class="gap-name">Test Coverage %</span>
                            <span class="gap-status">DONE - pytest-cov in CI</span>
                        </div>
                        <div class="gap-item done">
                            <span class="gap-priority">‚úÖ</span>
                            <span class="gap-name">Type Checking (mypy)</span>
                            <span class="gap-status">DONE - CI added</span>
                        </div>
                        <div class="gap-item done">
                            <span class="gap-priority">‚úÖ</span>
                            <span class="gap-name">Model Explainability (SHAP)</span>
                            <span class="gap-status">DONE - shap_explainer.py</span>
                        </div>
                        <div class="gap-item done">
                            <span class="gap-priority">‚úÖ</span>
                            <span class="gap-name">Production Dashboard</span>
                            <span class="gap-status">DONE - Token Accounting added</span>
                        </div>
                        <div class="gap-item done">
                            <span class="gap-priority">‚úÖ</span>
                            <span class="gap-name">Token Accounting</span>
                            <span class="gap-status">DONE - Usage metrics, pace analysis</span>
                        </div>
                    </div>
                </div>

                <!-- Resources & Documentation -->
                <div class="resources-card">
                    <h3 class="tech-card-title">üìö Resources & Documentation</h3>
                    <div class="resources-grid" id="resourcesGrid">
                        <!-- Governance -->
                        <div class="resource-category">
                            <h4 class="resource-category-title">üèõÔ∏è Governance</h4>
                            <div class="resource-links">
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/config/CONSTITUTION.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üìú</span>
                                    <span class="resource-name">Constitution v2.2</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/CLAUDE.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">ü§ñ</span>
                                    <span class="resource-name">CLAUDE.md</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/AGENT_PLAYBOOK.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üë•</span>
                                    <span class="resource-name">Agent Playbook</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>

                        <!-- Product -->
                        <div class="resource-category">
                            <h4 class="resource-category-title">üìã Product</h4>
                            <div class="resource-links">
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/PRD_CRICKET_PLAYBOOK.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üìù</span>
                                    <span class="resource-name">PRD v2.0</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/SPRINT_4_PLAN.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üèÉ</span>
                                    <span class="resource-name">Sprint 4 Plan</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/PRODUCT_POSITIONING.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üéØ</span>
                                    <span class="resource-name">Product Positioning</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>

                        <!-- Technical -->
                        <div class="resource-category">
                            <h4 class="resource-category-title">‚öôÔ∏è Technical</h4>
                            <div class="resource-links">
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/DATA_DICTIONARY.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üìä</span>
                                    <span class="resource-name">Data Dictionary</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/INDEX.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üóÇÔ∏è</span>
                                    <span class="resource-name">Repo Index</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/config/thresholds.yaml" target="_blank" class="resource-link">
                                    <span class="resource-icon">‚ö°</span>
                                    <span class="resource-name">Thresholds Config</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>

                        <!-- Agent Files -->
                        <div class="resource-category">
                            <h4 class="resource-category-title">üé≠ Agent Files</h4>
                            <div class="resource-links">
                                <a href="https://github.com/dwijesh-r/cricket-playbook/tree/main/config/agents" target="_blank" class="resource-link">
                                    <span class="resource-icon">üìÅ</span>
                                    <span class="resource-name">All Agent Configs</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/governance/templates/TASK_PRD_TEMPLATE.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">üìã</span>
                                    <span class="resource-name">Task PRD Template</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                                <a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/governance/templates/DOMAIN_SANITY_CHECKLIST.md" target="_blank" class="resource-link">
                                    <span class="resource-icon">‚úÖ</span>
                                    <span class="resource-name">Domain Sanity Checklist</span>
                                    <span class="resource-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Token Accounting / Production Dashboard -->
                <div class="token-dashboard">
                    <div class="token-header">
                        <h3 class="token-title">üí∞ Token Accounting & Usage</h3>
                        <span class="token-plan-badge">
                            <span>‚≠ê</span>
                            <span id="tokenPlan">Claude Max Plan</span>
                        </span>
                    </div>

                    <div class="token-grid">
                        <div class="token-metric good" id="tokensUsed">
                            <div class="token-metric-icon">üìä</div>
                            <div class="token-metric-value" id="tokensUsedValue">--</div>
                            <div class="token-metric-label">Tokens Used</div>
                        </div>
                        <div class="token-metric" id="tokensRemaining">
                            <div class="token-metric-icon">üéØ</div>
                            <div class="token-metric-value" id="tokensRemainingValue">--</div>
                            <div class="token-metric-label">Sessions</div>
                        </div>
                        <div class="token-metric good" id="avgDaily">
                            <div class="token-metric-icon">üìà</div>
                            <div class="token-metric-value" id="avgDailyValue">--</div>
                            <div class="token-metric-label">Avg Daily</div>
                        </div>
                        <div class="token-metric good" id="daysLeft">
                            <div class="token-metric-icon">‚è≥</div>
                            <div class="token-metric-value" id="daysLeftValue">--</div>
                            <div class="token-metric-label">Days Left</div>
                        </div>
                    </div>

                    <div class="token-progress-section">
                        <div class="token-progress-header">
                            <span class="token-progress-title">Monthly Token Budget</span>
                            <span class="token-progress-value" id="tokenProgressText">Loading...</span>
                        </div>
                        <div class="token-progress-bar">
                            <div class="token-progress-fill" id="tokenProgressFill" style="width: 0%"></div>
                        </div>
                        <div style="font-size: 9px; color: var(--text-tertiary); margin-top: 4px; text-align: right;" id="tokenSyncTime"></div>
                    </div>

                    <!-- Session Activity Timeline -->
                    <div class="token-insight-card" style="margin-top: 12px;">
                        <div class="token-insight-header">
                            <span class="token-insight-icon">üìä</span>
                            <span class="token-insight-title">Session Activity Timeline</span>
                            <div style="display: flex; gap: 4px; margin-left: auto;">
                                <button onclick="setUsageMetric('messages')" class="usage-tab active" id="tab-messages" style="padding: 2px 8px; font-size: 10px; border-radius: 4px; border: 1px solid var(--border); background: var(--accent-blue); color: white; cursor: pointer;">Messages</button>
                                <button onclick="setUsageMetric('tokens')" class="usage-tab" id="tab-tokens" style="padding: 2px 8px; font-size: 10px; border-radius: 4px; border: 1px solid var(--border); background: transparent; color: var(--text-secondary); cursor: pointer;">Tokens</button>
                                <button onclick="setUsageMetric('tools')" class="usage-tab" id="tab-tools" style="padding: 2px 8px; font-size: 10px; border-radius: 4px; border: 1px solid var(--border); background: transparent; color: var(--text-secondary); cursor: pointer;">Tools</button>
                            </div>
                        </div>
                        <div class="token-insight-content">
                            <div id="activityTimeline" style="padding: 4px 0;"></div>
                            <div id="activitySummary" style="display: flex; justify-content: space-between; padding-top: 8px; border-top: 1px dashed var(--border); font-size: 10px; color: var(--text-tertiary); margin-top: 8px;"></div>
                        </div>
                    </div>

                    <!-- The Commentary Box - Fun Usage Description -->
                    <div class="token-insight-card" style="margin-top: 12px; border: 1px solid rgba(255, 214, 10, 0.3); background: linear-gradient(135deg, rgba(255, 214, 10, 0.05) 0%, rgba(255, 159, 10, 0.05) 100%);">
                        <div class="token-insight-header">
                            <span class="token-insight-icon">üéôÔ∏è</span>
                            <span class="token-insight-title">The Commentary Box</span>
                            <span style="font-size: 10px; color: var(--text-tertiary); margin-left: auto;">Today's Innings Report</span>
                        </div>
                        <div class="token-insight-content" id="commentaryBox" style="font-style: italic; line-height: 1.6;">
                            Loading today's commentary...
                        </div>
                    </div>

                    <div class="token-insights">
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">üìâ</span>
                                <span class="token-insight-title">Usage Pace Analysis</span>
                            </div>
                            <div class="token-insight-content" id="usagePaceContent">
                                Loading pace analysis...
                            </div>
                        </div>
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">üß†</span>
                                <span class="token-insight-title">Model Usage Breakdown</span>
                            </div>
                            <div class="token-insight-content" id="modelBreakdownContent">
                                Loading model breakdown...
                            </div>
                        </div>
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">‚ÜîÔ∏è</span>
                                <span class="token-insight-title">Input vs Output Breakdown</span>
                            </div>
                            <div class="token-insight-content" id="inputOutputContent">
                                Loading input/output breakdown...
                            </div>
                        </div>
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">‚è±Ô∏è</span>
                                <span class="token-insight-title">5-Hour Rolling Window</span>
                                <span style="font-size: 9px; color: var(--text-tertiary); margin-left: auto;">How It Works</span>
                            </div>
                            <div class="token-insight-content">
                                <div style="margin-bottom: 10px; font-size: 11px; color: var(--text-tertiary);">Claude Max enforces a 5-hour rolling usage limit. Tokens from older requests expire gradually, freeing capacity.</div>
                                <!-- Rolling Window Diagram -->
                                <div style="display: flex; gap: 3px; margin-bottom: 10px;">
                                    <div style="flex: 1; text-align: center;">
                                        <div style="height: 22px; background: linear-gradient(90deg, #ff453a, #ff6961); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 600; color: white;">0-1h</div>
                                        <div style="font-size: 8px; color: var(--text-tertiary); margin-top: 2px;">Counts fully</div>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div style="height: 22px; background: linear-gradient(90deg, #ff9f0a, #ff9500); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 600;">1-2h</div>
                                        <div style="font-size: 8px; color: var(--text-tertiary); margin-top: 2px;">Counts fully</div>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div style="height: 22px; background: linear-gradient(90deg, #ff9f0a, #ffb340); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 600;">2-3h</div>
                                        <div style="font-size: 8px; color: var(--text-tertiary); margin-top: 2px;">Counts fully</div>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div style="height: 22px; background: linear-gradient(90deg, #30d158, #34c759); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 600;">3-4h</div>
                                        <div style="font-size: 8px; color: var(--text-tertiary); margin-top: 2px;">Decaying</div>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div style="height: 22px; background: var(--bg-elevated); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; color: var(--text-tertiary);">4-5h</div>
                                        <div style="font-size: 8px; color: var(--text-tertiary); margin-top: 2px;">Expiring</div>
                                    </div>
                                </div>
                                <div style="font-size: 11px; color: var(--text-secondary); line-height: 1.5;">
                                    <strong>Strategy:</strong> Space out heavy sessions. If you hit a rate limit, wait ~1 hour for oldest tokens to expire and capacity to free up.
                                </div>
                            </div>
                        </div>
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">üí°</span>
                                <span class="token-insight-title">Optimization Tips</span>
                            </div>
                            <div class="token-insight-content">
                                <div class="token-tips">
                                    <div class="token-tip">Use Haiku for simple code searches and file reads</div>
                                    <div class="token-tip">Batch related questions into single prompts</div>
                                    <div class="token-tip">Use /compact mode for routine tasks</div>
                                    <div class="token-tip">Leverage agent specialization to reduce context</div>
                                </div>
                            </div>
                        </div>
                        <div class="token-insight-card">
                            <div class="token-insight-header">
                                <span class="token-insight-icon">üìÖ</span>
                                <span class="token-insight-title">Billing Cycle</span>
                            </div>
                            <div class="token-insight-content" id="billingCycleContent">
                                Loading billing info...
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav">
        <div class="mobile-nav-tabs">
            <button class="mobile-nav-tab active" onclick="showView('board')">
                <span class="mobile-nav-icon">üìã</span>
                Board
            </button>
            <button class="mobile-nav-tab" onclick="showView('list')">
                <span class="mobile-nav-icon">üìä</span>
                List
            </button>
            <button class="mobile-nav-tab" onclick="showView('epic')">
                <span class="mobile-nav-icon">üèõÔ∏è</span>
                Epic
            </button>
            <button class="mobile-nav-tab" onclick="showView('roster')">
                <span class="mobile-nav-icon">üë•</span>
                Roster
            </button>
            <button class="mobile-nav-tab" onclick="showView('techHealth')">
                <span class="mobile-nav-icon">‚öôÔ∏è</span>
                Tech
            </button>
            <a href="../../the_lab/dashboard/index.html" class="mobile-nav-tab">
                <span class="mobile-nav-icon">üî¨</span>
                Lab
            </a>
            <a href="about.html" class="mobile-nav-tab">
                <span class="mobile-nav-icon">‚ÑπÔ∏è</span>
                About
            </a>
        </div>
    </nav>

    <!-- Agent Selection Modal -->
    <div class="agent-modal-overlay" id="agentModal" onclick="closeAgentModalOnBackdrop(event)">
        <div class="agent-modal" onclick="event.stopPropagation()">
            <div class="agent-modal-header">
                <span class="agent-modal-title">üë• Select Agents</span>
                <button class="agent-modal-close" onclick="closeAgentModal()">‚úï</button>
            </div>
            <div class="agent-modal-body">
                <div class="agent-grid" id="agentGrid"></div>
            </div>
            <div class="agent-modal-footer">
                <button class="agent-modal-btn secondary" onclick="clearAgentSelection()">Clear All</button>
                <button class="agent-modal-btn primary" onclick="applyAgentFilter()">Apply Filter</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-avatar" id="modalAvatar"></div>
                    <div>
                        <div class="modal-title" id="modalTitle">Ticket Title</div>
                        <div class="modal-subtitle" id="modalSubtitle">TKT-000 ¬∑ P0</div>
                    </div>
                </div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <div class="modal-section-title">Context</div>
                    <div class="context-grid" id="modalContext"></div>
                </div>
                <div class="modal-section">
                    <div class="modal-section-title">Task Integrity Loop</div>
                    <div class="gate-list" id="modalGates"></div>
                </div>
                <div class="modal-section">
                    <div class="modal-section-title">Details</div>
                    <div class="detail-grid" id="modalDetails"></div>
                </div>
                <div class="modal-section">
                    <div class="modal-section-title">Links</div>
                    <div class="link-list" id="modalLinks"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="data/token_usage.js"></script>
    <script>
        // ==================== 8-BIT PIXEL ART AVATAR SYSTEM ====================
        // Retro pixelated style - prominent features, clean at small sizes
        // Each avatar uses a 16x16 pixel grid (4px per pixel on 64x64 canvas)
        const p = 4; // pixel size

        // Helper to create pixel rectangles
        const px = (x, y, c, w=1, h=1) => `<rect x="${x*p}" y="${y*p}" width="${w*p}" height="${h*p}" fill="${c}"/>`;

        const AgentAvatars = {
            'Tom Brady': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Patriots Navy -->
                <rect width="64" height="64" rx="8" fill="#002244"/>
                <!-- Hair - brown, short -->
                <rect x="16" y="8" width="32" height="8" fill="#5A4030"/>
                <rect x="12" y="12" width="8" height="8" fill="#5A4030"/>
                <rect x="44" y="12" width="8" height="8" fill="#5A4030"/>
                <!-- Face - strong jaw -->
                <rect x="16" y="16" width="32" height="24" fill="#F2D4B8"/>
                <rect x="12" y="20" width="4" height="12" fill="#F2D4B8"/>
                <rect x="48" y="20" width="4" height="12" fill="#F2D4B8"/>
                <rect x="20" y="40" width="24" height="4" fill="#F2D4B8"/>
                <!-- Eyes - blue, intense -->
                <rect x="20" y="24" width="8" height="4" fill="white"/>
                <rect x="36" y="24" width="8" height="4" fill="white"/>
                <rect x="24" y="24" width="4" height="4" fill="#4A6080"/>
                <rect x="40" y="24" width="4" height="4" fill="#4A6080"/>
                <!-- Eyebrows -->
                <rect x="20" y="20" width="8" height="4" fill="#4A3520"/>
                <rect x="36" y="20" width="8" height="4" fill="#4A3520"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="8" fill="#E5C4A8"/>
                <!-- Mouth - smile -->
                <rect x="24" y="36" width="16" height="4" fill="#C08070"/>
                <!-- Jersey - Patriots -->
                <rect x="8" y="44" width="48" height="20" fill="#002244"/>
                <rect x="16" y="44" width="8" height="4" fill="#C60C30"/>
                <rect x="40" y="44" width="8" height="4" fill="#C60C30"/>
                <!-- Number 12 -->
                <rect x="24" y="52" width="4" height="8" fill="white"/>
                <rect x="32" y="52" width="4" height="8" fill="white"/>
                <rect x="36" y="52" width="4" height="4" fill="white"/>
                <rect x="32" y="56" width="8" height="4" fill="white"/>
            </svg>`,

            'Stephen Curry': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Warriors Blue -->
                <rect width="64" height="64" rx="8" fill="#1D428A"/>
                <!-- Hair - black, curly texture -->
                <rect x="16" y="4" width="32" height="4" fill="#1A1A1A"/>
                <rect x="12" y="8" width="40" height="4" fill="#1A1A1A"/>
                <rect x="12" y="12" width="8" height="4" fill="#1A1A1A"/>
                <rect x="24" y="8" width="4" height="4" fill="#1D428A"/>
                <rect x="36" y="8" width="4" height="4" fill="#1D428A"/>
                <rect x="44" y="12" width="8" height="4" fill="#1A1A1A"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#B08860"/>
                <rect x="12" y="20" width="4" height="12" fill="#B08860"/>
                <rect x="48" y="20" width="4" height="12" fill="#B08860"/>
                <!-- Eyes -->
                <rect x="20" y="24" width="8" height="4" fill="white"/>
                <rect x="36" y="24" width="8" height="4" fill="white"/>
                <rect x="24" y="24" width="4" height="4" fill="#3D2314"/>
                <rect x="40" y="24" width="4" height="4" fill="#3D2314"/>
                <!-- Beard - full -->
                <rect x="16" y="32" width="32" height="8" fill="#1A1A1A"/>
                <rect x="20" y="36" width="24" height="4" fill="#1A1A1A"/>
                <!-- Smile in beard -->
                <rect x="24" y="32" width="16" height="4" fill="#B08860"/>
                <rect x="28" y="34" width="8" height="2" fill="white"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="4" fill="#9A7048"/>
                <!-- Jersey - Warriors -->
                <rect x="8" y="44" width="48" height="20" fill="#1D428A"/>
                <rect x="12" y="44" width="4" height="20" fill="#FFC72C"/>
                <rect x="48" y="44" width="4" height="20" fill="#FFC72C"/>
                <!-- Number 30 -->
                <rect x="20" y="52" width="8" height="4" fill="#FFC72C"/>
                <rect x="20" y="52" width="4" height="8" fill="#FFC72C"/>
                <rect x="24" y="56" width="4" height="4" fill="#FFC72C"/>
                <rect x="36" y="52" width="8" height="8" fill="#FFC72C"/>
                <rect x="40" y="56" width="4" height="4" fill="#1D428A"/>
            </svg>`,

            'Kevin de Bruyne': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Man City Sky Blue -->
                <rect width="64" height="64" rx="8" fill="#6CABDD"/>
                <!-- Hair - ginger, swept -->
                <rect x="12" y="8" width="40" height="8" fill="#D35400"/>
                <rect x="8" y="12" width="12" height="8" fill="#E67E22"/>
                <rect x="16" y="4" width="20" height="8" fill="#D35400"/>
                <rect x="44" y="12" width="8" height="8" fill="#D35400"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="24" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="12" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="12" fill="#F5D4B8"/>
                <!-- Eyes - blue -->
                <rect x="20" y="24" width="8" height="4" fill="white"/>
                <rect x="36" y="24" width="8" height="4" fill="white"/>
                <rect x="24" y="24" width="4" height="4" fill="#3498DB"/>
                <rect x="40" y="24" width="4" height="4" fill="#3498DB"/>
                <!-- Ginger eyebrows -->
                <rect x="20" y="20" width="8" height="4" fill="#D35400"/>
                <rect x="36" y="20" width="8" height="4" fill="#D35400"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="8" fill="#E8C4A0"/>
                <!-- Mouth -->
                <rect x="24" y="36" width="16" height="4" fill="#C08070"/>
                <!-- Jersey - Man City -->
                <rect x="8" y="44" width="48" height="20" fill="#6CABDD"/>
                <rect x="24" y="44" width="16" height="8" fill="#1C2C5B"/>
                <!-- Number 17 -->
                <rect x="24" y="52" width="4" height="8" fill="white"/>
                <rect x="36" y="52" width="4" height="8" fill="white"/>
                <rect x="32" y="52" width="4" height="4" fill="white"/>
            </svg>`,

            'Jose Mourinho': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Dark sophisticated -->
                <rect width="64" height="64" rx="8" fill="#2C3E50"/>
                <!-- Silver/gray hair -->
                <rect x="16" y="8" width="32" height="8" fill="#A0A0A0"/>
                <rect x="12" y="12" width="8" height="4" fill="#B0B0B0"/>
                <rect x="44" y="12" width="8" height="4" fill="#B0B0B0"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#E8C4A0"/>
                <rect x="12" y="20" width="4" height="8" fill="#E8C4A0"/>
                <rect x="48" y="20" width="4" height="8" fill="#E8C4A0"/>
                <!-- Eyes - intense, dark -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#2C3E50"/>
                <rect x="40" y="20" width="4" height="4" fill="#2C3E50"/>
                <!-- Furrowed brows - angled inward -->
                <rect x="20" y="16" width="8" height="4" fill="#606060"/>
                <rect x="36" y="16" width="8" height="4" fill="#606060"/>
                <!-- Prominent nose -->
                <rect x="28" y="24" width="8" height="8" fill="#D8B498"/>
                <!-- Stern mouth -->
                <rect x="24" y="32" width="16" height="4" fill="#906050"/>
                <!-- Suit jacket -->
                <rect x="8" y="40" width="48" height="24" fill="#1A1A1A"/>
                <!-- White shirt collar -->
                <rect x="24" y="40" width="4" height="8" fill="white"/>
                <rect x="36" y="40" width="4" height="8" fill="white"/>
                <!-- Blue tie -->
                <rect x="28" y="44" width="8" height="16" fill="#1C3A5F"/>
            </svg>`,

            'LeBron James': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Lakers Purple -->
                <rect width="64" height="64" rx="8" fill="#552583"/>
                <!-- Headband -->
                <rect x="12" y="12" width="40" height="4" fill="#FDB927"/>
                <!-- Hair - receding hairline -->
                <rect x="16" y="8" width="32" height="4" fill="#1A1A1A"/>
                <rect x="12" y="12" width="8" height="4" fill="#1A1A1A"/>
                <rect x="44" y="12" width="8" height="4" fill="#1A1A1A"/>
                <!-- Exposed forehead showing receding -->
                <rect x="20" y="12" width="8" height="4" fill="#8B6040"/>
                <rect x="36" y="12" width="8" height="4" fill="#8B6040"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#8B6040"/>
                <rect x="12" y="20" width="4" height="12" fill="#8B6040"/>
                <rect x="48" y="20" width="4" height="12" fill="#8B6040"/>
                <!-- Eyes -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#3D2314"/>
                <rect x="40" y="20" width="4" height="4" fill="#3D2314"/>
                <!-- Thick eyebrows -->
                <rect x="20" y="16" width="8" height="4" fill="#1A1A1A"/>
                <rect x="36" y="16" width="8" height="4" fill="#1A1A1A"/>
                <!-- Nose -->
                <rect x="28" y="24" width="8" height="4" fill="#7A5030"/>
                <!-- Beard/Goatee -->
                <rect x="20" y="32" width="24" height="8" fill="#1A1A1A"/>
                <rect x="24" y="28" width="16" height="4" fill="#1A1A1A"/>
                <!-- Jersey - Lakers -->
                <rect x="8" y="44" width="48" height="20" fill="#552583"/>
                <rect x="12" y="44" width="4" height="20" fill="#FDB927"/>
                <rect x="48" y="44" width="4" height="20" fill="#FDB927"/>
                <!-- Number 23 -->
                <rect x="20" y="52" width="8" height="4" fill="#FDB927"/>
                <rect x="20" y="56" width="4" height="4" fill="#FDB927"/>
                <rect x="24" y="56" width="4" height="4" fill="#FDB927"/>
                <rect x="36" y="52" width="8" height="4" fill="#FDB927"/>
                <rect x="36" y="56" width="4" height="4" fill="#FDB927"/>
                <rect x="40" y="56" width="4" height="4" fill="#FDB927"/>
            </svg>`,

            'Brad Stevens': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Celtics Green -->
                <rect width="64" height="64" rx="8" fill="#007A33"/>
                <!-- Brown hair - neat -->
                <rect x="16" y="8" width="32" height="8" fill="#5C4033"/>
                <rect x="12" y="12" width="8" height="4" fill="#5C4033"/>
                <rect x="44" y="12" width="8" height="4" fill="#5C4033"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="12" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="12" fill="#F5D4B8"/>
                <!-- Glasses frames -->
                <rect x="16" y="20" width="12" height="8" fill="none" stroke="#333" stroke-width="2"/>
                <rect x="36" y="20" width="12" height="8" fill="none" stroke="#333" stroke-width="2"/>
                <rect x="28" y="22" width="8" height="2" fill="#333"/>
                <!-- Eyes behind glasses -->
                <rect x="20" y="22" width="4" height="4" fill="white"/>
                <rect x="40" y="22" width="4" height="4" fill="white"/>
                <rect x="20" y="22" width="4" height="4" fill="#4A6741"/>
                <rect x="40" y="22" width="4" height="4" fill="#4A6741"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="4" fill="#E8C4A0"/>
                <!-- Smile -->
                <rect x="24" y="32" width="16" height="4" fill="#A07060"/>
                <!-- Suit -->
                <rect x="8" y="40" width="48" height="24" fill="#1A1A1A"/>
                <!-- White shirt -->
                <rect x="24" y="40" width="4" height="8" fill="white"/>
                <rect x="36" y="40" width="4" height="8" fill="white"/>
                <!-- Green tie -->
                <rect x="28" y="44" width="8" height="16" fill="#007A33"/>
            </svg>`,

            'Brock Purdy': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: 49ers Red -->
                <rect width="64" height="64" rx="8" fill="#AA0000"/>
                <!-- Dark brown hair -->
                <rect x="16" y="8" width="32" height="8" fill="#3D2B1F"/>
                <rect x="12" y="12" width="8" height="4" fill="#3D2B1F"/>
                <rect x="44" y="12" width="8" height="4" fill="#3D2B1F"/>
                <!-- Face - young -->
                <rect x="16" y="16" width="32" height="24" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="12" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="12" fill="#F5D4B8"/>
                <!-- Eyes - green -->
                <rect x="20" y="24" width="8" height="4" fill="white"/>
                <rect x="36" y="24" width="8" height="4" fill="white"/>
                <rect x="24" y="24" width="4" height="4" fill="#4A6741"/>
                <rect x="40" y="24" width="4" height="4" fill="#4A6741"/>
                <!-- Eyebrows -->
                <rect x="20" y="20" width="8" height="4" fill="#3D2B1F"/>
                <rect x="36" y="20" width="8" height="4" fill="#3D2B1F"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="4" fill="#E8C4A0"/>
                <!-- Smile -->
                <rect x="24" y="34" width="16" height="4" fill="#B07060"/>
                <!-- Jersey - 49ers -->
                <rect x="8" y="44" width="48" height="20" fill="#AA0000"/>
                <rect x="12" y="44" width="4" height="20" fill="#B3995D"/>
                <rect x="48" y="44" width="4" height="20" fill="#B3995D"/>
                <!-- Number 13 -->
                <rect x="24" y="52" width="4" height="8" fill="white"/>
                <rect x="36" y="52" width="8" height="4" fill="white"/>
                <rect x="36" y="56" width="4" height="4" fill="white"/>
                <rect x="40" y="56" width="4" height="4" fill="white"/>
            </svg>`,

            'Andy Flower': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Zimbabwe Green -->
                <rect width="64" height="64" rx="8" fill="#006400"/>
                <!-- Cricket cap -->
                <rect x="8" y="8" width="48" height="8" fill="#006400"/>
                <rect x="12" y="4" width="40" height="8" fill="#004000"/>
                <rect x="28" y="4" width="8" height="4" fill="#FFD700"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="24" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="12" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="12" fill="#F5D4B8"/>
                <!-- Eyes -->
                <rect x="20" y="24" width="8" height="4" fill="white"/>
                <rect x="36" y="24" width="8" height="4" fill="white"/>
                <rect x="24" y="24" width="4" height="4" fill="#4A3728"/>
                <rect x="40" y="24" width="4" height="4" fill="#4A3728"/>
                <!-- Eyebrows -->
                <rect x="20" y="20" width="8" height="4" fill="#5C4033"/>
                <rect x="36" y="20" width="8" height="4" fill="#5C4033"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="4" fill="#E8C4A0"/>
                <!-- Mouth -->
                <rect x="24" y="34" width="16" height="4" fill="#906050"/>
                <!-- Cricket whites -->
                <rect x="8" y="44" width="48" height="20" fill="#F5F5DC"/>
                <!-- Green collar -->
                <rect x="24" y="44" width="16" height="4" fill="#006400"/>
                <!-- Zimbabwe badge -->
                <rect x="28" y="52" width="8" height="8" fill="#006400"/>
                <rect x="30" y="54" width="4" height="4" fill="#FFD700"/>
            </svg>`,

            "N'Golo Kant√©": `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Chelsea Blue -->
                <rect width="64" height="64" rx="8" fill="#034694"/>
                <!-- Hair - short afro texture -->
                <rect x="16" y="8" width="32" height="4" fill="#1A1A1A"/>
                <rect x="12" y="8" width="8" height="8" fill="#1A1A1A"/>
                <rect x="44" y="8" width="8" height="8" fill="#1A1A1A"/>
                <rect x="20" y="4" width="8" height="4" fill="#1A1A1A"/>
                <rect x="36" y="4" width="8" height="4" fill="#1A1A1A"/>
                <!-- Face - round, friendly -->
                <rect x="16" y="16" width="32" height="24" fill="#8B5A2B"/>
                <rect x="12" y="20" width="4" height="12" fill="#8B5A2B"/>
                <rect x="48" y="20" width="4" height="12" fill="#8B5A2B"/>
                <!-- Big bright eyes -->
                <rect x="18" y="22" width="10" height="6" fill="white"/>
                <rect x="36" y="22" width="10" height="6" fill="white"/>
                <rect x="22" y="24" width="4" height="4" fill="#3D2314"/>
                <rect x="40" y="24" width="4" height="4" fill="#3D2314"/>
                <!-- Eyebrows - friendly -->
                <rect x="20" y="18" width="8" height="4" fill="#1A1A1A"/>
                <rect x="36" y="18" width="8" height="4" fill="#1A1A1A"/>
                <!-- Nose -->
                <rect x="28" y="28" width="8" height="4" fill="#7A4B1E"/>
                <!-- BIG SMILE - signature -->
                <rect x="20" y="34" width="24" height="6" fill="#1A1A1A"/>
                <rect x="22" y="34" width="20" height="4" fill="white"/>
                <!-- Jersey - Chelsea -->
                <rect x="8" y="44" width="48" height="20" fill="#034694"/>
                <!-- Number 7 -->
                <rect x="28" y="52" width="8" height="4" fill="white"/>
                <rect x="32" y="52" width="4" height="8" fill="white"/>
            </svg>`,

            'Florentino Perez': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Real Madrid Gold -->
                <rect width="64" height="64" rx="8" fill="#FEBE10"/>
                <!-- Gray/white hair -->
                <rect x="16" y="8" width="32" height="8" fill="#C0C0C0"/>
                <rect x="12" y="12" width="8" height="4" fill="#D0D0D0"/>
                <rect x="44" y="12" width="8" height="4" fill="#D0D0D0"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="8" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="8" fill="#F5D4B8"/>
                <!-- Eyes -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#2C3E50"/>
                <rect x="40" y="20" width="4" height="4" fill="#2C3E50"/>
                <!-- Eyebrows -->
                <rect x="20" y="16" width="8" height="4" fill="#808080"/>
                <rect x="36" y="16" width="8" height="4" fill="#808080"/>
                <!-- Nose -->
                <rect x="28" y="24" width="8" height="4" fill="#E8C4A0"/>
                <!-- Mouth -->
                <rect x="24" y="30" width="16" height="4" fill="#906050"/>
                <!-- Suit -->
                <rect x="8" y="40" width="48" height="24" fill="#1A1A1A"/>
                <!-- White shirt -->
                <rect x="24" y="40" width="4" height="8" fill="white"/>
                <rect x="36" y="40" width="4" height="8" fill="white"/>
                <!-- Blue tie -->
                <rect x="28" y="44" width="8" height="16" fill="#034694"/>
                <!-- RM badge -->
                <rect x="4" y="4" width="12" height="8" fill="#034694"/>
                <text x="6" y="10" font-size="6" fill="white" font-weight="bold">RM</text>
            </svg>`,

            'Florentino P√©rez': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Real Madrid Gold -->
                <rect width="64" height="64" rx="8" fill="#FEBE10"/>
                <!-- Gray/white hair -->
                <rect x="16" y="8" width="32" height="8" fill="#C0C0C0"/>
                <rect x="12" y="12" width="8" height="4" fill="#D0D0D0"/>
                <rect x="44" y="12" width="8" height="4" fill="#D0D0D0"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#F5D4B8"/>
                <rect x="12" y="20" width="4" height="8" fill="#F5D4B8"/>
                <rect x="48" y="20" width="4" height="8" fill="#F5D4B8"/>
                <!-- Eyes -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#2C3E50"/>
                <rect x="40" y="20" width="4" height="4" fill="#2C3E50"/>
                <!-- Eyebrows -->
                <rect x="20" y="16" width="8" height="4" fill="#808080"/>
                <rect x="36" y="16" width="8" height="4" fill="#808080"/>
                <!-- Nose -->
                <rect x="28" y="24" width="8" height="4" fill="#E8C4A0"/>
                <!-- Mouth -->
                <rect x="24" y="30" width="16" height="4" fill="#906050"/>
                <!-- Suit -->
                <rect x="8" y="40" width="48" height="24" fill="#1A1A1A"/>
                <!-- White shirt -->
                <rect x="24" y="40" width="4" height="8" fill="white"/>
                <rect x="36" y="40" width="4" height="8" fill="white"/>
                <!-- Blue tie -->
                <rect x="28" y="44" width="8" height="16" fill="#034694"/>
                <!-- RM badge -->
                <rect x="4" y="4" width="12" height="8" fill="#034694"/>
                <text x="6" y="10" font-size="6" fill="white" font-weight="bold">RM</text>
            </svg>`,

            'Pep Guardiola': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Man City Blue -->
                <rect width="64" height="64" rx="8" fill="#6CABDD"/>
                <!-- Bald head - no hair, shiny -->
                <rect x="16" y="8" width="32" height="12" fill="#E0B890"/>
                <rect x="12" y="12" width="8" height="8" fill="#E0B890"/>
                <rect x="44" y="12" width="8" height="8" fill="#E0B890"/>
                <!-- Shine on head -->
                <rect x="24" y="8" width="8" height="4" fill="#F0D8B0"/>
                <!-- Face -->
                <rect x="16" y="20" width="32" height="16" fill="#E8C4A0"/>
                <rect x="12" y="20" width="4" height="12" fill="#E0B890"/>
                <rect x="48" y="20" width="4" height="12" fill="#E0B890"/>
                <!-- Intense eyes -->
                <rect x="20" y="22" width="8" height="4" fill="white"/>
                <rect x="36" y="22" width="8" height="4" fill="white"/>
                <rect x="24" y="22" width="4" height="4" fill="#2C3E50"/>
                <rect x="40" y="22" width="4" height="4" fill="#2C3E50"/>
                <!-- Furrowed brows -->
                <rect x="20" y="18" width="8" height="4" fill="#5C4033"/>
                <rect x="36" y="18" width="8" height="4" fill="#5C4033"/>
                <!-- Nose -->
                <rect x="28" y="26" width="8" height="4" fill="#D8B498"/>
                <!-- Stubble -->
                <rect x="20" y="30" width="24" height="4" fill="#5C403340"/>
                <!-- Mouth -->
                <rect x="24" y="32" width="16" height="4" fill="#906050"/>
                <!-- Turtleneck sweater -->
                <rect x="8" y="40" width="48" height="24" fill="#1A1A1A"/>
                <rect x="20" y="40" width="24" height="8" fill="#333"/>
            </svg>`,

            'Jayson Tatum': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Celtics Green -->
                <rect width="64" height="64" rx="8" fill="#007a33"/>
                <!-- Hair - flat top style -->
                <rect x="16" y="6" width="32" height="10" fill="#1A1A1A"/>
                <rect x="14" y="10" width="4" height="6" fill="#1A1A1A"/>
                <rect x="46" y="10" width="4" height="6" fill="#1A1A1A"/>
                <!-- Face - light-skinned -->
                <rect x="16" y="16" width="32" height="20" fill="#c49a6c"/>
                <rect x="12" y="20" width="4" height="12" fill="#c49a6c"/>
                <rect x="48" y="20" width="4" height="12" fill="#c49a6c"/>
                <!-- Eyes -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#3D2314"/>
                <rect x="40" y="20" width="4" height="4" fill="#3D2314"/>
                <!-- Eyebrows -->
                <rect x="20" y="16" width="8" height="3" fill="#1A1A1A"/>
                <rect x="36" y="16" width="8" height="3" fill="#1A1A1A"/>
                <!-- Nose -->
                <rect x="28" y="24" width="8" height="4" fill="#b08a5c"/>
                <!-- Goatee -->
                <rect x="24" y="32" width="16" height="4" fill="#1A1A1A"/>
                <!-- Celtics Jersey -->
                <rect x="8" y="40" width="48" height="24" fill="#007a33"/>
                <!-- Gold trim -->
                <rect x="8" y="40" width="48" height="3" fill="#ba9653"/>
                <!-- Number 0 -->
                <rect x="26" y="46" width="12" height="14" fill="#ba9653" fill-opacity="0" stroke="#FFFFFF" stroke-width="2"/>
            </svg>`,
            'Ime Udoka': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Rockets Red -->
                <rect width="64" height="64" rx="8" fill="#CE1141"/>
                <!-- Hair - short, neat -->
                <rect x="16" y="8" width="32" height="8" fill="#1A1A1A"/>
                <rect x="12" y="12" width="8" height="4" fill="#1A1A1A"/>
                <rect x="44" y="12" width="8" height="4" fill="#1A1A1A"/>
                <!-- Face -->
                <rect x="16" y="16" width="32" height="20" fill="#8B5A2B"/>
                <rect x="12" y="20" width="4" height="12" fill="#8B5A2B"/>
                <rect x="48" y="20" width="4" height="12" fill="#8B5A2B"/>
                <!-- Eyes -->
                <rect x="20" y="20" width="8" height="4" fill="white"/>
                <rect x="36" y="20" width="8" height="4" fill="white"/>
                <rect x="24" y="20" width="4" height="4" fill="#3D2314"/>
                <rect x="40" y="20" width="4" height="4" fill="#3D2314"/>
                <!-- Eyebrows -->
                <rect x="20" y="16" width="8" height="4" fill="#1A1A1A"/>
                <rect x="36" y="16" width="8" height="4" fill="#1A1A1A"/>
                <!-- Nose -->
                <rect x="28" y="24" width="8" height="4" fill="#7A4B1E"/>
                <!-- Beard -->
                <rect x="18" y="28" width="28" height="10" fill="#1A1A1A"/>
                <rect x="24" y="28" width="16" height="4" fill="#8B5A2B"/>
                <!-- Suit -->
                <rect x="8" y="42" width="48" height="22" fill="#1A1A1A"/>
                <!-- White shirt -->
                <rect x="24" y="42" width="4" height="6" fill="white"/>
                <rect x="36" y="42" width="4" height="6" fill="white"/>
                <!-- Red tie -->
                <rect x="28" y="46" width="8" height="14" fill="#CE1141"/>
            </svg>`,

            // The Founder - Godfather-style avatar
            'The Founder': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- Dark dramatic background -->
                <rect width="64" height="64" rx="8" fill="#0a0a0a"/>
                <!-- Vignette effect -->
                <defs>
                    <radialGradient id="vignette" cx="50%" cy="40%" r="60%">
                        <stop offset="0%" style="stop-color:#1a1a1a;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#000000;stop-opacity:1" />
                    </radialGradient>
                </defs>
                <rect width="64" height="64" rx="8" fill="url(#vignette)"/>
                <!-- Hair - slicked back -->
                <rect x="16" y="8" width="32" height="8" fill="#1a1a1a"/>
                <rect x="12" y="12" width="8" height="4" fill="#1a1a1a"/>
                <rect x="44" y="12" width="8" height="4" fill="#1a1a1a"/>
                <!-- Face - shadowed, serious -->
                <rect x="16" y="16" width="32" height="20" fill="#d4a574"/>
                <rect x="12" y="20" width="4" height="8" fill="#c49464"/>
                <rect x="48" y="20" width="4" height="8" fill="#c49464"/>
                <!-- Eyebrows - heavy, serious -->
                <rect x="18" y="18" width="10" height="3" fill="#1a1a1a"/>
                <rect x="36" y="18" width="10" height="3" fill="#1a1a1a"/>
                <!-- Eyes - deep set, intense -->
                <rect x="20" y="22" width="8" height="4" fill="#000000"/>
                <rect x="36" y="22" width="8" height="4" fill="#000000"/>
                <rect x="22" y="22" width="4" height="4" fill="#1c1c1c"/>
                <rect x="38" y="22" width="4" height="4" fill="#1c1c1c"/>
                <!-- Nose - strong -->
                <rect x="28" y="26" width="8" height="6" fill="#c49464"/>
                <!-- Mouth - thin, decisive -->
                <rect x="24" y="32" width="16" height="2" fill="#8b6040"/>
                <!-- Chin shadow -->
                <rect x="20" y="34" width="24" height="4" fill="#b08050"/>
                <!-- Suit - expensive black -->
                <rect x="8" y="40" width="48" height="24" fill="#0a0a0a"/>
                <!-- White collar -->
                <rect x="24" y="40" width="4" height="10" fill="#f5f5f5"/>
                <rect x="36" y="40" width="4" height="10" fill="#f5f5f5"/>
                <!-- Black tie -->
                <rect x="28" y="40" width="8" height="20" fill="#1a1a1a"/>
                <rect x="30" y="40" width="4" height="4" fill="#2a2a2a"/>
                <!-- Lapels -->
                <rect x="12" y="40" width="12" height="4" fill="#1a1a1a"/>
                <rect x="40" y="40" width="12" height="4" fill="#1a1a1a"/>
                <!-- Suit shoulders -->
                <rect x="8" y="40" width="8" height="16" fill="#0a0a0a"/>
                <rect x="48" y="40" width="8" height="16" fill="#0a0a0a"/>
                <!-- Red rose on lapel - signature -->
                <circle cx="16" cy="48" r="4" fill="#8b0000"/>
                <circle cx="15" cy="47" r="2" fill="#c41e3a"/>
                <rect x="15" y="52" width="2" height="4" fill="#2d5016"/>
                <!-- Gold ring - power symbol -->
                <rect x="44" y="56" width="6" height="4" fill="#ffd700"/>
                <rect x="45" y="57" width="4" height="2" fill="#b8860b"/>
            </svg>`,

            'Virat Kohli': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: RCB Red -->
                <rect width="64" height="64" rx="8" fill="#ec1c24"/>
                <!-- Hair - black, styled -->
                <rect x="14" y="6" width="36" height="8" fill="#1a1a1a"/>
                <rect x="12" y="10" width="8" height="8" fill="#1a1a1a"/>
                <rect x="44" y="10" width="8" height="8" fill="#1a1a1a"/>
                <!-- Face -->
                <rect x="16" y="14" width="32" height="22" fill="#C68642"/>
                <rect x="12" y="18" width="4" height="14" fill="#C68642"/>
                <rect x="48" y="18" width="4" height="14" fill="#C68642"/>
                <!-- Eyes - dark, intense -->
                <rect x="20" y="22" width="8" height="4" fill="white"/>
                <rect x="36" y="22" width="8" height="4" fill="white"/>
                <rect x="24" y="22" width="4" height="4" fill="#1a1a1a"/>
                <rect x="40" y="22" width="4" height="4" fill="#1a1a1a"/>
                <!-- Eyebrows - thick -->
                <rect x="20" y="18" width="10" height="4" fill="#1a1a1a"/>
                <rect x="34" y="18" width="10" height="4" fill="#1a1a1a"/>
                <!-- Nose -->
                <rect x="28" y="26" width="8" height="6" fill="#B5743A"/>
                <!-- Beard - signature full beard -->
                <rect x="16" y="32" width="32" height="10" fill="#1a1a1a"/>
                <rect x="20" y="36" width="24" height="6" fill="#1a1a1a"/>
                <!-- Mouth in beard area -->
                <rect x="26" y="32" width="12" height="4" fill="#C68642"/>
                <!-- Jersey - RCB -->
                <rect x="8" y="44" width="48" height="20" fill="#ec1c24"/>
                <rect x="8" y="44" width="48" height="4" fill="#000000"/>
                <!-- Number 18 -->
                <rect x="22" y="52" width="4" height="8" fill="#d4af37"/>
                <rect x="30" y="52" width="4" height="8" fill="#d4af37"/>
                <rect x="34" y="52" width="4" height="4" fill="#d4af37"/>
                <rect x="34" y="56" width="4" height="4" fill="#d4af37"/>
                <rect x="30" y="54" width="8" height="4" fill="#d4af37"/>
            </svg>`,

            'Unassigned': `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <!-- BG: Gray -->
                <rect width="64" height="64" rx="8" fill="#3a3a3c"/>
                <!-- Silhouette head -->
                <rect x="20" y="12" width="24" height="24" fill="#636366"/>
                <rect x="16" y="16" width="4" height="16" fill="#636366"/>
                <rect x="44" y="16" width="4" height="16" fill="#636366"/>
                <!-- Body silhouette -->
                <rect x="12" y="40" width="40" height="20" fill="#636366"/>
                <!-- Question mark -->
                <rect x="26" y="48" width="12" height="4" fill="white"/>
                <rect x="34" y="48" width="4" height="8" fill="white"/>
                <rect x="26" y="52" width="4" height="4" fill="white"/>
                <rect x="30" y="58" width="4" height="4" fill="white"/>
            </svg>`
        };

        // Alias mapping for avatar lookup
        const AvatarAliases = {
            'Founder': 'The Founder',  // Tickets use 'Founder', avatar is 'The Founder'
        };

        function getAgentAvatar(agentName) {
            const resolvedName = AvatarAliases[agentName] || agentName;
            return AgentAvatars[resolvedName] || AgentAvatars['Unassigned'];
        }

        function svgToDataUri(svg) {
            return `data:image/svg+xml,${encodeURIComponent(svg).replace(/'/g, '%27').replace(/"/g, '%22')}`;
        }

        function getAgentAvatarImg(agentName, className = '') {
            const svg = getAgentAvatar(agentName);
            const dataUri = svgToDataUri(svg);
            return `<img src="${dataUri}" alt="${agentName || 'Unassigned'}" class="${className}" />`;
        }

        // Get special CSS class for tag styling
        function getTagClass(tag) {
            if (tag.includes('üåπ') || tag.includes('Founder')) return 'tag-founder';
            if (tag.includes('‚úÖ') || tag.includes('Approved')) return 'tag-approved';
            if (tag.includes('üîÑ') || tag.includes('In Progress')) return 'tag-progress';
            return '';
        }

        // ==================== PROFESSIONAL BACKGROUND ====================
        function initSportsBg() {
            const bg = document.getElementById('sportsBg');
            let html = '';

            // Corner accent brackets
            html += '<div class="corner-accent top-left"></div>';
            html += '<div class="corner-accent top-right"></div>';
            html += '<div class="corner-accent bottom-left"></div>';
            html += '<div class="corner-accent bottom-right"></div>';

            // Dot pattern overlay
            html += '<div class="dot-pattern"></div>';

            // Diagonal accent stripes
            const stripeAngles = [-15, 15, -10, 12];
            const stripePositions = [
                { top: '20%', left: '0', width: '40%' },
                { top: '60%', right: '0', width: '35%' },
                { top: '40%', left: '0', width: '25%' },
                { top: '80%', right: '0', width: '30%' }
            ];
            stripePositions.forEach((pos, i) => {
                const angle = stripeAngles[i];
                const style = Object.entries(pos).map(([k,v]) => `${k}: ${v}`).join('; ');
                html += `<div class="accent-stripe" style="${style}; transform: rotate(${angle}deg);"></div>`;
            });

            // Vertical accent lines
            const vLinePositions = ['15%', '85%'];
            vLinePositions.forEach(left => {
                html += `<div class="vertical-accent" style="left: ${left};"></div>`;
            });

            bg.innerHTML = html;
        }

        // ==================== THEME TOGGLE ====================
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('themeToggle').textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
            localStorage.setItem('theme', newTheme);
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeToggle').textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        // ==================== AGENTS DATA ====================
        const agents = {
            'Tom Brady': { role: 'Delivery Owner', team: 'New England Patriots' },
            'Stephen Curry': { role: 'Executor', team: 'Golden State Warriors' },
            'Kevin de Bruyne': { role: 'Visualization Lead', team: 'SSC Napoli' },
            'Jose Mourinho': { role: 'Data Science Lead', team: 'SL Benfica' },
            'LeBron James': { role: 'Reader Perspective Auditor & Social Atomization', team: 'Los Angeles Lakers' },
            'Brad Stevens': { role: 'Architecture', team: 'Boston Celtics' },
            'Brock Purdy': { role: 'Data Pipeline & Monitoring', team: 'San Francisco 49ers' },
            'Andy Flower': { role: 'Cricket Domain Specialist & Tactical Insights Lead', team: 'Royal Challengers Bengaluru' },
            'Virat Kohli': { role: 'Editorial Lead & Tone Guard', team: 'Royal Challengers Bengaluru' },
            "N'Golo Kant√©": { role: 'QA Lead', team: 'France' },
            'Florentino Perez': { role: 'President & Chairman', team: 'Real Madrid' },
            'Florentino P√©rez': { role: 'President & Chairman', team: 'Real Madrid' },
            'Founder': { role: 'The Founder', team: 'Cricket Playbook' },  // Alias for founder approval tickets
            'Pep Guardiola': { role: 'Retrospectives & CI', team: 'Manchester City' },
            'Ime Udoka': { role: 'DevOps Lead', team: 'Houston Rockets' },
            'Jayson Tatum': { role: 'UX & Reader Flow', team: 'Boston Celtics' }
        };

        // Agent Skills (out of 10) - Index Card Skill Ratings
        const agentSkills = {
            'Tom Brady': {
                skills: { Leadership: 10, Planning: 9, Documentation: 9, Communication: 10, Execution: 8 },
                strengths: ['Sprint planning', 'Team coordination', 'PRD writing'],
                weaknesses: ['Deep technical work']
            },
            'Stephen Curry': {
                skills: { Execution: 10, Python: 9, Analytics: 9, Speed: 10, Accuracy: 8 },
                strengths: ['Fast delivery', 'Algorithm design', 'Data analysis'],
                weaknesses: ['Documentation']
            },
            'Kevin de Bruyne': {
                skills: { Visualization: 10, UI_Design: 9, CSS: 9, Creativity: 10, JavaScript: 8 },
                strengths: ['Dashboard design', 'Data visualization', 'User experience'],
                weaknesses: ['Backend systems']
            },
            'Jose Mourinho': {
                skills: { Strategy: 10, Analysis: 10, ML_Ops: 9, Benchmarking: 9, Auditing: 10 },
                strengths: ['System audits', 'Strategic planning', 'ML oversight'],
                weaknesses: ['Hands-on coding']
            },
            'LeBron James': {
                skills: { Communication: 10, Marketing: 9, Social: 10, Branding: 9, Outreach: 8 },
                strengths: ['Social engagement', 'Brand messaging', 'Community'],
                weaknesses: ['Technical depth']
            },
            'Brad Stevens': {
                skills: { Architecture: 10, CI_CD: 10, Quality: 9, Systems: 10, Automation: 9 },
                strengths: ['System design', 'CI/CD pipelines', 'Code quality'],
                weaknesses: ['Frontend work']
            },
            'Brock Purdy': {
                skills: { Data_Pipeline: 10, DuckDB: 10, ETL: 9, Schema: 9, Ingestion: 10 },
                strengths: ['Data ingestion', 'Schema design', 'Pipeline reliability'],
                weaknesses: ['UI/UX work']
            },
            'Andy Flower': {
                skills: { Cricket: 10, Domain: 10, Validation: 9, Tactics: 10, Analysis: 9 },
                strengths: ['Cricket expertise', 'Domain validation', 'Player assessment'],
                weaknesses: ['Code writing']
            },
            'Virat Kohli': {
                skills: { Editorial: 10, Writing: 10, Tone: 9, Passion: 10, Intensity: 9 },
                strengths: ['Content quality', 'Editorial voice', 'Player narratives'],
                weaknesses: ['Technical tasks']
            },
            "N'Golo Kant√©": {
                skills: { QA: 10, Testing: 10, Coverage: 9, Diligence: 10, Reliability: 10 },
                strengths: ['Quality assurance', 'Test coverage', 'Bug detection'],
                weaknesses: ['Feature development']
            },
            'Florentino Perez': {
                skills: { Vision: 10, Approval: 10, Strategy: 10, Governance: 10, Authority: 10 },
                strengths: ['Strategic vision', 'Final approvals', 'Scope control'],
                weaknesses: ['Implementation']
            },
            'Pep Guardiola': {
                skills: { Tactics: 10, Analysis: 10, Patterns: 9, Matchups: 10, Innovation: 9 },
                strengths: ['Tactical analysis', 'Pattern recognition', 'Matchup insights'],
                weaknesses: ['Execution tasks']
            },
            'Ime Udoka': {
                skills: { DevOps: 10, Automation: 10, MLOps: 9, Monitoring: 9, Deployment: 10 },
                strengths: ['CI/CD automation', 'ML pipelines', 'System monitoring'],
                weaknesses: ['Data analysis']
            },
            'Jayson Tatum': {
                skills: { UX: 10, Readability: 10, Flow: 9, Skimmability: 10, Audit: 9 },
                strengths: ['UX auditing', 'Reader flow optimization', 'Cognitive load reduction'],
                weaknesses: ['Backend engineering']
            }
        };

        // Agent to sport mapping for ticket icons
        const agentSports = {
            'Tom Brady': 'nfl',
            'Brock Purdy': 'nfl',
            'Stephen Curry': 'nba',
            'LeBron James': 'nba',
            'Brad Stevens': 'nba',
            'Ime Udoka': 'nba',
            'Jayson Tatum': 'nba',
            'Kevin de Bruyne': 'soccer',
            "N'Golo Kant√©": 'soccer',
            'Pep Guardiola': 'soccer',
            'Jose Mourinho': 'soccer',
            'Florentino Perez': 'soccer',
            'Florentino P√©rez': 'soccer',
            'Andy Flower': 'cricket',
            'Virat Kohli': 'cricket',
            'Founder': 'founder'
        };

        // Agent to CSS class mapping for border colors
        const agentClasses = {
            'Tom Brady': 'agent-tom-brady',
            'Brock Purdy': 'agent-brock-purdy',
            'Stephen Curry': 'agent-stephen-curry',
            'LeBron James': 'agent-lebron-james',
            'Brad Stevens': 'agent-brad-stevens',
            'Ime Udoka': 'agent-ime-udoka',
            'Jayson Tatum': 'agent-jayson-tatum',
            'Kevin de Bruyne': 'agent-kevin-de-bruyne',
            "N'Golo Kant√©": 'agent-ngolo-kante',
            'Pep Guardiola': 'agent-pep-guardiola',
            'Jose Mourinho': 'agent-jose-mourinho',
            'Florentino Perez': 'agent-florentino-perez',
            'Florentino P√©rez': 'agent-florentino-perez',
            'Andy Flower': 'agent-andy-flower',
            'Virat Kohli': 'agent-virat-kohli',
            'Founder': 'agent-founder'
        };

        const columns = [
            { id: 'IDEA', name: 'Idea', dot: 'dot-idea', collapsible: true, defaultCollapsed: true },
            { id: 'BACKLOG', name: 'Backlog', dot: 'dot-backlog', collapsible: true, defaultCollapsed: false },
            { id: 'READY', name: 'Ready', dot: 'dot-ready', collapsible: true, defaultCollapsed: false },
            { id: 'RUNNING', name: 'Running', dot: 'dot-running', collapsible: true, defaultCollapsed: false },
            { id: 'BLOCKED', name: 'Blocked', dot: 'dot-blocked', collapsible: true, defaultCollapsed: true },
            { id: 'REVIEW', name: 'Review', dot: 'dot-review', collapsible: true, defaultCollapsed: false },
            { id: 'VALIDATION', name: 'üåπ Founder Review', dot: 'dot-founder', isFounder: true, collapsible: true, defaultCollapsed: false },
            { id: 'DONE', name: 'Done', dot: 'dot-done', collapsible: true, defaultCollapsed: true }
        ];

        const gates = [
            { id: 'florentino_gate', name: 'Florentino Gate', step: 1, approver: 'Florentino Perez' },
            { id: 'domain_sanity', name: 'Domain Sanity', step: 3, approver: 'Jose / Andy / Pep' },
            { id: 'enforcement_check', name: 'Enforcement', step: 4, approver: 'Brad Stevens' },
            { id: 'system_check', name: 'System Check', step: 5, approver: "N'Golo Kant√©" },
            { id: 'founder_validation', name: 'Founder Sign-off', step: 6, approver: 'Florentino Perez' }
        ];

        // Sample ticket data
        // Context Standard:
        // - Ask: Specific deliverable requested
        // - Goal: Measurable outcome we're targeting
        // - Reason: PRD section reference OR Founder directive (always cite source)
        // - Audible: Step-by-step execution sequence
        // Effort levels: Quick Win (< 1 day), Hustle (1-2 days), Deep Work (3-5 days), Marathon (5+ days)
        const effortLevels = {
            'quick-win': { name: '‚ö° Quick Win', description: 'Under 1 day', color: 'var(--accent-green)' },
            'hustle': { name: 'üèÉ Hustle', description: '1-2 days', color: 'var(--accent-yellow)' },
            'deep-work': { name: 'üß† Deep Work', description: '3-5 days', color: 'var(--accent-orange)' },
            'marathon': { name: 'üèîÔ∏è Marathon', description: '5+ days', color: 'var(--accent-red)' }
        };

        // ==================== EPIC DEFINITIONS (TKT-127) ====================
        // EPICs are first-class entities with type, owner, and goal
        // Types: delivery (ship features), research (investigate), retro (lessons), spike (explore)
        const epics = [
            { id: 'EPIC-001', title: 'Sprint Planning & Setup', type: 'delivery', owner: 'Tom Brady',
              goal: 'Establish sprint scope, configure agent personas, and define team structure',
              outcome: 'Clear sprint objectives with assigned agents ready to execute' },
            { id: 'EPIC-002', title: 'Product Vision & Strategy', type: 'delivery', owner: 'Florentino P√©rez',
              goal: 'Define Cricket Playbook product direction, target audience, and PRD foundation',
              outcome: 'Comprehensive PRD with clear vision, personas, and success metrics' },
            { id: 'EPIC-003', title: 'Governance & Process', type: 'delivery', owner: 'Tom Brady',
              goal: 'Establish Constitution, Task Integrity Loop, and quality gates',
              outcome: 'Documented governance framework ensuring consistent delivery quality' },
            { id: 'EPIC-004', title: 'Data Pipeline & Quality', type: 'delivery', owner: 'Brock Purdy',
              goal: 'Build robust data pipeline with player enrichment and quality validation',
              outcome: 'Complete player data with handedness, styles, and validated schema' },
            { id: 'EPIC-005', title: 'Stat Pack Generation', type: 'delivery', owner: 'Stephen Curry',
              goal: 'Create comprehensive stat pack templates and generation pipeline',
              outcome: 'Production-ready stat packs for all 10 IPL teams' },
            { id: 'EPIC-006', title: 'Advanced Analytics Features', type: 'delivery', owner: 'Stephen Curry',
              goal: 'Implement advanced analytics: LHB/RHB balance, matchups, phase analysis',
              outcome: 'Rich analytical features enhancing team selection insights' },
            { id: 'EPIC-007', title: 'The Lab Core', type: 'delivery', owner: 'Stephen Curry',
              goal: 'Build SUPER SELECTOR algorithm and generate Predicted XIIs',
              outcome: 'Automated team selection engine with domain-validated outputs' },
            { id: 'EPIC-008', title: 'ML Operations', type: 'delivery', owner: 'Ime Udoka',
              goal: 'Establish MLOps infrastructure: registry, monitoring, deployment',
              outcome: 'Production-grade ML pipeline with automated health checks' },
            { id: 'EPIC-009', title: 'Testing & Quality Assurance', type: 'delivery', owner: "N'Golo Kant√©",
              goal: 'Build comprehensive test suite: smoke, regression, output validation',
              outcome: 'Automated testing preventing regressions and ensuring output quality' },
            { id: 'EPIC-010', title: 'Code Quality & Documentation', type: 'delivery', owner: 'Brad Stevens',
              goal: 'Refactor codebase, add logging, create comprehensive documentation',
              outcome: 'Maintainable codebase with consistent logging and clear docs' },
            { id: 'EPIC-011', title: 'The Lab Dashboard', type: 'delivery', owner: 'Kevin de Bruyne',
              goal: 'Build interactive analytics dashboard with team exploration features',
              outcome: 'User-friendly dashboard surfacing all Cricket Playbook analytics' },
            { id: 'EPIC-012', title: 'The Research Desk', type: 'delivery', owner: 'Kevin de Bruyne',
              goal: 'Add interactive SQL Lab to The Lab ‚Äî DuckDB-WASM, schema browser, example queries, natural language search',
              outcome: 'Users can query 2.38M rows of ball-by-ball cricket data directly in the browser' },
            { id: 'EPIC-013', title: 'Future Enhancements', type: 'spike', owner: 'Tom Brady',
              goal: 'Research and prototype future capabilities: win probability, form tracking',
              outcome: 'Validated concepts ready for Sprint 5.0+ implementation' },
            { id: 'EPIC-014', title: 'Foundation Fortification', type: 'delivery', owner: 'Brad Stevens',
              goal: 'Harden system foundations: centralize config, enforce quality gates, add data constraints, implement baselines, improve test coverage ‚Äî COMPLETE',
              outcome: 'Production-grade infrastructure scoring 96/100 on system health metrics with enforced CI/CD gates and comprehensive validation' },
            { id: 'EPIC-015', title: 'Operational Maturity', type: 'delivery', owner: 'Brad Stevens',
              goal: 'Close the gap to 85/100 health score: Docker, test coverage, ML retraining, monitoring, runbooks ‚Äî achieved 96/100',
              outcome: 'Production-ready infrastructure with containerized deployment, enforced test coverage, automated ML retraining, observability, and operational runbooks' },
            { id: 'EPIC-016', title: 'Tournament Quality Weighting System', type: 'delivery', owner: 'Jose Mourinho',
              goal: '5-factor composite weight system for 426 tournaments ‚Äî PQI, Competitiveness, Recency Decay, Conditions Similarity (IPL 2023+ baseline), Sample Size Confidence',
              outcome: 'Founder-approved tournament weights integrated into clustering, tags, and analytical models (8 tickets: TKT-183 to TKT-190)' }
        ];

        // Helper function to get EPIC by ID
        function getEpic(epicId) {
            return epics.find(e => e.id === epicId) || null;
        }

        // All Sprint 4.0 Tickets (178 tickets ‚Äî 171 TKT + 7 IDEA)
        const tickets = [
            // Pre-Sprint (TKT-001 to TKT-005)
            { id: 'TKT-001', title: 'Define Sprint 4 Scope', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Florentino P√©rez', epic: 'EPIC-001', progress: 100, tags: ['Planning'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define Sprint 4 objectives and deliverables', goal: 'Clear sprint scope document with prioritized tickets', reason: 'Sprint planning foundation', audible: ['Gather requirements', 'Prioritize by P0/P1/P2', 'Create EPIC breakdown'] }
            },
            { id: 'TKT-002', title: 'Sprint Planning Session', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-001', progress: 100, tags: ['Planning'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Conduct sprint planning with all agents', goal: 'Assigned tickets with effort estimates', reason: 'Team alignment on sprint goals', audible: ['Review scope', 'Assign owners', 'Estimate effort'] }
            },
            { id: 'TKT-003', title: 'Create Florentino Perez agent', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-001', progress: 100, tags: ['Governance', 'Config'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Configure Florentino P√©rez as scope gatekeeper agent', goal: 'Agent persona with gate approval authority', reason: 'Task Integrity Loop requires scope validation', audible: ['Define persona', 'Configure gate criteria'] }
            },
            { id: 'TKT-004', title: 'Create Jose Mourinho agent', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-001', progress: 100, tags: ['Governance', 'Config'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Configure Jos√© Mourinho as strategic advisor agent', goal: 'Agent persona for tactical decision-making', reason: 'Cross-functional strategic oversight', audible: ['Define persona', 'Configure responsibilities'] }
            },
            { id: 'TKT-005', title: 'Create LeBron James agent', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-001', progress: 100, tags: ['Governance', 'Config'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Configure LeBron James as leadership agent', goal: 'Agent persona for cross-domain coordination', reason: 'Team leadership representation', audible: ['Define persona', 'Configure leadership scope'] }
            },

            // Phase 0: Product Vision (TKT-006 to TKT-012)
            { id: 'TKT-006', title: 'Define what CP will become', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Florentino P√©rez', epic: 'EPIC-002', progress: 100, tags: ['Strategy', 'PRD'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define Cricket Playbook vision and product direction', goal: 'Clear product vision statement and roadmap', reason: 'PRD foundation - what we are building', audible: ['Research market', 'Define value prop', 'Document vision'] }
            },
            { id: 'TKT-007', title: 'Define who we cater to', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Florentino P√©rez', epic: 'EPIC-002', progress: 100, tags: ['Strategy', 'PRD'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define target audience and user personas', goal: 'User persona documentation with needs/pain points', reason: 'PRD foundation - who we serve', audible: ['Identify segments', 'Create personas', 'Map needs'] }
            },
            { id: 'TKT-008', title: 'Define what we optimize for', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Florentino P√©rez', epic: 'EPIC-002', progress: 100, tags: ['Strategy', 'PRD'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define success metrics and optimization goals', goal: 'KPIs and metrics framework', reason: 'PRD foundation - how we measure success', audible: ['Define KPIs', 'Set targets', 'Document tradeoffs'] }
            },
            { id: 'TKT-009', title: 'Document inspiration products (PFF, KenPom)', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-002', progress: 100, tags: ['Research', 'PRD'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Research and document PFF, KenPom as product inspiration', goal: 'Competitive analysis with feature breakdown', reason: 'Learn from best-in-class sports analytics products', audible: ['Analyze PFF', 'Analyze KenPom', 'Extract patterns'] }
            },
            { id: 'TKT-010', title: 'Create PRD v2.0', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Tom Brady', epic: 'EPIC-002', progress: 100, tags: ['Documentation', 'PRD'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Create comprehensive Product Requirements Document v2.0', goal: 'Complete PRD with vision, features, specs, and roadmap', reason: 'Master reference for all product decisions', audible: ['Consolidate inputs', 'Draft sections', 'Review and refine'] }
            },
            { id: 'TKT-011', title: 'Founder approval of PRD', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-002', progress: 100, tags: ['Approval'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve PRD v2.0', goal: 'Founder sign-off on product direction', reason: 'Task Integrity Loop: Founder validation gate', audible: ['Review PRD', 'Provide feedback', 'Approve'] }
            },
            { id: 'TKT-012', title: 'Archive PRD in docs/', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-002', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED' },
              context: { ask: 'Archive approved PRD to docs/ folder', goal: 'PRD accessible in repository documentation', reason: 'Documentation best practice', audible: ['Copy to docs/', 'Update index', 'Commit'] }
            },

            // Phase 1: Governance (TKT-013 to TKT-022)
            { id: 'TKT-013', title: 'Create Constitution v2.0', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Documentation'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Create project constitution defining governance principles', goal: 'Constitution document with roles, responsibilities, processes', reason: 'Foundation for team governance and decision-making', audible: ['Define principles', 'Document roles', 'Establish processes'] }
            },
            { id: 'TKT-014', title: 'Define Task Integrity Loop', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Florentino P√©rez', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Process'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define 8-step task governance process (IDEA ‚Üí DONE)', goal: 'Clear process with gates: Florentino, Domain Sanity, System Check, Founder', reason: 'Quality assurance through structured review gates', audible: ['Define states', 'Define gates', 'Document transitions'] }
            },
            { id: 'TKT-015', title: 'Document Florentino gate criteria', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Florentino P√©rez', epic: 'EPIC-003', progress: 100, tags: ['Governance'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Document Florentino Gate scope validation criteria', goal: 'Clear checklist for scope approval/rejection', reason: 'Task Integrity Loop: First gate validation', audible: ['Define criteria', 'Create checklist', 'Document examples'] }
            },
            { id: 'TKT-016', title: 'Document domain sanity review', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Domain'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Document Domain Sanity review process for cricket expertise', goal: 'Cricket domain validation criteria and process', reason: 'Ensure analytics are tactically sound', audible: ['Define cricket criteria', 'Create review process', 'Document examples'] }
            },
            { id: 'TKT-017', title: 'Document enforcement check', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Quality'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Document code quality enforcement standards', goal: 'Quality gates for linting, formatting, security', reason: 'Consistent code quality across codebase', audible: ['Define standards', 'Configure tools', 'Document process'] }
            },
            { id: 'TKT-018', title: 'Document system check', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'N\'Golo Kant√©', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Testing'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Document System Check validation process', goal: 'Technical validation criteria and test requirements', reason: 'Task Integrity Loop: Technical gate validation', audible: ['Define test criteria', 'Document validation steps', 'Create examples'] }
            },
            { id: 'TKT-019', title: 'Document Founder Validation', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Founder', epic: 'EPIC-003', progress: 100, tags: ['Governance'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Document Founder Validation gate process', goal: 'Final approval criteria and process', reason: 'Task Integrity Loop: Ultimate quality gate', audible: ['Define approval criteria', 'Document review process'] }
            },
            { id: 'TKT-020', title: 'Create Task Integrity Loop doc', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Create comprehensive Task Integrity Loop documentation', goal: 'Single reference document for governance process', reason: 'Team reference for workflow compliance', audible: ['Compile all gate docs', 'Create flow diagram', 'Write reference guide'] }
            },
            { id: 'TKT-021', title: 'Founder approval of governance', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-003', progress: 100, tags: ['Approval'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve governance framework', goal: 'Founder sign-off on Task Integrity Loop', reason: 'Governance requires Founder endorsement', audible: ['Review docs', 'Validate process', 'Approve'] }
            },
            { id: 'TKT-022', title: 'Archive governance docs', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED' },
              context: { ask: 'Archive governance documentation to docs/', goal: 'Governance docs accessible in repository', reason: 'Documentation best practice', audible: ['Copy to docs/', 'Update index', 'Commit'] }
            },

            // Phase 2: Data & Tags (TKT-023 to TKT-034)
            { id: 'TKT-023', title: 'Audit player_tags.json completeness', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brock Purdy', epic: 'EPIC-004', progress: 100, tags: ['Data', 'Audit'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Audit player_tags.json for missing/incomplete data', goal: 'Identify all players missing batting_hand, bowling_style, or tags', reason: 'Data completeness required for accurate matchup analysis', audible: ['Scan all players', 'Identify gaps', 'Create fix list'] }
            },
            { id: 'TKT-024', title: 'Add batting_hand to all players', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-004', progress: 100, tags: ['Data', 'Enhancement'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Add batting_hand (Left/Right) to all players in player_tags.json', goal: '100% coverage of batting handedness', reason: 'LHB/RHB matchup analysis requires handedness data', audible: ['Research each player', 'Update JSON', 'Validate with Andy Flower'] }
            },
            { id: 'TKT-025', title: 'Add bowling_style to all bowlers', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-004', progress: 100, tags: ['Data', 'Enhancement'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Add bowling_style to all bowlers in player_tags.json', goal: '100% coverage of bowling style (pace/spin type)', reason: 'Bowler type matchup analysis requires style data', audible: ['Research each bowler', 'Update JSON', 'Validate with Andy Flower'] }
            },
            { id: 'TKT-026', title: 'Validate SPECIALIST vs VULNERABLE tags', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-004', progress: 100, tags: ['Domain', 'Validation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Review and validate SPECIALIST/VULNERABLE phase tags', goal: 'Domain expert confirmation of player phase tags', reason: 'Tags drive team selection - must be accurate', audible: ['Review each tag', 'Validate against performance', 'Approve or correct'] }
            },
            { id: 'TKT-027', title: 'Fix player ID mismatches', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brock Purdy', epic: 'EPIC-004', progress: 100, tags: ['Data', 'Bug'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Fix player ID mismatches between player_tags.json and DuckDB', goal: 'Consistent player IDs across all data sources', reason: 'ID mismatches cause incorrect player lookups', audible: ['Identify mismatches', 'Map correct IDs', 'Update all references'] }
            },
            { id: 'TKT-028', title: 'Merge all ID fixes', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-004', progress: 100, tags: ['Data'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Merge all player ID fixes into main branch', goal: 'Single source of truth for player IDs', reason: 'Consolidate ID fixes before regenerating outputs', audible: ['Review all ID changes', 'Merge to main', 'Verify integrity'] }
            },
            { id: 'TKT-029', title: 'Regenerate all outputs with fixed IDs', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-004', progress: 100, tags: ['Data', 'Pipeline'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Regenerate all stat packs and outputs with corrected player IDs', goal: 'All outputs reflect correct player data', reason: 'Outputs must use fixed IDs', audible: ['Run all generators', 'Verify player names match', 'Commit outputs'] }
            },
            { id: 'TKT-030', title: 'Validate output integrity', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'N\'Golo Kant√©', epic: 'EPIC-004', progress: 100, tags: ['QA', 'Validation'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Run validation tests on all regenerated outputs', goal: 'All outputs pass integrity checks', reason: 'System Check gate requires validation', audible: ['Run test suite', 'Check for errors', 'Report results'] }
            },
            { id: 'TKT-031', title: 'Andy Flower review of tags', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-004', progress: 100, tags: ['Domain', 'Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Final domain review of all player tags', goal: 'Cricket expert sign-off on player data', reason: 'Domain Sanity gate requires expert approval', audible: ['Review all tags', 'Spot-check edge cases', 'Approve'] }
            },
            { id: 'TKT-032', title: 'Document data dictionary', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Brock Purdy', epic: 'EPIC-004', progress: 100, tags: ['Documentation', 'Data', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'docs/DATA_DICTIONARY.md',
              context: { ask: 'Create data dictionary documenting all fields and values', goal: 'Complete reference for data schema', reason: 'Team needs to understand data structure', audible: ['Document all fields', 'Define valid values', 'Add examples'] }
            },
            { id: 'TKT-033', title: 'Archive data docs', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-004', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS' },
              context: { ask: 'Archive data documentation to docs/', goal: 'Data docs accessible in repository', reason: 'Documentation best practice', audible: ['Copy to docs/', 'Update index', 'Commit'] }
            },
            { id: 'TKT-034', title: 'Founder approval of data quality', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-004', progress: 100, tags: ['Approval'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve data quality work', goal: 'Founder sign-off on data completeness', reason: 'Task Integrity Loop: Founder validation gate', audible: ['Review data audit', 'Validate fixes', 'Approve'] }
            },

            // Phase 3: Output Quality (TKT-035 to TKT-045)
            { id: 'TKT-035', title: 'Define stat pack sections', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Tom Brady', epic: 'EPIC-005', progress: 100, tags: ['Product', 'Spec'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Define sections for team stat pack output', goal: 'Section spec with content requirements', reason: 'PRD deliverable: Team analytics packages', audible: ['List sections', 'Define content per section', 'Get Founder input'] }
            },
            { id: 'TKT-036', title: 'Create stat pack template', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-005', progress: 100, tags: ['Design', 'Template'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Design markdown template for stat pack output', goal: 'Reusable template with consistent formatting', reason: 'Visual consistency across all team stat packs', audible: ['Design layout', 'Add sections', 'Create markdown template'] }
            },
            { id: 'TKT-037', title: 'Regenerate all 10 stat packs', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-005', progress: 100, tags: ['Pipeline', 'Output'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Run stat pack generator for all 10 IPL teams', goal: '10 stat pack markdown files in outputs/stat_packs/', reason: 'PRD core deliverable', audible: ['Run generator', 'Validate all 10 outputs', 'Commit files'] }
            },
            { id: 'TKT-038', title: 'Andy Flower review of stat packs', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-005', progress: 100, tags: ['Domain', 'Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Review stat packs for cricket accuracy', goal: 'Domain expert validation of analytics', reason: 'Domain Sanity gate requires expert review', audible: ['Review each stat pack', 'Check cricket logic', 'Approve or flag issues'] }
            },
            { id: 'TKT-039', title: 'Virat Kohli tone review', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Virat Kohli', epic: 'EPIC-005', progress: 100, tags: ['Editorial', 'Review'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Review stat pack language and tone', goal: 'Professional, engaging editorial voice', reason: 'Content should be compelling for readers', audible: ['Review language', 'Suggest improvements', 'Approve tone'] }
            },
            { id: 'TKT-040', title: 'Define depth chart positions', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-005', progress: 100, tags: ['Domain', 'Spec'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Define 11 positions for T20 depth chart', goal: 'Position spec: Opener 1-2, Middle Order 3-5, Finisher 6-7, Bowlers 1-4', reason: 'Algorithm needs position definitions', audible: ['Define positions', 'Document requirements per position', 'Get domain approval'] }
            },
            { id: 'TKT-041', title: 'Create depth chart algorithm', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Stephen Curry', epic: 'EPIC-005', progress: 100, tags: ['Algorithm', 'Core'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Create algorithm to rank players by position', goal: 'Composite scoring system for positional ranking', reason: 'PRD requirement: Automated depth chart generation', audible: ['Design scoring formula', 'Implement algorithm', 'Test with sample data', 'Domain review'] }
            },
            { id: 'TKT-042', title: 'Generate all 10 depth charts', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-005', progress: 100, tags: ['Pipeline', 'Output'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, entered_review_date: '2026-02-03', daysSpent: 4, iterations: 2,
              founderReviewNote: 'Review depth chart pipeline outputs for all 10 IPL teams. Verify positional rankings (1-11) are generated correctly with composite scores matching cricket logic.',
              links: [
                { label: 'Depth Charts Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/outputs/depth_charts' },
                { label: 'The Lab - Artifacts', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/artifacts.html' },
                { label: 'Depth Chart README', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/README.md' }
              ],
              context: {
                ask: 'Run depth chart pipeline for all 10 IPL teams and generate markdown outputs',
                goal: 'Produce 10 depth chart files in outputs/depth_charts/ with positions 1-11 ranked by composite score',
                reason: 'PRD Requirement: Team depth visualization with positional rankings',
                audible: ['Execute generate_depth_charts.py', 'Validate all 10 teams have outputs', 'Verify Andy Flower approved positions']
              }
            },
            { id: 'TKT-043', title: 'Andy Flower review of depth charts', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-005', progress: 100, tags: ['Domain', 'Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES' },
              context: { ask: 'Review depth chart rankings for cricket accuracy', goal: 'Domain expert validation of positional rankings', reason: 'Domain Sanity gate for depth chart outputs', audible: ['Review each team', 'Validate position assignments', 'Approve or flag issues'] }
            },
            { id: 'TKT-044', title: 'Archive depth chart outputs', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-005', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS' },
              context: { ask: 'Archive depth chart outputs to outputs/depth_charts/', goal: 'Depth charts accessible in repository', reason: 'Output organization best practice', audible: ['Verify all 10 files', 'Commit to outputs/', 'Update readme'] }
            },
            { id: 'TKT-045', title: 'Founder approval of depth charts', state: 'VALIDATION', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-005', progress: 95, tags: ['Approval', 'üåπ Awaiting Founder'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, daysSpent: 3, iterations: 1,
              founderReviewNote: 'Review all 10 depth charts for position accuracy. Check that player rankings make cricket sense and composite scores align with actual performance.',
              links: [
                { label: 'Depth Charts Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/outputs/depth_charts' },
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' },
                { label: 'CSK Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/CSK_depth_chart.md' },
                { label: 'MI Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/MI_depth_chart.md' },
                { label: 'RCB Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/RCB_depth_chart.md' },
                { label: 'KKR Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/KKR_depth_chart.md' },
                { label: 'DC Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/DC_depth_chart.md' },
                { label: 'PBKS Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/PBKS_depth_chart.md' },
                { label: 'RR Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/RR_depth_chart.md' },
                { label: 'SRH Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/SRH_depth_chart.md' },
                { label: 'GT Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/GT_depth_chart.md' },
                { label: 'LSG Depth Chart', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/depth_charts/LSG_depth_chart.md' }
              ],
              context: {
                ask: 'Review and approve the 10 depth chart outputs for correctness and format',
                goal: 'Confirm depth charts meet quality bar and can be published',
                reason: 'Task Integrity Loop: Founder validation required before DONE',
                audible: ['Review outputs/depth_charts/*.md', 'Check position rankings make sense', 'Approve or provide feedback']
              }
            },

            // Phase 4: Stat Pack Enhancement (TKT-046 to TKT-060)
            { id: 'TKT-046', title: 'Add LHB/RHB balance section', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 100, tags: ['Feature', 'Analytics'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Add Left/Right hand batter balance section to stat packs', goal: 'Display LHB/RHB distribution and batting order', reason: 'PRD: Handedness balance impacts bowling matchups', audible: ['Query handedness data', 'Calculate percentages', 'Add to stat pack template'] }
            },
            { id: 'TKT-047', title: 'Add matchup matrix section', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 100, tags: ['Feature', 'Analytics'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Add batter vs bowler type matchup matrix to stat packs', goal: 'Display SR/avg by bowling style for each batter', reason: 'PRD: Matchup intelligence for team selection', audible: ['Query matchup data', 'Build matrix visualization', 'Add to stat pack template'] }
            },
            { id: 'TKT-048', title: 'Add phase analysis section', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 100, tags: ['Feature', 'Analytics'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Add Powerplay/Middle/Death phase analysis to stat packs', goal: 'Display player performance by match phase', reason: 'PRD: Phase-specific performance drives batting order', audible: ['Query phase data', 'Calculate phase metrics', 'Add to stat pack template'] }
            },
            { id: 'TKT-049', title: 'Add key partnerships section', state: 'RUNNING', priority: 'P1', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 40, tags: ['Feature', 'Analytics'], gates: { florentino_gate: 'APPROVED' }, plan: 'docs/plans/TKT_049_KEY_PARTNERSHIPS_PLAN.md',
              founderReviewNote: 'Review the Key Partnerships plan before implementation proceeds. Verify partnership metrics scope and stat pack integration approach.',
              context: {
                ask: 'Add Key Partnerships section to stat pack showing batting pair analytics',
                goal: 'Display top partnerships by runs, balls faced, and efficiency for each team',
                reason: 'PRD: Partnership analysis identifies complementary batting pairs',
                audible: ['Query partnership data from DuckDB', 'Calculate partnership metrics', 'Add to stat pack generator', 'Test with MI, CSK']
              }
            },
            { id: 'TKT-050', title: 'Add pressure performance section', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 100, tags: ['Feature', 'Analytics'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, plan: 'docs/plans/TKT_050_PRESSURE_PERFORMANCE_PLAN.md',
              founderReviewNote: 'Review the Pressure Performance plan. Verify pressure scenario definitions (RRR > 10, last 5 overs) and clutch factor methodology before implementation continues.',
              context: {
                ask: 'Add Pressure Performance section showing high-RRR scenario batting',
                goal: 'Identify clutch performers vs chokers when RRR > 10 or in last 5 overs',
                reason: 'PRD: Situational analytics for crunch-moment team selection',
                audible: ['Define pressure scenarios (RRR thresholds)', 'Query ball-by-ball for pressure deliveries', 'Calculate SR/avg under pressure', 'Rank players by clutch factor']
              }
            },
            { id: 'TKT-051', title: 'Add venue analysis section', state: 'VALIDATION', priority: 'P1', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 95, tags: ['Feature', 'Analytics', 'üåπ Founder Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, daysSpent: 2, iterations: 1,
              founderReviewNote: 'Review the venue analysis section in stat packs. Check home/away splits accuracy and venue-specific insights for tactical value.',
              links: [
                { label: 'Stat Packs Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/stat_packs' },
                { label: 'MI Stat Pack', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/stat_packs/MI/MI_stat_pack.md' },
                { label: 'CSK Stat Pack', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/stat_packs/CSK/CSK_stat_pack.md' },
                { label: 'RCB Stat Pack', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/stat_packs/RCB/RCB_stat_pack.md' }
              ],
              context: {
                ask: 'Add Venue Analysis section showing player/team performance by stadium',
                goal: 'Display home/away splits and venue-specific stats for key players',
                reason: 'PRD: Venue intelligence for match-day tactical decisions',
                audible: ['Aggregate stats by venue', 'Identify home advantage patterns', 'Show avg first innings score by venue']
              }
            },
            { id: 'TKT-052', title: 'Add historical trends section', state: 'VALIDATION', priority: 'P2', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 95, tags: ['Feature', 'Analytics', 'üåπ Founder Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, daysSpent: 3, iterations: 2,
              founderReviewNote: 'Review historical trends section. Verify YoY performance changes are accurate and trend arrows correctly indicate improving/declining players.',
              links: [
                { label: 'Stat Packs Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/stat_packs' },
                { label: 'CSK Stat Pack', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/stat_packs/CSK/CSK_stat_pack.md' },
                { label: 'MI Stat Pack', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/stat_packs/MI/MI_stat_pack.md' }
              ],
              context: {
                ask: 'Add Historical Trends section showing season-over-season performance',
                goal: 'Visualize player form trajectory from 2023-2026 with trend indicators',
                reason: 'PRD: Trend analysis identifies improving/declining performers',
                audible: ['Query seasonal aggregates', 'Calculate YoY changes', 'Add trend arrows (up/down/stable)']
              }
            },
            { id: 'TKT-053', title: 'Add Andy Flower tactical insights', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Domain', 'Content'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Create tactical insights section template for stat packs', goal: 'Expert cricket analysis framework for team breakdowns', reason: 'PRD: Domain expert analysis adds strategic value', audible: ['Define insight categories', 'Create template', 'Document methodology'] }
            },
            { id: 'TKT-054', title: 'Generate MI tactical insights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'MI'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for Mumbai Indians', goal: 'Expert analysis of MI strengths, weaknesses, strategies', reason: 'PRD: Team-specific tactical breakdowns', audible: ['Analyze MI data', 'Write insights', 'Add to stat pack'] }
            },
            { id: 'TKT-055', title: 'Generate CSK tactical insights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'CSK'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for Chennai Super Kings', goal: 'Expert analysis of CSK strengths, weaknesses, strategies', reason: 'PRD: Team-specific tactical breakdowns', audible: ['Analyze CSK data', 'Write insights', 'Add to stat pack'] }
            },
            { id: 'TKT-056', title: 'Generate RCB tactical insights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'RCB'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for Royal Challengers Bengaluru', goal: 'Expert analysis of RCB strengths, weaknesses, strategies', reason: 'PRD: Team-specific tactical breakdowns', audible: ['Analyze RCB data', 'Write insights', 'Add to stat pack'] }
            },
            { id: 'TKT-057', title: 'Generate KKR tactical insights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'KKR'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for Kolkata Knight Riders', goal: 'Expert analysis of KKR strengths, weaknesses, strategies', reason: 'PRD: Team-specific tactical breakdowns', audible: ['Analyze KKR data', 'Write insights', 'Add to stat pack'] }
            },
            { id: 'TKT-058', title: 'Generate DC tactical insights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'DC'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for Delhi Capitals', goal: 'Expert analysis of DC strengths, weaknesses, strategies', reason: 'PRD: Team-specific tactical breakdowns', audible: ['Analyze DC data', 'Write insights', 'Add to stat pack'] }
            },
            { id: 'TKT-059', title: 'Generate remaining team insights (PBKS, RR, SRH, GT, LSG)', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Content', 'Teams'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Write tactical insights for PBKS, RR, SRH, GT, LSG', goal: 'Complete tactical insights for all 10 IPL teams', reason: 'PRD: All teams need tactical breakdowns', audible: ['Analyze each team', 'Write insights', 'Add to stat packs'] }
            },
            { id: 'TKT-060', title: 'Founder approval of stat pack enhancements', state: 'DONE', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-006', progress: 100, tags: ['Approval'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve stat pack enhancement features', goal: 'Founder sign-off on new sections', reason: 'Task Integrity Loop: Founder validation gate', audible: ['Review new sections', 'Validate quality', 'Approve'] }
            },

            // Phase 4.5: Predicted XII (TKT-061 to TKT-066)
            { id: 'TKT-061', title: 'Create SUPER SELECTOR algorithm', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Stephen Curry', epic: 'EPIC-007', progress: 100, tags: ['Algorithm', 'Core'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Create algorithm to select best XI from squad', goal: 'Composite scoring system balancing roles, matchups, form', reason: 'PRD core deliverable: Automated team selection', audible: ['Design scoring weights', 'Implement role constraints', 'Balance optimization', 'Domain review'] }
            },
            { id: 'TKT-062', title: 'Generate all 10 Predicted XIIs', state: 'VALIDATION', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-007', progress: 95, tags: ['Pipeline', 'Output', 'üåπ Founder Review'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES' }, daysSpent: 3, iterations: 2,
              founderReviewNote: 'Verify SUPER SELECTOR algorithm produces sensible team selections for all 10 IPL teams. Check that each XI has proper balance (2 openers, 5+ bowlers, WK) and composite scores align with cricket logic.',
              links: [
                { label: 'Predicted XII Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/outputs/predicted_xii' },
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' },
                { label: 'SUPER SELECTOR Research', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/research.html' }
              ],
              context: {
                ask: 'Run SUPER SELECTOR algorithm for all 10 IPL teams to generate predicted XIs',
                goal: 'Produce 10 predicted_xii files with best XI and bench for each team',
                reason: 'PRD Core Deliverable: Automated team selection using composite scoring',
                audible: ['Execute predict_xi.py for all teams', 'Validate balance (2 openers, 5 bowlers, 1 WK)', 'Andy Flower approval on selections']
              }
            },
            { id: 'TKT-063', title: 'Andy Flower review of Predicted XIIs', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-007', progress: 100, tags: ['Domain', 'Review'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES' },
              context: { ask: 'Review Predicted XI selections for cricket accuracy', goal: 'Domain expert validation of team selections', reason: 'Domain Sanity gate for XI outputs', audible: ['Review each team XI', 'Validate balance', 'Check role coverage', 'Approve or flag issues'] }
            },
            { id: 'TKT-064', title: 'Create wireframes for XI view', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-007', progress: 100, tags: ['Design', 'UI'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: { ask: 'Design wireframes for Predicted XI display in The Lab', goal: 'Visual mockup showing XI layout, bench, scoring', reason: 'UI/UX design before implementation', audible: ['Sketch layouts', 'Create wireframes', 'Get Founder feedback'] }
            },
            { id: 'TKT-065', title: 'Founder approval of Predicted XIIs', state: 'VALIDATION', priority: 'P0', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-007', progress: 95, tags: ['Approval', 'üåπ Awaiting Founder'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, daysSpent: 2, iterations: 1,
              founderReviewNote: 'Final approval gate: Review all 10 Predicted XI outputs for plausibility and publication-readiness. Spot-check team balance, scoring explanations, and bench selections.',
              links: [
                { label: 'Predicted XII Folder', url: 'https://github.com/dwijesh-r/cricket-playbook/tree/main/outputs/predicted_xii' },
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' },
                { label: 'MI Predicted XII', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/predicted_xii/mi_predicted_xii.json' },
                { label: 'CSK Predicted XII', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/predicted_xii/csk_predicted_xii.json' }
              ],
              context: {
                ask: 'Review and approve the 10 Predicted XI outputs for quality and plausibility',
                goal: 'Confirm SUPER SELECTOR outputs are ready for publication',
                reason: 'Task Integrity Loop: Founder validation gate before DONE',
                audible: ['Review outputs/predicted_xii/*.md', 'Spot-check team balance', 'Validate scoring explanations', 'Approve or request changes']
              }
            },
            { id: 'TKT-066', title: 'Archive XI outputs', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-007', progress: 100, tags: ['Documentation'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS' },
              context: { ask: 'Archive Predicted XI outputs to outputs/predicted_xii/', goal: 'XI outputs accessible in repository', reason: 'Output organization best practice', audible: ['Verify all 10 files', 'Commit to outputs/', 'Update readme'] }
            },

            // Phase 5: ML Ops (TKT-067 to TKT-075)
            { id: 'TKT-067', title: 'Create model registry', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['MLOps', 'Infrastructure'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Create model registry for tracking ML models', goal: 'Centralized registry with model metadata and versions', reason: 'MLOps best practice: Model governance', audible: ['Design registry schema', 'Implement storage', 'Add versioning'] }
            },
            { id: 'TKT-068', title: 'Document clustering model', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['Documentation', 'ML'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Document player clustering model architecture', goal: 'Model documentation with inputs, outputs, methodology', reason: 'ML transparency and reproducibility', audible: ['Document features', 'Explain algorithm', 'Add usage examples'] }
            },
            { id: 'TKT-069', title: 'Create deployment manifest', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['MLOps', 'DevOps'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Create deployment manifest for model serving', goal: 'Reproducible deployment configuration', reason: 'MLOps best practice: Deployment automation', audible: ['Define dependencies', 'Create config files', 'Document deployment steps'] }
            },
            { id: 'TKT-070', title: 'Implement model versioning', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['MLOps', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'ml_ops/MODEL_VERSIONING.md',
              context: { ask: 'Implement semantic versioning for ML models', goal: 'Version tracking with changelog and rollback capability', reason: 'MLOps best practice: Model lifecycle management', audible: ['Define versioning scheme', 'Implement tracking', 'Add rollback mechanism'] }
            },
            { id: 'TKT-071', title: 'Create model performance tests', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['Testing', 'ML', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'tests/test_model_performance.py',
              context: {
                ask: 'Create tests validating ML model performance metrics',
                goal: 'Automated tests for clustering accuracy, prediction quality',
                reason: 'MLOps: Ensure model quality before deployment',
                audible: [
                  '‚úÖ Research complete - identified test categories',
                  '‚úÖ Created test_model_performance.py (23 tests)',
                  '‚úÖ All tests passing (pytest -v)',
                  '‚úÖ 6 test classes: ClusteringAccuracy, Distribution, Stability, Features, Schema, Labels'
                ]
              },
              plan: 'Tests: PCA variance, cluster size, model stability, domain validation, quality gates'
            },
            { id: 'TKT-072', title: 'Document ML pipeline', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['Documentation', 'ML', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, entered_review_date: '2026-02-07', daysSpent: 1, iterations: 1,
              output: 'docs/ml/ML_PIPELINE.md',
              context: { ask: 'Create end-to-end ML pipeline documentation', goal: 'Comprehensive guide covering data flow, training, inference, and reproducibility', reason: 'MLOps best practice: Pipeline transparency', audible: ['‚úÖ Data pipeline documented', '‚úÖ Training flow documented', '‚úÖ Reproducibility guide added', '‚úÖ Troubleshooting section included', '‚úÖ Founder Approved 2026-02-07'] }
            },
            { id: 'TKT-073', title: 'Setup model monitoring', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['MLOps', 'Monitoring', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, entered_review_date: '2026-02-07', daysSpent: 1, iterations: 1,
              output: 'scripts/ml_ops/',
              links: [
                { label: 'Monitoring Module', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/scripts/ml_ops/model_monitoring.py' },
                { label: 'Monitoring Docs', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/docs/ml/MONITORING.md' },
                { label: 'Health Check Runner', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/scripts/ml_ops/run_health_check.py' },
                { label: 'CI/CD Pipeline', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/.github/workflows/ml-health-check.yml' }
              ],
              context: { ask: 'Create model monitoring infrastructure', goal: 'Observability for ML models with metrics, drift detection, and alerting', reason: 'MLOps best practice: Production monitoring', audible: ['‚úÖ ModelMonitor class created', '‚úÖ Univariate + Multivariate drift detection', '‚úÖ IPL-specific thresholds (Jose Mourinho approved)', '‚úÖ Automated health check pipeline', '‚úÖ Pre-execution hooks integrated', '‚úÖ Founder Approved 2026-02-07'] }
            },
            { id: 'TKT-074', title: 'Archive ML docs', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-008', progress: 100, tags: ['Documentation', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'docs/ml/',
              context: {
                ask: 'Organize and archive ML documentation for the project',
                goal: 'Consolidated ML docs in docs/ml/ directory',
                reason: 'MLOps: Documentation enables team onboarding and maintenance',
                audible: [
                  '‚úÖ Created docs/ml/ directory structure',
                  '‚úÖ Created 6 README index files',
                  '‚úÖ Consolidated 15 ML documentation files',
                  '‚úÖ Organized: algorithms/, models/, features/, validation/, research/, implementation/'
                ]
              }
            },
            { id: 'TKT-075', title: 'Founder approval of ML ops', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-008', progress: 100, tags: ['Approval', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve ML Ops implementation', goal: 'Founder sign-off on model registry, versioning, and performance tests', reason: 'Final gate for EPIC-008 ML Operations', audible: '‚úÖ APPROVED Feb 7, 2026 - All ML Ops components validated and approved.' }
            },

            // Phase 6: Testing (TKT-076 to TKT-081)
            { id: 'TKT-076', title: 'Create smoke test suite', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'N\'Golo Kant√©', epic: 'EPIC-009', progress: 100, tags: ['Testing', 'QA'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Create smoke test suite for critical paths', goal: 'Fast tests verifying core functionality works', reason: 'Quick feedback on breaking changes', audible: ['Identify critical paths', 'Write smoke tests', 'Add to CI'] }
            },
            { id: 'TKT-077', title: 'Create regression tests', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'N\'Golo Kant√©', epic: 'EPIC-009', progress: 100, tags: ['Testing', 'QA'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Create regression test suite for output consistency', goal: 'Tests ensuring outputs remain consistent after changes', reason: 'Prevent unintended output changes', audible: ['Capture baseline outputs', 'Write comparison tests', 'Add to CI'] }
            },
            { id: 'TKT-078', title: 'Create output validation tests', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'N\'Golo Kant√©', epic: 'EPIC-009', progress: 100, tags: ['Testing', 'QA'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Create tests validating output format and content', goal: 'Tests checking stat pack structure, required fields', reason: 'Ensure output quality standards', audible: ['Define validation rules', 'Write format tests', 'Add to CI'] }
            },
            { id: 'TKT-079', title: 'Setup CI/CD pipeline', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-009', progress: 100, tags: ['DevOps', 'CI/CD'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Setup GitHub Actions CI/CD pipeline', goal: 'Automated testing and validation on each commit', reason: 'DevOps best practice: Continuous integration', audible: ['Create workflow file', 'Configure test jobs', 'Add status checks'] }
            },
            { id: 'TKT-080', title: 'Add pre-commit hooks', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-009', progress: 100, tags: ['DevOps', 'Quality'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Add pre-commit hooks for code quality', goal: 'Automatic linting, formatting, security checks before commit', reason: 'Catch issues before they reach CI', audible: ['Install pre-commit', 'Configure hooks', 'Document setup'] }
            },
            { id: 'TKT-081', title: 'Founder approval of testing', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-009', progress: 100, tags: ['Approval'], gates: { founder_validation: 'APPROVED' },
              context: { ask: 'Review and approve testing infrastructure', goal: 'Founder sign-off on QA approach', reason: 'Task Integrity Loop: Founder validation gate', audible: ['Review test coverage', 'Validate CI/CD', 'Approve'] }
            },

            // Phase 7: Script Quality (TKT-082 to TKT-085)
            { id: 'TKT-082', title: 'Refactor generate_stat_packs.py', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Refactor', 'Code Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'scripts/generators/generate_stat_packs.py',
              context: { ask: 'Refactor generate_stat_packs.py for maintainability', goal: 'Modular code with clear function separation', reason: 'TKT-096 audit identified long functions', audible: ['Break up long functions', 'Extract helpers', 'Add docstrings'] }
            },
            { id: 'TKT-083', title: 'Add logging to all scripts', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Logging', 'Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'scripts/utils/logging_config.py',
              context: { ask: 'Add consistent logging across all scripts', goal: 'Configurable logging with file output option', reason: 'Debugging and monitoring require logs', audible: ['Create logging config', 'Replace print statements', 'Add log levels'] }
            },
            { id: 'TKT-084', title: 'Create script documentation', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Documentation', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'scripts/README.md',
              context: { ask: 'Create README documenting scripts directory', goal: 'Documentation explaining script purposes and usage', reason: 'Team needs to understand codebase', audible: ['List all scripts', 'Document usage', 'Add examples'] }
            },
            { id: 'TKT-085', title: 'Founder approval of script quality', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-010', progress: 100, tags: ['Approval', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'docs/script_validation_schema.md', review: 'docs/validation_run_report.md',
              context: {
                ask: 'Review and approve the Script Quality Validation Schema + Validation Run Report',
                goal: 'Establish industry-standard validation gates for all Python scripts',
                reason: 'All 5 gates PASSED: Linting ‚úÖ, Type Safety ‚úÖ, Formatting ‚úÖ, Security ‚úÖ, Testing ‚úÖ (90 tests)',
                audible: 'Founder approved on Feb 6, 2026 - Script quality validation schema is now in effect'
              }
            },

            // The Lab Dashboard (TKT-086)
            { id: 'TKT-086', title: 'Build The Lab analytics dashboard', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Kevin de Bruyne', epic: 'EPIC-011', progress: 100, tags: ['Frontend', 'Dashboard'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, output: 'scripts/the_lab/dashboard/index.html',
              context: {
                ask: 'Build a premium sports analytics dashboard for Cricket Playbook',
                goal: 'Create The Lab - an immersive analytics experience with intro animations, team cards, and responsive design',
                reason: 'Need a polished frontend to showcase Cricket Playbook analytics outputs',
                audible: 'Features: 14-agent intro animation, dark/light theme, mobile responsive, team navigation'
              }
            },

            // IPL 2026 Squad Verification - Founder Review
            { id: 'TKT-107', title: 'Verify all IPL 2026 players visible in The Lab', state: 'VALIDATION', priority: 'P0', effort: 'deep-work', assignee: 'Founder', epic: 'EPIC-011', progress: 0, tags: ['Data', 'QA', 'Critical', 'IPL 2026'], gates: { florentino_gate: 'APPROVED' }, daysSpent: 1, iterations: 0,
              founderReviewNote: 'CRITICAL: Verify 100% player coverage across all 10 IPL teams in The Lab. Cross-check Teams section against official IPL 2026 post-auction squads. Report any missing players. Note: Russell/Maxwell/Faf opted out of IPL 2026.',
              links: [
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' },
                { label: 'IPL 2026 Squads CSV', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/data/ipl_2026_squads.csv' },
                { label: 'Player Tags', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/outputs/tags/player_tags.json' }
              ],
              context: {
                ask: 'Review IPL 2026 squads in The Lab and identify any missing players',
                goal: '100% player coverage for all 10 IPL teams - zero missing players',
                reason: 'IPL 2026 readiness requires complete, accurate squad data - this must be airtight',
                audible: [
                  'Review The Lab Teams section against official IPL 2026 post-auction squads',
                  'Check each team: CSK, MI, RCB, KKR, DC, PBKS, RR, SRH, GT, LSG',
                  'Identify any missing players and provide list for data team to add',
                  'Note: Russell/Maxwell/Faf opted out of IPL 2026 - correctly absent'
                ]
              }
            },

            // UX Research - Dashboard Optimization
            { id: 'TKT-108', title: 'Dashboard UX Research: Cognitive Load & Visual Hierarchy', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['UX', 'Research', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'docs/ux/TKT-108_dashboard_ux_research.md',
              context: {
                ask: 'Research and document dashboard UX improvements for cognitive load reduction',
                goal: 'Actionable UX recommendations for all Cricket Playbook dashboards',
                reason: 'Dashboards should convey insights quickly without overwhelming users',
                audible: [
                  '‚úÖ Audit: All dashboards use real CSS (embedded <style> blocks, not inline)',
                  '‚úÖ Research: Cognitive load reduction (whitespace, chunking, density)',
                  '‚úÖ Research: Visual hierarchy (typography scale, color hierarchy, elevation)',
                  '‚úÖ Analysis: Visuals over text (sparklines, phase bars, archetype icons)',
                  '‚úÖ Research: Progressive Disclosure (expandable sections, tabs, drill-down)',
                  '‚úÖ Design: Contextual tooltips with CSS-only implementation',
                  '‚ö†Ô∏è Founder Note: Balance visuals with context - dont add visuals for sake of it'
                ]
              },
              plan: 'Tom Brady + Kevin de Bruyne: UX research sprint covering 6 focus areas'
            },

            // TKT-108 Implementation Tickets
            { id: 'TKT-109', title: 'Add contextual tooltips to The Lab', state: 'DONE', priority: 'P1', effort: 'quick-win', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['UX', 'Implementation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add hover tooltips explaining cricket metrics across all dashboards',
                goal: 'Users understand SR, Avg, Econ, PP, Death without prior knowledge',
                reason: 'Contextual help reduces cognitive load and improves accessibility',
                audible: [
                  '‚úÖ Added tooltip CSS to all 9 dashboards',
                  '‚úÖ Tooltips on teams.html: table headers, squad stats, compare metrics',
                  '‚úÖ Tooltips on index.html: overview stats',
                  '‚úÖ Cricket glossary: Role, Bat/Bowl, Archetype, Overseas, etc.',
                  '‚úÖ Mobile-safe styles added (768px, 480px breakpoints)',
                  '‚úÖ Founder Approved: 2026-02-07'
                ]
              }
            },
            { id: 'TKT-110', title: 'Add progressive disclosure to Teams page', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['UX', 'Implementation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: {
                ask: 'Convert player cards to expandable format with summary/detail views',
                goal: 'Reduce initial cognitive load while preserving access to full data',
                reason: 'Progressive disclosure: Show essentials first, details on demand',
                audible: [
                  '‚úÖ Show Predicted XI (top 11) by default',
                  '‚úÖ "Show Full Squad" button for extended roster',
                  '‚úÖ Smooth CSS-based show/hide animation',
                  '‚úÖ Context preserved: player count shown in button',
                  '‚úÖ Founder Approved: 2026-02-07'
                ]
              }
            },
            { id: 'TKT-111', title: 'Add phase performance bars', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['UX', 'Implementation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add visual bars for PP/Middle/Death performance with labels',
                goal: 'Quick visual comparison of phase performance across players',
                reason: 'Visuals with context (per Founder) speed up comprehension',
                audible: [
                  '‚úÖ Added Phase column to roster table',
                  '‚úÖ Phase tags: PP (Powerplay), MID (Middle), DTH (Death)',
                  '‚úÖ Color-coded: yellow=PP, blue=Mid, red=Death',
                  '‚úÖ Tooltips explain each phase (overs range)',
                  '‚úÖ Derived from batterTags/bowlerTags data',
                  '‚úÖ Founder Approved: 2026-02-07'
                ]
              }
            },
            { id: 'TKT-112', title: 'Create shared UX component library', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['UX', 'Documentation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, output: 'docs/ux/components.md',
              context: {
                ask: 'Document reusable UX patterns from TKT-109 to TKT-111',
                goal: 'Consistent UX components across all dashboards',
                reason: 'Component library ensures maintainability and consistency',
                audible: [
                  '‚úÖ Created docs/ux/components.md',
                  '‚úÖ Documented tooltip pattern with CSS + usage',
                  '‚úÖ Documented progressive disclosure pattern',
                  '‚úÖ Documented phase indicators pattern',
                  '‚úÖ Added theme variables reference + checklist',
                  '‚úÖ Mobile-safe styles documented',
                  '‚úÖ Founder Approved: 2026-02-07'
                ]
              }
            },
            { id: 'TKT-113', title: 'CI/CD automation audit & expansion', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, ticketType: 'parent', tags: ['DevOps', 'CI/CD', 'Research', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Audit repo for CI/CD pipeline opportunities and ensure all infrastructure is utilized',
                goal: 'Comprehensive CI/CD coverage: data validation, testing, deployment, monitoring all automated',
                reason: 'DevOps best practice: Automation prevents human error and ensures standards compliance',
                audible: ['‚úÖ Audited 18 scripts', '‚úÖ Identified 2 CRITICAL gaps', '‚úÖ Identified 5 HIGH priority gaps', '‚úÖ Created implementation tickets TKT-114 to TKT-125', '‚úÖ Founder Approved 2026-02-07']
              },
              collaborators: ['Tom Brady', 'Brock Purdy', 'Brad Stevens'],
              plan: 'Phase 1: Repo audit - identify all scripts/workflows that could benefit from CI/CD. Phase 2: Gap analysis - what\'s missing vs best practices. Phase 3: Implementation plan with priorities.'
            },

            // =========================================================================
            // TKT-113 CHILD TICKETS: CI/CD Pipeline Implementation
            // Created by: Tom Brady (Product Owner)
            // Based on: Ime Udoka, Brock Purdy, Brad Stevens audit findings
            // =========================================================================

            // P0 CRITICAL - Must fix immediately
            { id: 'TKT-114', title: 'Add schema validation to CI pipeline', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Data Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'CRITICAL: Schema validation prevents broken analytics from reaching production. Review the CI integration approach.',
              context: {
                ask: 'Integrate validate_schema.py into CI workflow as a quality gate',
                goal: 'Every PR must pass schema validation before merge - catches table/view/FK issues automatically',
                reason: 'CRITICAL GAP: Schema changes could break downstream analytics without CI validation. Found by Brad Stevens in TKT-113 audit.',
                audible: ['Add validate_schema.py step to ci.yml', 'Run after pytest', 'Fail build on validation errors', 'Add error summary to PR comments']
              },
              plan: '1. Add new step to .github/workflows/ci.yml after pytest. 2. Run python scripts/core/validate_schema.py. 3. Fail workflow if exit code != 0. 4. Test with intentional schema break.'
            },
            { id: 'TKT-115', title: 'Add output validation to CI pipeline', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Data Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'CRITICAL: Output validation catches impossible T20 values (entry points > 120, negative economy). Review CI integration.',
              context: {
                ask: 'Integrate validate_outputs.py into CI workflow for T20 logical constraint checking',
                goal: 'Prevent logically impossible cricket values from reaching production outputs',
                reason: 'CRITICAL GAP: validate_outputs.py exists but never runs automatically. CSVs could contain SR > 400 or negative balls. Found by Brock Purdy in TKT-113 audit.',
                audible: ['Add validate_outputs.py step to ci.yml', 'Run when generator scripts change', 'Fail on impossible values', 'Log validation summary']
              },
              plan: '1. Add conditional step to ci.yml (paths: scripts/generators/**). 2. Run python scripts/utils/validate_outputs.py. 3. Fail workflow if validation fails. 4. Add T20 constraint summary to output.'
            },

            // P1 HIGH - Should fix this sprint
            { id: 'TKT-116', title: 'Create model retraining pipeline', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'MLOps', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'HIGH: Model retraining automation ensures player archetypes stay current with new data. Review the workflow triggers.',
              context: {
                ask: 'Create ml-retrain.yml GitHub Actions workflow for automated model retraining',
                goal: 'K-means clustering model automatically retrains after data ingestion, ensuring fresh player archetypes',
                reason: 'HIGH GAP: player_clustering_v2.py has no automated retraining. Models become stale when new season data arrives. Found by Ime Udoka in TKT-113 audit.',
                audible: ['Create .github/workflows/ml-retrain.yml', 'Trigger after ingest.yml success', 'Run player_clustering_v2.py', 'Update player_tags.json', 'Set drift baseline automatically']
              },
              plan: '1. Create ml-retrain.yml with workflow_run trigger. 2. Install dependencies. 3. Run clustering script. 4. Commit updated tags. 5. Trigger ml-health-check.yml.'
            },
            { id: 'TKT-117', title: 'Create output generation pipeline', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Automation', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'HIGH: Output generation automation ensures stat packs and depth charts are always current. Review the workflow chain.',
              context: {
                ask: 'Create generate-outputs.yml GitHub Actions workflow for automated stat pack and depth chart generation',
                goal: 'All analytics outputs (stat packs, depth charts, predicted XIs) regenerate automatically after model updates',
                reason: 'HIGH GAP: Generator scripts require manual execution. Outputs can become stale. Found by Brock Purdy in TKT-113 audit.',
                audible: ['Create .github/workflows/generate-outputs.yml', 'Trigger after ml-retrain.yml success', 'Run all generator scripts', 'Commit updated outputs', 'Run validate_outputs.py as quality gate']
              },
              plan: '1. Create generate-outputs.yml with workflow_run trigger. 2. Run generate_stat_packs.py, generate_depth_charts.py, generate_predicted_xii.py. 3. Validate outputs. 4. Commit changes.'
            },
            { id: 'TKT-118', title: 'Chain analytics views in ingestion workflow', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Data Pipeline', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'HIGH: Analytics views must refresh after ingestion. Review the ingest.yml modification.',
              context: {
                ask: 'Add analytics_ipl.py execution to ingest.yml workflow after data ingestion completes',
                goal: 'Analytics views automatically refresh when new data is ingested - no manual step required',
                reason: 'HIGH GAP: analytics_ipl.py creates views but is not in any workflow. Views could be stale after ingestion. Found by Brock Purdy in TKT-113 audit.',
                audible: ['Modify .github/workflows/ingest.yml', 'Add step after ingest.py', 'Run python scripts/core/analytics_ipl.py', 'Add validate_schema.py as final check']
              },
              plan: '1. Add analytics_ipl.py step to ingest.yml after ingestion. 2. Add validate_schema.py as validation step. 3. Update workflow documentation.'
            },
            { id: 'TKT-119', title: 'Add dependency lock file for reproducibility', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Dependencies', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'HIGH: Dependency locking ensures reproducible builds. Review the pip-tools approach.',
              context: {
                ask: 'Implement pip-tools (pip-compile) for dependency locking with requirements.in -> requirements.txt workflow',
                goal: 'Reproducible builds with pinned transitive dependencies - same versions in CI and local dev',
                reason: 'HIGH GAP: requirements.txt has version pins but no lock file for transitive dependencies. Found by Brad Stevens in TKT-113 audit.',
                audible: ['Install pip-tools', 'Create requirements.in with direct deps', 'Generate requirements.txt with pip-compile', 'Add to CI workflow', 'Document update process']
              },
              plan: '1. Create requirements.in from current requirements.txt (remove transitive). 2. Run pip-compile requirements.in. 3. Update CI to use locked requirements.txt. 4. Add Makefile target for updates.'
            },
            { id: 'TKT-120', title: 'Add code coverage reporting to CI', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Testing', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: '.github/workflows/ci.yml',
              parent: 'TKT-113',
              founderReviewNote: 'HIGH: Code coverage tracking identifies untested code paths. Review the pytest-cov + Codecov approach.',
              context: {
                ask: 'Add pytest-cov and Codecov integration to CI workflow for code coverage tracking',
                goal: 'Track test coverage metrics, identify untested code, prevent coverage regression',
                reason: 'HIGH GAP: Tests exist but no coverage metrics tracked. Quality blind spot. Found by Brad Stevens in TKT-113 audit.',
                audible: ['Add pytest-cov to requirements', 'Modify ci.yml to run with --cov', 'Upload coverage.xml to Codecov', 'Add coverage badge to README']
              },
              plan: '1. Add pytest-cov to requirements.txt. 2. Update ci.yml: pytest --cov=scripts --cov-report=xml. 3. Add Codecov GitHub Action. 4. Configure codecov.yml threshold.'
            },

            // P2 MEDIUM - Should fix next sprint
            { id: 'TKT-121', title: 'Add scheduled trigger to data ingestion', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Automation', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'MEDIUM: Scheduled ingestion keeps data fresh without manual intervention. Review the weekly schedule approach.',
              context: {
                ask: 'Add optional scheduled trigger to ingest.yml for automatic weekly data refresh',
                goal: 'Data automatically refreshes on schedule (e.g., Sunday night) - always current with Cricsheet',
                reason: 'MEDIUM GAP: ingest.yml only runs on manual dispatch. Data freshness depends on human memory. Found by Ime Udoka in TKT-113 audit.',
                audible: ['Add schedule trigger to ingest.yml', 'Cron: Sunday 11 PM UTC', 'Keep workflow_dispatch for manual runs', 'Add Slack notification on completion']
              },
              plan: '1. Add schedule trigger: cron: 0 23 * * 0. 2. Add conditional notification step. 3. Test with dry run. 4. Document schedule in README.'
            },
            { id: 'TKT-122', title: 'Add matchup analysis to retraining pipeline', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Analytics', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'MEDIUM: Matchup analysis scripts should run automatically after model retraining. Review the integration approach.',
              context: {
                ask: 'Include matchup analysis scripts in ml-retrain.yml workflow after clustering completes',
                goal: 'Player matchup tags (batter vs spin, bowler vs left-handers) automatically refresh with model updates',
                reason: 'MEDIUM GAP: Analysis scripts (batter_bowling_type_matchup.py, bowler_handedness_matchup.py) require manual execution. Found by Ime Udoka in TKT-113 audit.',
                audible: ['Add matchup scripts to ml-retrain.yml', 'Run batter_bowling_type_matchup.py', 'Run bowler_handedness_matchup.py', 'Run bowler_phase_tags.py', 'Update outputs/matchups/']
              },
              plan: '1. Modify ml-retrain.yml (after TKT-116). 2. Add steps for each analysis script. 3. Commit updated matchup CSVs. 4. Add to validate_outputs.py checks.'
            },
            { id: 'TKT-123', title: 'Create end-to-end pipeline orchestration', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Orchestration', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'MEDIUM: Pipeline orchestration coordinates all workflows into a single automated flow. Review the workflow_run chain approach.',
              context: {
                ask: 'Create master orchestration workflow that chains: Ingest -> Analytics -> Model -> Outputs -> Validation',
                goal: 'One-click (or scheduled) full pipeline execution with proper dependency ordering and artifact passing',
                reason: 'MEDIUM GAP: Individual workflows exist but no master pipeline. Manual coordination required between steps. Found by Ime Udoka in TKT-113 audit.',
                audible: ['Create pipeline-orchestrator.yml', 'Use workflow_run triggers', 'Pass artifacts between workflows', 'Add pipeline status dashboard', 'Create manual "Run Full Pipeline" trigger']
              },
              plan: '1. Create pipeline-orchestrator.yml. 2. Chain workflows via workflow_run. 3. Add pipeline status summary. 4. Create documentation for pipeline flow.'
            },
            { id: 'TKT-124', title: 'Add automated documentation generation', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Tom Brady', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'CI/CD', 'Documentation', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'MEDIUM: Auto-generated API docs stay in sync with code. Review the pdoc3 approach.',
              context: {
                ask: 'Add pdoc3 documentation generation to CI workflow for automatic API documentation',
                goal: 'API documentation automatically generated and published on each release',
                reason: 'MEDIUM GAP: No automated doc generation. API docs become stale as code evolves. Found by Brad Stevens in TKT-113 audit.',
                audible: ['Add pdoc3 to requirements', 'Create docs generation step in CI', 'Generate docs/api/ on release', 'Publish to GitHub Pages']
              },
              plan: '1. Add pdoc3 to requirements.txt. 2. Create generate-docs.yml workflow. 3. Generate HTML docs for scripts/. 4. Deploy to GitHub Pages on release.'
            },
            { id: 'TKT-125', title: 'Standardize input validation across scripts', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-008', progress: 100, tags: ['DevOps', 'Code Quality', 'Architecture', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              parent: 'TKT-113',
              founderReviewNote: 'MEDIUM: Consistent input validation prevents runtime errors. Review the decorator pattern approach.',
              context: {
                ask: 'Create @requires_database and @requires_file decorators for consistent input validation across all entry point scripts',
                goal: 'All scripts validate their inputs consistently - clear error messages when dependencies are missing',
                reason: 'MEDIUM GAP: Some scripts check DB_PATH.exists() but others do not. Inconsistent error handling. Found by Brad Stevens in TKT-113 audit.',
                audible: ['Create scripts/utils/validators.py', 'Add @requires_database decorator', 'Add @requires_file(path) decorator', 'Apply to all entry point scripts', 'Add unit tests for decorators']
              },
              plan: '1. Create validators.py with decorator implementations. 2. Apply to scripts/generators/*.py. 3. Apply to scripts/analysis/*.py. 4. Add tests for validation failures.'
            },

            // =========================================================================
            // TKT-126: TICKET HIERARCHY DESIGN (Research/Architecture)
            // Created by: Tom Brady (Product Owner)
            // Type: Research EPIC - Defines standard for all future work items
            // =========================================================================
            { id: 'TKT-126', title: 'Design hierarchical ticket structure (EPIC ‚Üí Parent ‚Üí Child)', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, ticketType: 'parent', tags: ['Architecture', 'Governance', 'Research', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              founderReviewNote: 'ARCHITECTURE: This defines the standard ticket hierarchy for Cricket Playbook. Review the proposed Work Item Types, hierarchy rules, and Epic View design.',
              context: {
                ask: 'Design and document a hierarchical ticket structure: EPIC ‚Üí Parent Tickets ‚Üí Child Tickets, with Research/Retro as special epic types',
                goal: 'Standardized work item hierarchy enabling better planning, tracking, and visualization in The Boardroom',
                reason: 'Observed in TKT-113‚ÜíTKT-114-125: Parent-child relationships improve traceability. Need formal structure for all future work.',
                audible: [
                  '‚úÖ Analyzed current ticket structure (15 EPICs, 156 tickets)',
                  '‚úÖ Designed Work Item Type hierarchy',
                  '‚úÖ Defined EPIC types (Delivery, Research, Retro)',
                  '‚úÖ Created Epic View specification for Boardroom',
                  '‚úÖ Documented ticket field requirements',
                  'üîÑ Pending Founder approval'
                ]
              },
              plan: 'Phase 1: Design hierarchy (DONE). Phase 2: Create Epic View in Boardroom. Phase 3: Migrate existing tickets. Phase 4: Update constitution.',
              research: {
                summary: 'Hierarchical Work Item Structure for Cricket Playbook',
                sections: [
                  {
                    title: '1. WORK ITEM TYPE HIERARCHY',
                    content: `
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    WORK ITEM HIERARCHY                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  Level 0: EPIC                                                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                          ‚îÇ
‚îÇ  ‚Ä¢ Container for related work                                   ‚îÇ
‚îÇ  ‚Ä¢ Has theme/goal/outcome                                       ‚îÇ
‚îÇ  ‚Ä¢ Types: Delivery, Research, Retro, Spike                      ‚îÇ
‚îÇ  ‚Ä¢ Example: EPIC-008 (ML Operations)                            ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ        ‚îÇ                                                        ‚îÇ
‚îÇ        ‚ñº                                                        ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  Level 1: PARENT TICKET                                         ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                          ‚îÇ
‚îÇ  ‚Ä¢ Scoped deliverable within EPIC                               ‚îÇ
‚îÇ  ‚Ä¢ Can have child tickets                                       ‚îÇ
‚îÇ  ‚Ä¢ Types: Feature, Audit, Integration                           ‚îÇ
‚îÇ  ‚Ä¢ Example: TKT-113 (CI/CD Audit)                               ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ        ‚îÇ                                                        ‚îÇ
‚îÇ        ‚ñº                                                        ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  Level 2: CHILD TICKET                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                          ‚îÇ
‚îÇ  ‚Ä¢ Atomic implementation task                                   ‚îÇ
‚îÇ  ‚Ä¢ Has parent reference                                         ‚îÇ
‚îÇ  ‚Ä¢ Cannot have children (leaf node)                             ‚îÇ
‚îÇ  ‚Ä¢ Example: TKT-114 (Schema validation)                         ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`
                  },
                  {
                    title: '2. EPIC TYPES',
                    content: `
| Type | Purpose | Example | Outcome |
|------|---------|---------|---------|
| DELIVERY | Ship a feature/capability | EPIC-008: ML Ops | Working code + docs |
| RESEARCH | Investigate, audit, explore | TKT-113 (promoted) | Findings + recommendations |
| RETRO | Post-mortem, lessons learned | Sprint retrospective | Process improvements |
| SPIKE | Time-boxed technical exploration | Proof of concept | Decision + prototype |

DELIVERY EPIC Structure:
‚îú‚îÄ‚îÄ Parent: Define scope (TKT-XXX)
‚îú‚îÄ‚îÄ Parent: Implement core (TKT-XXX)
‚îÇ   ‚îú‚îÄ‚îÄ Child: Component A
‚îÇ   ‚îú‚îÄ‚îÄ Child: Component B
‚îÇ   ‚îî‚îÄ‚îÄ Child: Tests
‚îú‚îÄ‚îÄ Parent: Documentation (TKT-XXX)
‚îî‚îÄ‚îÄ Parent: Founder Approval (TKT-XXX)

RESEARCH EPIC Structure:
‚îú‚îÄ‚îÄ Child: Phase 1 - Discovery
‚îú‚îÄ‚îÄ Child: Phase 2 - Analysis
‚îú‚îÄ‚îÄ Child: Phase 3 - Recommendations
‚îî‚îÄ‚îÄ Implementation tickets ‚Üí spawn new DELIVERY EPIC`
                  },
                  {
                    title: '3. TICKET FIELD REQUIREMENTS',
                    content: `
| Field | Level 0 (EPIC) | Level 1 (Parent) | Level 2 (Child) |
|-------|----------------|------------------|-----------------|
| id | EPIC-XXX | TKT-XXX | TKT-XXX |
| type | epic | parent | child |
| epic | null | EPIC-XXX | EPIC-XXX |
| parent | null | null | TKT-XXX |
| children | [TKT-XXX,...] | [TKT-XXX,...] | null |
| state | rollup | standard | standard |
| progress | calculated | calculated | manual |
| assignee | optional | required | required |
| gates | optional | required | inherited |

New Fields to Add:
‚Ä¢ type: 'epic' | 'parent' | 'child'
‚Ä¢ children: array of child ticket IDs
‚Ä¢ rollupProgress: calculated from children
‚Ä¢ epicType: 'delivery' | 'research' | 'retro' | 'spike'`
                  },
                  {
                    title: '4. EPIC VIEW DESIGN (Boardroom)',
                    content: `
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üèõÔ∏è EPIC VIEW ‚Äî "The Strategy Map"                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  Filter: [All] [Delivery] [Research] [Retro]    Search: [____] ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ EPIC-008: ML Operations                    [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë] 85%‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Type: Delivery | Owner: Ime Udoka | 15 tickets          ‚îÇ   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ  ‚îÇ ‚ñº TKT-072: Document ML pipeline            ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚ñº TKT-073: Setup model monitoring          ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚ñº TKT-113: CI/CD automation audit          ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-114: Schema validation CI        ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-115: Output validation CI        ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-116: Model retrain pipeline      ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-117: Output generation pipeline  ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-118: Chain analytics ingestion   ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-119: Dependency lock file        ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-120: Code coverage reporting     ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-121: Scheduled ingestion         ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-122: Matchup analysis pipeline   ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-123: E2E orchestration           ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ TKT-124: Documentation generation    ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ TKT-125: Input validation decorators ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ EPIC-006: Stat Pack Enhancements           [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%‚îÇ
‚îÇ  ‚îÇ Type: Delivery | Owner: Tom Brady | 8 tickets           ‚îÇ   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ  ‚îÇ ‚ñ∫ TKT-052: Add historical trends           ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚ñ∫ TKT-053: Andy Flower tactical insights   ‚úÖ DONE      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ...                                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Features:
‚Ä¢ Collapsible EPICs (click to expand/collapse)
‚Ä¢ Progress bar calculated from child ticket states
‚Ä¢ Filter by EPIC type (Delivery/Research/Retro)
‚Ä¢ Search across all levels
‚Ä¢ Visual parent-child indentation
‚Ä¢ State badges with color coding`
                  },
                  {
                    title: '5. MIGRATION PLAN',
                    content: `
Phase 1: Add EPIC Metadata (TKT-127)
‚Ä¢ Create epics array with id, title, type, owner, goal
‚Ä¢ Add epicType field to existing EPIC references

Phase 2: Add Parent-Child Fields (TKT-128)
‚Ä¢ Add 'type' field to all tickets
‚Ä¢ Add 'parent' field where relationships exist
‚Ä¢ Add 'children' computed field

Phase 3: Create Epic View (TKT-129)
‚Ä¢ Add new view option to Boardroom navigation
‚Ä¢ Implement collapsible tree UI
‚Ä¢ Add progress rollup calculation

Phase 4: Update Constitution (TKT-130)
‚Ä¢ Document Work Item Types in governance
‚Ä¢ Update Task Integrity Loop for hierarchy
‚Ä¢ Add EPIC creation guidelines`
                  },
                  {
                    title: '6. RULES & CONSTRAINTS',
                    content: `
Hierarchy Rules:
1. EPICs contain Parent Tickets (1:N)
2. Parent Tickets contain Child Tickets (1:N)
3. Child Tickets are atomic (no children)
4. Max depth = 3 levels (EPIC ‚Üí Parent ‚Üí Child)
5. Orphan tickets (no EPIC) allowed for quick-wins

State Rollup Rules:
‚Ä¢ EPIC state = worst child state (BLOCKED > RUNNING > REVIEW > DONE)
‚Ä¢ Parent progress = avg(children progress)
‚Ä¢ EPIC progress = avg(parent progress)

Assignment Rules:
‚Ä¢ EPIC owner = primary accountable (optional)
‚Ä¢ Parent owner = delivery lead (required)
‚Ä¢ Child owner = implementer (required)

Gate Inheritance:
‚Ä¢ Child tickets inherit EPIC gates by default
‚Ä¢ Can override with ticket-specific gates
‚Ä¢ Florentino Gate applies at Parent level minimum`
                  }
                ]
              }
            },

            // =========================================================================
            // TKT-126 CHILD TICKETS: Ticket Hierarchy Implementation
            // Created by: Tom Brady (Product Owner)
            // Parent: TKT-126 (Hierarchical Ticket Structure Design)
            // =========================================================================
            { id: 'TKT-127', title: 'Add EPIC metadata to Mission Control', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Kevin de Bruyne', epic: 'EPIC-003', progress: 100, ticketType: 'child', tags: ['Frontend', 'Architecture'], gates: { florentino_gate: 'APPROVED', founder_review: 'APPROVED' },
              parent: 'TKT-126',
              completedNote: 'Created epics[] array with 15 EPICs, added getEpic() helper. Each EPIC has id, title, type, owner, goal, outcome.',
              context: {
                ask: 'Create epics array in Mission Control data with full EPIC metadata',
                goal: 'EPICs become first-class entities with type (Delivery/Research/Retro/Spike), owner, and goal',
                reason: 'TKT-126 design requires EPIC metadata for Epic View and progress rollup. Currently EPICs are just string references.',
                audible: ['Create epics[] array in data model', 'Add epicType field', 'Add owner, goal, outcome fields', 'Migrate existing EPIC-001 to EPIC-013']
              },
              plan: '1. Define EPIC schema in data model. 2. Create epics array with all 15 EPICs. 3. Add epicType: delivery|research|retro|spike. 4. Update ticket epic field to reference by ID.'
            },
            { id: 'TKT-128', title: 'Add parent-child fields to tickets', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Kevin de Bruyne', epic: 'EPIC-003', progress: 100, ticketType: 'child', tags: ['Frontend', 'Architecture'], gates: { florentino_gate: 'APPROVED', founder_review: 'APPROVED' },
              parent: 'TKT-126',
              completedNote: 'Added ticketType field to parent tickets (TKT-113, TKT-126). Created helper functions: getChildren(), getParent(), getTicketType(), getTicketsByEpic(), calculateEpicProgress(), getHierarchySummary().',
              context: {
                ask: 'Add type (epic/parent/child), parent (reference), and children (computed) fields to ticket schema',
                goal: 'Tickets can express hierarchical relationships: EPIC ‚Üí Parent ‚Üí Child',
                reason: 'TKT-126 design requires explicit hierarchy fields. Currently only TKT-113+ children have parent field.',
                audible: ['Add type field to all tickets', 'Add parent field where applicable', 'Compute children arrays', 'Update existing tickets (TKT-113 children)']
              },
              plan: '1. Add type field to ticket schema. 2. Scan for parent references and set type=child. 3. Build children arrays for parents. 4. Validate no orphan children.'
            },
            { id: 'TKT-129', title: 'Create Epic View in Boardroom', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-003', progress: 100, ticketType: 'child', tags: ['Frontend', 'UX'], gates: { florentino_gate: 'APPROVED', founder_review: 'APPROVED' },
              parent: 'TKT-126',
              completedNote: 'Epic View ("The Strategy Map") implemented with: nav buttons (desktop + mobile), EPIC type filters, collapsible EPIC cards, parent-child ticket hierarchy, progress rollup, mobile-responsive CSS.',
              context: {
                ask: 'Implement Epic View in Boardroom with collapsible tree UI, progress rollup, and EPIC type filters',
                goal: 'New view showing hierarchical ticket structure with expand/collapse, progress bars, and state badges',
                reason: 'TKT-126 design specifies Epic View as primary way to visualize work item hierarchy.',
                audible: ['Add Epic View to nav menu', 'Implement collapsible tree UI', 'Calculate progress rollup', 'Add EPIC type filters', 'Mobile-optimize (test 600px, 380px)', 'Use existing component patterns from docs/ux/components.md']
              },
              plan: '1. Add showView("epic") to navigation. 2. Create renderEpicView() function. 3. Implement collapsible accordions per TKT-126 spec. 4. Add progress bar calculation. 5. Test mobile breakpoints.'
            },
            { id: 'TKT-130', title: 'Update Constitution with ticket hierarchy', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, ticketType: 'child', tags: ['Documentation', 'Governance'], gates: { florentino_gate: 'APPROVED', founder_review: 'APPROVED' },
              parent: 'TKT-126',
              completedNote: 'Constitution v2.1.0 - Added Section 5: Work Item Hierarchy with EPIC/Parent/Child definitions, EPIC types, ticket field requirements, hierarchy rules, EPIC creation checklist, and Epic View reference.',
              context: {
                ask: 'Update Constitution to document the EPIC ‚Üí Parent ‚Üí Child hierarchy as official governance',
                goal: 'Work item hierarchy becomes part of Cricket Playbook governance documentation',
                reason: 'TKT-126 design establishes standards that should be documented in Constitution for team reference.',
                audible: ['Add Work Item Types section', 'Document EPIC types', 'Document hierarchy rules', 'Add EPIC creation checklist', 'Update Task Integrity Loop for hierarchy']
              },
              plan: '1. Add "Work Item Types" section to Constitution. 2. Document Level 0/1/2 definitions. 3. Document state rollup rules. 4. Add examples.'
            },
            { id: 'TKT-131', title: 'Create UI/UX Procedures document', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-010', progress: 100, tags: ['Documentation', 'UX'], gates: { florentino_gate: 'APPROVED', domain_review: 'PASSED', founder_review: 'APPROVED' },
              completedNote: 'docs/ux/PROCEDURES.md v1.0.0 - 9 sections covering design principles, mobile-first workflow, testing, review process. Founder approved 2026-02-07.',
              context: {
                ask: 'Create docs/ux/PROCEDURES.md documenting the UI/UX development workflow for Cricket Playbook dashboards',
                goal: 'Standardized procedures for building, testing, and reviewing dashboard UX - ensures consistency across Boardroom and Lab',
                reason: 'We have components.md (patterns) and TKT-108 (research) but missing the PROCESS document. Founder request.',
                audible: ['Document design principles (dark-first, mobile-first)', 'Document breakpoint testing (600px, 480px, 380px)', 'Document accessibility basics', 'Document review checklist', 'Document CSS naming conventions', 'Reference existing components.md']
              },
              plan: '1. Create docs/ux/PROCEDURES.md. 2. Document design principles. 3. Document development workflow. 4. Document testing checklist. 5. Document review process.'
            },

            // ==================== EPIC-014: SYSTEM HARDENING (Mourinho Audit) ====================
            // P0 Critical Tickets (TKT-132 to TKT-135)
            { id: 'TKT-132', title: 'Centralize all thresholds in single YAML config', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-014', progress: 100, tags: ['Code Quality', 'Config', 'Critical', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: 'config/thresholds.yaml',
              context: {
                ask: 'Create config/thresholds.yaml with ALL hardcoded thresholds (MIN_BALLS, SR thresholds, Economy thresholds, PCA variance) and update all scripts to read from it',
                goal: 'Single source of truth for all analytical thresholds - change once, apply everywhere',
                reason: 'Jos√© Mourinho audit found 50+ hardcoded magic numbers scattered across 10+ files. Updating SR threshold from 130‚Üí135 requires finding all 5 files.',
                audible: ['Create config/thresholds.yaml', 'Add batting thresholds (min_balls, specialist_sr, vulnerable_sr)', 'Add bowling thresholds (economy ranges, phase thresholds)', 'Add clustering thresholds (pca_variance, min_cluster_size)', 'Update all scripts to load from YAML', 'Add schema validation for thresholds.yaml']
              },
              plan: '1. Audit all files for hardcoded thresholds. 2. Create config/thresholds.yaml. 3. Create scripts/utils/threshold_loader.py. 4. Update all scripts to use loader. 5. Add pytest for threshold loading.'
            },
            { id: 'TKT-133', title: 'Add CHECK constraints to DuckDB schema', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, tags: ['Data', 'Schema', 'Critical', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: 'scripts/core/domain_constraints.py',
              context: {
                ask: 'Add CHECK constraints to DuckDB tables enforcing realistic cricket value ranges (SR 0-500, Economy 0-30, Average 0-200, etc.)',
                goal: 'Database rejects impossible values at insert time - no more SR=1000 or negative averages slipping through',
                reason: 'Jos√© Mourinho audit found NO enforcement of realistic value ranges. Garbage data flows through undetected until stat_packs.py fails.',
                audible: ['Add CHECK constraint for strike_rate (0-500)', 'Add CHECK constraint for economy (0-30)', 'Add CHECK constraint for average (0-200)', 'Add CHECK constraint for wickets_per_match (0-20)', 'Add CHECK constraint for batting_position (1-11)', 'Add CHECK constraint for over_number (0-19 for T20)']
              },
              plan: '1. Document all fields needing constraints. 2. Add constraints to schema DDL. 3. Test with edge case data. 4. Update ingest.py to handle constraint violations gracefully.'
            },
            { id: 'TKT-134', title: 'Enforce gates in GitHub Actions CI/CD', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-014', progress: 100, tags: ['CI/CD', 'Governance', 'Critical', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: '.github/workflows/gate-check.yml',
              context: {
                ask: 'Make quality gates BLOCK commits/deployments in GitHub Actions - not just advisory JSON updates',
                goal: 'Cannot merge to main without passing Florentino Gate, Domain Sanity, System Check. Physical enforcement.',
                reason: 'Jos√© Mourinho audit: "Gates are theater. I can run ANY script without passing ANY gate." Current gates update JSON but dont block execution.',
                audible: ['Add pre-merge check for Florentino Gate status', 'Add pre-merge check for test passage', 'Add pre-merge check for schema validation', 'Block deployment if gates not APPROVED', 'Add gate status to PR checks', 'Create gate-check.yml workflow']
              },
              plan: '1. Create .github/workflows/gate-check.yml. 2. Read gate status from ticket JSON. 3. Fail CI if gates not passed. 4. Add required status check to branch protection. 5. Document in CONSTITUTION.'
            },
            { id: 'TKT-135', title: 'Add domain validation for realistic value ranges', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, tags: ['Data', 'Validation', 'Critical', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: 'scripts/core/domain_constraints.py',
              context: {
                ask: 'Add validation layer in validate_schema.py checking for impossible cricket values BEFORE they enter analytics',
                goal: 'Catch SR>300, Economy>25, negative runs, position>11, over>20 at ingestion time',
                reason: 'Jos√© Mourinho audit: validate_schema.py only checks table/column existence - 85% of domain edge cases are unchecked.',
                audible: ['Add SR range validation (0-300 warning, >500 error)', 'Add Economy range validation (0-20 warning, >25 error)', 'Add batting position validation (1-11)', 'Add over number validation (0-19 for T20)', 'Add runs validation (non-negative)', 'Add wickets validation (0-10 per innings)']
              },
              plan: '1. Define realistic ranges in config/thresholds.yaml. 2. Add domain_validation.py module. 3. Integrate into validate_schema.py. 4. Add tests for edge cases. 5. Add to CI pipeline.'
            },

            // P1 High Priority Tickets (TKT-136 to TKT-140)
            { id: 'TKT-136', title: 'Replace bare except Exception with specific handlers', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: "N'Golo Kant√©", epic: 'EPIC-014', progress: 100, branch: 'main', tags: ['Code Quality', 'Error Handling', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: {
                ask: 'Replace all 40+ bare "except Exception" blocks with specific exception types and proper error context',
                goal: 'Every exception logged with full context (file, line, input data). Distinguish recoverable vs catastrophic failures.',
                reason: 'Jos√© Mourinho audit found 40+ bare exception handlers swallowing errors with no context. Silent failures cascade.',
                audible: ['Audit all except Exception blocks', 'Replace with specific exceptions (ValueError, KeyError, FileNotFoundError)', 'Add context to error messages', 'Add retry logic where appropriate', 'Add alerting for critical failures', 'Update logging format']
              },
              plan: '1. Grep for "except Exception". 2. Categorize by error type. 3. Replace with specific handlers. 4. Add context to log messages. 5. Add tests for error paths.'
            },
            { id: 'TKT-137', title: 'Implement model baselines (K-means vs random)', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Ime Udoka', epic: 'EPIC-014', progress: 100, branch: 'main', output: 'scripts/ml_ops/baseline_comparison.py', tags: ['ML', 'Validation', 'Analytics', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: {
                ask: 'Create baseline comparisons for K-means clustering: random clustering, hierarchical clustering, DBSCAN. Prove K-means is actually better.',
                goal: 'Document that K-means with 6 batter / 7 bowler clusters outperforms alternatives. Justify PCA thresholds.',
                reason: 'Jos√© Mourinho audit: "No baselines. No comparison. No ablation. Only checks: PCA variance - arbitrary thresholds!"',
                audible: ['Implement random baseline clustering', 'Implement hierarchical clustering comparison', 'Implement DBSCAN comparison', 'Calculate silhouette scores for each', 'Document why K-means wins', 'Add feature importance analysis']
              },
              plan: '1. Create scripts/ml_ops/baseline_comparison.py. 2. Implement 4 clustering methods. 3. Compare on silhouette, Davies-Bouldin. 4. Document results. 5. Add to model card.'
            },
            { id: 'TKT-138', title: 'Add FOREIGN KEY constraints to DuckDB', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, branch: 'main', output: 'scripts/core/schema_constraints.py', tags: ['Data', 'Schema', 'Integrity', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add FOREIGN KEY constraints linking fact_ball to dim_player, dim_team, dim_match, dim_venue',
                goal: 'Database rejects orphaned records - cannot insert ball with invalid player_id or team_id',
                reason: 'Jos√© Mourinho audit: No FK constraints. Orphaned records possible. Player ID collisions undetected.',
                audible: ['Add FK from fact_ball.batter_id to dim_player.player_id', 'Add FK from fact_ball.bowler_id to dim_player.player_id', 'Add FK from fact_ball.batting_team_id to dim_team.team_id', 'Add FK from fact_ball.match_id to dim_match.match_id', 'Add FK from fact_ball.venue_id to dim_venue.venue_id', 'Handle constraint violations in ingest']
              },
              plan: '1. Document current schema relationships. 2. Add FK constraints to DDL. 3. Test with orphan data. 4. Update ingest.py error handling.'
            },
            { id: 'TKT-139', title: 'Add integration tests for data pipeline', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: "N'Golo Kant√©", epic: 'EPIC-014', progress: 100, branch: 'main', output: 'tests/integration', tags: ['Testing', 'Pipeline', 'QA', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: {
                ask: 'Create end-to-end integration tests: ingest ‚Üí validate ‚Üí analytics ‚Üí outputs. Currently only unit tests exist.',
                goal: 'Test full pipeline with sample data. Catch integration failures before production.',
                reason: 'Jos√© Mourinho audit: Test coverage is ~3% (1,338 lines of tests for 50K+ lines of code). Zero integration tests.',
                audible: ['Create test fixtures with sample match data', 'Test ingest ‚Üí schema validation flow', 'Test analytics views generation', 'Test stat pack generation', 'Test clustering pipeline', 'Add to CI with --integration flag']
              },
              plan: '1. Create tests/integration/ directory. 2. Create sample match fixtures. 3. Test full ingest flow. 4. Test analytics flow. 5. Test output generation. 6. Add integration test job to CI.'
            },
            { id: 'TKT-140', title: 'Add data lineage tracking', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, branch: 'main', output: 'scripts/core/data_lineage.py', tags: ['Data', 'Lineage', 'Audit', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', founder_validation: 'APPROVED' },
              context: {
                ask: 'Track data provenance: which source file ‚Üí which transform ‚Üí which output. Enable audit trail for any metric.',
                goal: 'Trace any number back to source: "This SR=150 came from match X, ball Y, computed by script Z"',
                reason: 'Jos√© Mourinho audit: Zero provenance. No record of which source file generated which row. Cant trace data origins.',
                audible: ['Add source_file column to fact_ball', 'Add ingested_by column with script version', 'Add transform_chain for derived metrics', 'Create lineage query helper', 'Document lineage schema', 'Add lineage to health reports']
              },
              plan: '1. Design lineage schema. 2. Update ingest to track source. 3. Update analytics to track transforms. 4. Create lineage query API. 5. Add to documentation.'
            },

            // P2 Medium Priority Tickets (TKT-141 to TKT-146) - ALL DONE
            { id: 'TKT-141', title: 'Implement incremental ingestion', state: 'DONE', priority: 'P2', effort: 'marathon', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, tags: ['Data', 'Pipeline', 'Performance', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'scripts/core/ingest.py',
              context: {
                ask: 'Add incremental ingestion capability - only process new/changed matches instead of full 9,357 match re-ingest',
                goal: 'Reduce ingest time from 30+ minutes to <5 minutes for daily updates. Add checkpoint recovery.',
                reason: 'Jos√© Mourinho audit: No incremental ingestion. Must re-process all 9,357 matches each time. No checkpoints.',
                audible: ['Add last_ingested_date tracking', 'Add match-level checksums', 'Skip unchanged matches', 'Add checkpoint markers', 'Enable resume from failure', 'Add incremental flag to CLI']
              },
              plan: '1. Add manifest tracking ingested matches. 2. Calculate match checksums. 3. Skip unchanged matches. 4. Add checkpoint every 1000 matches. 5. Enable --incremental flag.'
            },
            { id: 'TKT-142', title: 'Add SHAP/LIME for cluster explainability', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-014', progress: 100, tags: ['ML', 'Explainability', 'Analytics', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'scripts/analysis/player_clustering_v2.py',
              context: {
                ask: 'Add SHAP or LIME explanations showing which features drive cluster assignments for each player',
                goal: 'Answer: "Why is Virat Kohli in cluster 3?" with feature importance breakdown',
                reason: 'Jos√© Mourinho audit: "No SHAP/LIME explanation. Which features drive cluster assignments?" Black box clustering.',
                audible: ['Install shap library', 'Calculate feature importance per cluster', 'Generate player-level explanations', 'Add to player tags output', 'Visualize feature importance', 'Document methodology']
              },
              plan: '1. Install shap. 2. Extract cluster centroids. 3. Calculate SHAP values. 4. Add to player_tags.json. 5. Create visualization. 6. Document interpretation.'
            },
            { id: 'TKT-143', title: 'Proper Python package structure (remove sys.path.insert)', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-014', progress: 100, tags: ['Code Quality', 'Architecture', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'pyproject.toml',
              context: {
                ask: 'Replace 9 sys.path.insert() anti-patterns with proper Python package structure using __init__.py and editable install',
                goal: 'Import scripts as proper package: "from scripts.utils import logging_config" instead of path hacks',
                reason: 'Jos√© Mourinho audit: Every script does sys.path.insert() - brittle relative paths that break with directory changes.',
                audible: ['Create pyproject.toml', 'Add __init__.py to all directories', 'Remove all sys.path.insert calls', 'Install as editable package (pip install -e .)', 'Update all imports', 'Update CI to use package install']
              },
              plan: '1. Create pyproject.toml. 2. Add __init__.py files. 3. Remove sys.path.insert. 4. Update imports. 5. Test all scripts. 6. Update CI.'
            },
            { id: 'TKT-144', title: 'Add transaction boundaries to ingestion', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, tags: ['Data', 'Pipeline', 'Integrity', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'scripts/core/ingest.py',
              context: {
                ask: 'Add database transactions with rollback capability to ingest.py - all-or-nothing commits per match',
                goal: 'If ingest fails on ball 5000, rollback entire match. No partial writes corrupting data.',
                reason: 'Jos√© Mourinho audit: No transaction boundaries. Partial writes silently succeed. If ingest fails at row 1M of 2M, corrupted data.',
                audible: ['Wrap match ingestion in transaction', 'Add rollback on any failure', 'Add commit only on full success', 'Log transaction boundaries', 'Add transaction test cases', 'Handle nested transactions']
              },
              plan: '1. Study DuckDB transaction API. 2. Wrap match ingest in BEGIN/COMMIT. 3. Add ROLLBACK on error. 4. Test with failure injection. 5. Update error handling.'
            },
            { id: 'TKT-145', title: 'Add confidence intervals to metrics', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-014', progress: 100, tags: ['Analytics', 'Statistics', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'scripts/analysis/confidence_intervals.py',
              context: {
                ask: 'Add confidence intervals to all computed metrics: "SR = 145 ¬± 8" not just "SR = 145"',
                goal: 'Every metric has uncertainty bounds. Users understand reliability based on sample size.',
                reason: 'Jos√© Mourinho audit: No confidence intervals. Elite shops (PFF, 538) always include uncertainty.',
                audible: ['Calculate standard error for all rate metrics', 'Add 95% CI to player stats', 'Add sample size warnings', 'Display intervals in stat packs', 'Add to player_tags.json', 'Document CI methodology']
              },
              plan: '1. Add CI calculation to analytics views. 2. Store upper/lower bounds. 3. Add to output formats. 4. Update stat pack templates. 5. Document interpretation.'
            },
            { id: 'TKT-146', title: 'Add backup and recovery mechanism', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-014', progress: 100, tags: ['Ops', 'Data', 'Recovery', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' },
              branch: 'feature/EPIC-014-p2-foundation-fortification', output: 'scripts/core/backup_recovery.py',
              context: {
                ask: 'Add automated backup of DuckDB file and recovery playbook. Enable point-in-time recovery.',
                goal: 'Daily backups, 7-day retention, documented restore procedure. Recover from any corruption.',
                reason: 'Jos√© Mourinho audit: DuckDB file is single point of failure (159MB file, no replication). No backup/recovery.',
                audible: ['Create backup script', 'Add to GitHub Actions schedule', 'Store backups in releases/artifacts', 'Create restore playbook', 'Test restore procedure', 'Add backup validation']
              },
              plan: '1. Create scripts/ops/backup.py. 2. Add to scheduled workflow. 3. Store as GitHub artifact. 4. Document restore steps. 5. Test recovery.'
            },
            { id: 'TKT-147', title: 'Create automated system health scoring dashboard', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Jose Mourinho', epic: 'EPIC-014', progress: 100, tags: ['Metrics', 'Benchmarking', 'Critical', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: 'scripts/ml_ops/system_health_score.py', healthScore: 81.5,
              context: {
                ask: 'Create automated scoring system measuring all 6 categories from Mourinho audit: Governance (15%), Code Quality (20%), Data Robustness (20%), ML Rigor (20%), Testing (15%), Documentation (10%)',
                goal: 'Real-time health score (0-100) with category breakdown. Track progress from 67.4 ‚Üí 85.0 target.',
                reason: 'Cannot improve what we cannot measure. Need objective, automated scoring to track hardening progress.',
                audible: [
                  'Create scripts/ml_ops/system_health_score.py',
                  'Measure: bare except count, hardcoded threshold count, test coverage %, CHECK constraints count',
                  'Measure: gate enforcement (CI blocks?), documentation completeness, baseline comparison exists',
                  'Output JSON score report with breakdown',
                  'Add to CI as health-score.yml workflow',
                  'Display score in Mission Control dashboard',
                  'Track score history over time'
                ]
              },
              plan: '1. Define scoring rubric for each category. 2. Create automated checks for each metric. 3. Calculate weighted score. 4. Output JSON report. 5. Add CI workflow. 6. Add to dashboard. 7. Document methodology.',
              scoringRubric: {
                governance: { weight: 15, checks: ['gates_enforced_in_ci', 'constitution_complete', 'task_loop_documented'] },
                codeQuality: { weight: 20, checks: ['bare_except_count', 'hardcoded_thresholds', 'type_hints_coverage', 'sys_path_hacks'] },
                dataRobustness: { weight: 20, checks: ['check_constraints', 'fk_constraints', 'domain_validation', 'lineage_tracking'] },
                mlRigor: { weight: 20, checks: ['baseline_comparison', 'feature_importance', 'confidence_intervals', 'model_versioning'] },
                testing: { weight: 15, checks: ['test_coverage_pct', 'integration_tests', 'edge_case_tests'] },
                documentation: { weight: 10, checks: ['threshold_docs', 'methodology_docs', 'api_docs'] }
              }
            },
            { id: 'TKT-148', title: 'Document the Agent Coding Stack (Architecture, Code, Ops)', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-014', progress: 100, tags: ['Documentation', 'Architecture', 'Onboarding', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS' }, output: 'docs/AGENT_PLAYBOOK.md',
              context: {
                ask: 'Create comprehensive documentation of the Cricket Playbook Agent Coding Stack covering Architecture, Code, and Ops layers in an engaging, human readable format',
                goal: 'Anyone new to the project can understand how 12 AI agents collaborate with formal governance, veto rights, and quality gates. Make it digestible with sports and Godfather references.',
                reason: 'Current docs are scattered. Need single "Agent Stack Bible" that explains the whole system like a playbook, not a technical manual.',
                audible: [
                  'Write docs/AGENT_STACK.md as the definitive guide',
                  'Section 1: The Family (Agent Hierarchy) - who reports to whom, like a mafia org chart',
                  'Section 2: The Playbook (Architecture) - how data flows from raw to insights',
                  'Section 3: The Rulebook (Governance) - Constitution, Task Integrity Loop, veto rights',
                  'Section 4: The Locker Room (Code) - tech stack, file structure, key modules',
                  'Section 5: The Front Office (Ops) - CI/CD, monitoring, deployment',
                  'Section 6: The Scouting Report (Quality) - gates, testing, validation',
                  'Use sports metaphors throughout: "calling an audible", "red zone offense", "closing out the game"',
                  'Add Godfather references: "offers they cant refuse", "going to the mattresses", "leave the gun, take the cannoli"',
                  'NO AI-speak: no dashes, no "leverage", no "synergy", write like a human sports analyst'
                ]
              },
              plan: '1. Outline 6 sections with sports/Godfather themes. 2. Write Architecture section. 3. Write Governance section. 4. Write Code section. 5. Write Ops section. 6. Add diagrams. 7. Get Andy Flower domain review.'
            },

            // ==================== EPIC-012: CI/CD Automation ====================
            // Owner: Ime Udoka | Goal: Fully automated CI/CD pipelines
            { id: 'TKT-149', title: 'Set up GitHub Actions CI pipeline', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-012', progress: 100, branch: 'main', output: '.github/workflows/ci.yml', tags: ['CI/CD', 'Automation', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 2,
              context: { ask: 'Create GitHub Actions workflow with lint, format check, and test steps', goal: 'Automated quality gates on every push/PR to main', reason: 'Manual validation doesnt scale ‚Äî CI catches regressions before merge', audible: 'Pipeline runs ruff check, ruff format --check, pytest with coverage on ubuntu-latest' }
            },
            { id: 'TKT-150', title: 'Configure pre-commit hooks for code quality', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-012', progress: 100, branch: 'main', output: '.pre-commit-config.yaml', tags: ['CI/CD', 'Code Quality', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 1,
              context: { ask: 'Set up pre-commit hooks for ruff lint+format, trailing whitespace, YAML check, large file prevention', goal: 'Catch quality issues before they reach CI', reason: 'Shift-left quality ‚Äî developers get instant feedback on commit', audible: 'Hooks: ruff, ruff-format, trailing-whitespace, end-of-file-fixer, check-yaml, check-added-large-files (500KB), custom naming convention' }
            },
            { id: 'TKT-151', title: 'Add mypy type checking to CI pipeline', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-012', progress: 100, branch: 'main', output: '.github/workflows/ci.yml', tags: ['CI/CD', 'Type Safety', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 1,
              context: { ask: 'Add mypy static type checking for core, utils, ml_ops, generators modules', goal: 'Catch type errors at CI time, not runtime', reason: 'Type safety prevents subtle bugs in data pipelines and analytics', audible: 'mypy runs with --ignore-missing-imports, continue-on-error for gradual adoption' }
            },
            { id: 'TKT-152', title: 'Add pytest coverage reporting and artifacts', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Ime Udoka', epic: 'EPIC-012', progress: 100, branch: 'main', output: '.github/workflows/ci.yml', tags: ['CI/CD', 'Testing', 'Coverage', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 1,
              context: { ask: 'Configure pytest with --cov reporting, XML output, and GitHub artifact upload', goal: 'Track test coverage trends and store reports for 30 days', reason: 'Visibility into test coverage prevents quality regressions', audible: 'pytest-cov generates term-missing + XML reports, uploaded as artifacts with 30-day retention' }
            },
            { id: 'TKT-153', title: 'Add custom document naming convention hook', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-012', progress: 100, branch: 'main', output: 'scripts/hooks/check_naming_convention.py', tags: ['CI/CD', 'Governance', '‚úÖ Delivered'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 1,
              context: { ask: 'Create custom pre-commit hook enforcing document naming: name_MMDDYY_v*.md/pdf', goal: 'Consistent document naming across reviews, sprint docs, and specs', reason: 'Florentino directive: governance starts with naming discipline', audible: 'Warning-only hook monitoring reviews/founder/, reviews/sprint/, docs/sprints/ directories' }
            },

            // EPIC-015: Operational Maturity (TKT-154 to TKT-158)
            { id: 'TKT-154', title: 'Add Docker containerization for reproducible environments', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-015', progress: 100, branch: 'feature/tkt-154-docker', tags: ['DevOps', 'Docker', 'Infrastructure'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED', founder_validation: 'PASSED' },
              context: { ask: 'Create Dockerfile and docker-compose.yml for the Cricket Playbook', goal: 'Reproducible dev and prod environments with one command', reason: 'No containerization means environment drift and deployment friction', audible: ['Create Dockerfile', 'Create docker-compose.yml', 'Test build', 'Document usage'] }
            },
            { id: 'TKT-155', title: 'Enforce test coverage baselines and add edge case tests', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: "N'Golo Kant√©", epic: 'EPIC-015', progress: 100, branch: 'feature/tkt-155-test-coverage', tags: ['Testing', 'Quality', 'CI/CD'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED', founder_validation: 'PASSED' },
              context: { ask: 'Set coverage floor at 70% in CI, add edge case tests for empty datasets, duplicates, malformed input', goal: 'No PR merges below coverage threshold, resilient to bad data', reason: '105 tests exist but no enforced floor and no edge case coverage', audible: ['Add pytest-cov threshold to CI', 'Write edge case tests', 'Add coverage badge'] }
            },
            { id: 'TKT-156', title: 'Build ML model retraining pipeline', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Pep Guardiola', epic: 'EPIC-015', progress: 100, branch: 'feature/tkt-156-ml-retrain', tags: ['ML', 'Pipeline', 'Automation'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED', founder_validation: 'PASSED' },
              context: { ask: 'Create automated retraining pipeline for player clustering model', goal: 'Models refresh when new season data arrives, with validation gates before promotion', reason: 'Current models are static ‚Äî no way to retrain without manual intervention', audible: ['Create retrain script', 'Add validation gates', 'Version new models', 'Add to CI/CD'] }
            },
            { id: 'TKT-157', title: 'Add production monitoring and alerting', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Jose Mourinho', epic: 'EPIC-015', progress: 100, branch: 'feature/tkt-157-monitoring', tags: ['Ops', 'Monitoring', 'Alerting'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED', founder_validation: 'PASSED' },
              context: { ask: 'Build observability layer: structured logging, health endpoints, alert thresholds', goal: 'Know when things break before users do', reason: 'No monitoring means silent failures ‚Äî pipeline could break and nobody knows', audible: ['Structured logging', 'Health check endpoint', 'Alert config', 'Dashboard integration'] }
            },
            { id: 'TKT-158', title: 'Create operational runbooks and incident response docs', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-015', progress: 100, branch: 'feature/tkt-158-runbooks', tags: ['Documentation', 'Ops', 'Incident Response'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED', founder_validation: 'PASSED' },
              context: { ask: 'Write runbooks for common ops tasks and incident response procedures', goal: 'Any team member can handle production issues with clear step-by-step guides', reason: 'No operational playbook means tribal knowledge and slow incident response', audible: ['Pipeline runbook', 'Dashboard deploy runbook', 'Incident response template', 'Troubleshooting guide'] }
            },

            // TKT-159: Cross-Dashboard UX Audit (Jayson Tatum)
            { id: 'TKT-159', title: 'Comprehensive UX audit across Boardroom, The Lab, and Mission Control Panel', state: 'VALIDATION', priority: 'P0', effort: 'deep-work', assignee: 'Jayson Tatum', epic: null, progress: 95, branch: 'feature/tkt-159-ux-audit', tags: ['UX', 'Audit', 'Dashboard', 'Cross-Cutting'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'PASSED', enforcement_check: 'PASSED', system_check: 'PASSED' }, report: 'docs/ux/TKT-159_ux_audit_report.md',
              founderReviewNote: 'Review the comprehensive UX audit report across all three dashboards. Verify scoring methodology, category weights, and prioritized improvement recommendations.',
              context: { ask: 'Conduct a detailed UX review of all three dashboards (Boardroom, The Lab, Mission Control Panel). Deliver a 0-100 rating (decimals included) with weighted breakdown by category, specific improvement suggestions with rationale for each.', goal: 'A single source-of-truth UX scorecard that identifies exactly where the product shines and where it falls short ‚Äî with actionable fixes prioritized by impact', reason: 'No formal UX audit has been done across all three surfaces. We are shipping features but not measuring the experience holistically.', audible: ['Audit Boardroom UX', 'Audit The Lab UX', 'Audit Mission Control UX', 'Score each category 0-100', 'Provide improvement suggestions with rationale', 'Deliver final composite rating'] }
            },

            // Sprint 5.0+ Ideas (IDEA-XXX notation for unscoped work)
            { id: 'IDEA-001', title: 'Implement Match Phase Index', state: 'IDEA', priority: 'P1', effort: 'marathon', assignee: 'Stephen Curry', epic: null, progress: 0, tags: ['Feature', 'Analytics'], gates: {},
              context: { ask: 'Create composite index measuring player impact by match phase', goal: 'Single metric combining PP/Middle/Death performance', reason: 'Simplify phase analysis into actionable score', audible: ['Define index formula', 'Weight phases', 'Validate with Andy Flower'] }
            },
            // TKT-088 REMOVED: Duplicate of TKT-050 (Pressure Performance)
            { id: 'IDEA-002', title: 'Create CricPom (KenPom clone)', state: 'IDEA', priority: 'P0', effort: 'marathon', assignee: 'Jose Mourinho', epic: null, progress: 0, tags: ['Feature', 'Research'], gates: {},
              context: { ask: 'Build cricket equivalent of KenPom basketball analytics', goal: 'Team/player rating system with predictive power', reason: 'PRD inspiration: KenPom-style rankings', audible: ['Research KenPom methodology', 'Adapt for cricket', 'Design rating algorithm'] }
            },
            // TKT-090 REMOVED: REST API deferred - no clear use case yet
            { id: 'IDEA-003', title: 'Create Win Probability model', state: 'IDEA', priority: 'P2', effort: 'marathon', assignee: 'Ime Udoka', epic: null, progress: 0, tags: ['ML', 'Model'], gates: {},
              context: { ask: 'Build ML model predicting win probability during match', goal: 'Real-time win % based on match situation', reason: 'Advanced analytics for in-game decisions', audible: ['Collect training data', 'Train model', 'Validate accuracy'] }
            },
            { id: 'IDEA-004', title: 'Build Player Form Tracker', state: 'IDEA', priority: 'P1', effort: 'deep-work', assignee: 'Stephen Curry', epic: null, progress: 0, tags: ['Feature', 'Analytics'], gates: {},
              context: { ask: 'Track player form across recent matches', goal: 'Rolling form indicator (hot/cold/neutral)', reason: 'Current form impacts team selection', audible: ['Define form window', 'Calculate form metrics', 'Add to player profiles'] }
            },
            { id: 'IDEA-005', title: 'Create interactive dashboard (React)', state: 'IDEA', priority: 'P2', effort: 'marathon', assignee: 'Kevin de Bruyne', epic: null, progress: 0, tags: ['Frontend', 'Feature'], gates: {},
              context: { ask: 'Build React-based interactive dashboard', goal: 'Dynamic filtering, charts, drill-downs', reason: 'Static HTML limits user exploration', audible: ['Design components', 'Integrate with data', 'Add interactivity'] }
            },
            { id: 'IDEA-006', title: 'Add Great Expectations data validation', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Brock Purdy', epic: 'EPIC-014', progress: 100, branch: 'feature/idea-006-great-expectations', output: 'scripts/core/ge_validation.py', tags: ['Data', 'Quality', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Implement Great Expectations for data quality checks', goal: 'Automated validation of data pipelines', reason: 'Catch data issues before they reach outputs', audible: ['Install GE', 'Define expectations', 'Add to CI'] }
            },
            { id: 'IDEA-007', title: 'Implement player comparison tool', state: 'IDEA', priority: 'P2', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: null, progress: 0, tags: ['Feature', 'UI'], gates: {},
              context: { ask: 'Build head-to-head player comparison view', goal: 'Side-by-side stats, radar charts, matchup history', reason: 'Common user need: "Who is better?"', audible: ['Design comparison UI', 'Select metrics', 'Add visualizations'] }
            },

            // Code Quality & Optimization (TKT-096 to TKT-102)
            { id: 'TKT-096', title: 'Codebase optimization audit', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Optimization', 'Code Quality', 'Scalability'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'docs/optimization_audit_report.md', review: 'docs/tkt_096_optimization_summary.md',
              context: {
                ask: 'Audit and optimize all Python code across the repo for efficiency and scalability',
                goal: 'Improve code performance, reduce redundancy, ensure best practices, prepare for scale',
                reason: 'Current codebase has grown organically; need systematic review before adding more features',
                audible: 'Created constants.py, player_tags.py, config.py; added type hints; optimized DataFrames'
              }
            },
            { id: 'TKT-097', title: 'Consolidate player_tags.json update logic', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-010', progress: 100, tags: ['Refactor', 'Data', 'Code Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'scripts/utils/player_tags.py',
              context: {
                ask: 'Extract repeated update_player_tags_json() function into shared utility module',
                goal: 'Single source of truth for player tags updates across batter_bowling_type_matchup.py, bowler_handedness_matchup.py, bowler_phase_tags.py',
                reason: 'Same 50+ line function duplicated in 3 files - any bug fix requires 3 updates',
                audible: 'Create utils/player_tags.py with load/update/save functions'
              }
            },
            { id: 'TKT-098', title: 'Add type hints throughout codebase', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Code Quality', 'Type Safety', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add Python type hints to all function signatures and key variables',
                goal: 'Improve IDE autocompletion, catch type errors before runtime, enhance documentation',
                reason: 'No functions have type annotations - reduces developer experience',
                audible: 'Start with most-used files: generators/, then core/, then analysis/'
              }
            },
            { id: 'TKT-099', title: 'Optimize DataFrame operations', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-010', progress: 100, tags: ['Performance', 'Analytics', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Replace iterative DataFrame filtering with groupby operations',
                goal: 'Reduce O(n*m) complexity to O(n) in batter_bowling_type_matchup.py, bowler_handedness_matchup.py, generate_2023_outputs.py',
                reason: 'Current loops filter full DataFrame on each iteration - inefficient for large datasets',
                audible: 'Benchmark before/after to quantify improvement'
              }
            },
            { id: 'TKT-100', title: 'Externalize configuration', state: 'DONE', priority: 'P3', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Config', 'Ops', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' }, output: 'scripts/config.py',
              context: {
                ask: 'Move hardcoded values to config file or environment variables',
                goal: 'Enable runtime configuration of IPL_MIN_DATE, TOURNAMENT, MATCH_TYPE, GENDER, thresholds, file paths without code changes',
                reason: 'Date filters require code changes each season',
                audible: '‚úÖ DONE Feb 6, 2026: 19 tournaments (Men\'s + Women\'s), 51 teams, GENDER filter, helper methods. Extensible design - add new tournaments/teams to TOURNAMENT_REGISTRY and TEAM_REGISTRY as needed.'
              }
            },
            { id: 'TKT-101', title: 'Standardize logging across scripts', state: 'DONE', priority: 'P3', effort: 'hustle', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Logging', 'Code Quality', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Replace all print() statements with proper logging using utils/logging_config.py',
                goal: 'Consistent log format, configurable log levels, file output option',
                reason: 'Some scripts use logging, others use print() - inconsistent debugging experience',
                audible: 'Related to TKT-083 - extends logging adoption'
              }
            },
            { id: 'TKT-102', title: 'Break up long functions', state: 'DONE', priority: 'P3', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Refactor', 'Maintainability', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Refactor functions >100 lines into smaller, focused helper functions',
                goal: 'Improve readability, testability, and maintainability',
                reason: 'reorder_batting_positions() is 347 lines, generate_team_depth_chart() is 178 lines',
                audible: 'Start with generate_predicted_xii.py as it has the longest functions'
              }
            },

            // Ops & Tooling
            { id: 'TKT-103', title: 'Configure GitHub email notifications', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Founder', epic: 'EPIC-010', progress: 100, tags: ['Ops', 'GitHub'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' }, daysSpent: 1, iterations: 1,
              founderReviewNote: 'Configure 3 GitHub secrets (EMAIL_USERNAME, EMAIL_APP_PASSWORD, NOTIFY_EMAIL) in repo Settings ‚Üí Secrets ‚Üí Actions. The notify-on-push workflow is ready and waiting for these credentials.',
              links: [
                { label: 'GitHub Repo Settings', url: 'https://github.com/dwijesh-r/cricket-playbook/settings' },
                { label: 'Notify Workflow', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/.github/workflows/notify-on-push.yml' }
              ],
              context: {
                ask: 'Add GitHub secrets for email notifications on push to main branch',
                goal: 'Receive email alerts when commits are pushed to the repository',
                reason: 'Workflow .github/workflows/notify-on-push.yml is ready but needs 3 secrets configured',
                audible: 'Go to Settings ‚Üí Secrets ‚Üí Actions and add: EMAIL_USERNAME, EMAIL_APP_PASSWORD, NOTIFY_EMAIL'
              }
            },
            { id: 'TKT-105', title: 'Add Review SLA Dashboard Widget', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-010', progress: 100, tags: ['Ops', 'Dashboard', 'Process', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', domain_sanity: 'YES', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add Review Age indicator to Mission Control tickets in REVIEW state',
                goal: 'Prevent tickets from languishing in REVIEW by showing how long they have been waiting',
                reason: 'RETRO-001 identified that tickets sat in REVIEW without proactive domain sanity reviews',
                audible: '‚úÖ DONE: Review SLA widget with age badges (fresh/aging/stale) + Stale Reviews filter. Approved Feb 6, 2026.'
              }
            },
            { id: 'TKT-106', title: 'Complete ticket context documentation', state: 'DONE', priority: 'P3', effort: 'deep-work', assignee: 'Tom Brady', epic: 'EPIC-010', progress: 100, tags: ['Documentation', 'Process', 'Governance', '‚úÖ Founder Approved'], gates: { florentino_gate: 'APPROVED', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: {
                ask: 'Add context objects (ask, goal, reason, audible) to all DONE tickets missing context',
                goal: 'Every ticket in Mission Control has full context documentation for traceability',
                reason: 'RETRO-001: Many tickets lack ask/goal/reason/audible - makes retrospectives and audits difficult',
                audible: ['Review tickets missing context (~75 DONE tickets)', 'Add context using docs/TICKET_CONTEXT_TEMPLATE.md', 'Batch 10-15 tickets per session', 'Prioritize P0/P1 tickets first']
              }
            },

            // ==================== NEW EPICS (Awaiting Approval) ====================
            // EPIC-012: Player Profile View
            { id: 'EPIC-012', title: 'Player Profile View - Click to see player stats', state: 'VALIDATION', priority: 'P1', effort: 'marathon', assignee: 'Tom Brady', epic: null, progress: 50, tags: ['EPIC', 'Feature', 'UI', 'üåπ Founder Review'], gates: { florentino_gate: 'APPROVED' }, daysSpent: 2, iterations: 1,
              prd: 'docs/specs/PLAYER_PROFILE_VIEW_PRD.md',
              founderReviewNote: 'Review the PRD specification. Approve the proposed player profile modal design, data fields to display, and interaction patterns.',
              links: [
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' }
              ],
              context: {
                ask: 'Build click-to-view player profile modal in The Lab Teams section',
                goal: 'Show IPL stats since 2023, role tags, matchups, entry points, archetypes on player click',
                reason: 'Founder directive: Make player data accessible with one click',
                audible: 'PRD at docs/specs/PLAYER_PROFILE_VIEW_PRD.md - Needs Florentino Gate then Founder approval'
              }
            },
            // EPIC-013: IPL 2026 Player Analysis
            { id: 'EPIC-013', title: 'IPL 2026 Player Analysis - Season-specific views', state: 'VALIDATION', priority: 'P1', effort: 'marathon', assignee: 'Stephen Curry', epic: null, progress: 50, tags: ['EPIC', 'Analytics', 'Data', 'üåπ Founder Review'], gates: { florentino_gate: 'APPROVED' }, daysSpent: 2, iterations: 1,
              plan: 'docs/plans/IPL_2026_PLAYER_ANALYSIS_PLAN.md',
              founderReviewNote: 'Review the analysis plan. Approve the proposed IPL 2026 analytics scope, data requirements, and implementation approach.',
              links: [
                { label: 'IPL 2026 Squads', url: 'https://github.com/dwijesh-r/cricket-playbook/blob/main/data/ipl_2026_squads.csv' },
                { label: 'The Lab - Teams', url: 'https://dwijesh-r.github.io/cricket-playbook/scripts/the_lab/dashboard/teams.html' }
              ],
              context: {
                ask: 'Create IPL-specific analytics views for 2026 squad analysis',
                goal: 'Connect historical performance to 2026 squads with phase breakdowns and matchups',
                reason: 'Founder directive: Need 2026-ready analytics for new season',
                audible: 'Plan at docs/plans/IPL_2026_PLAYER_ANALYSIS_PLAN.md - Needs Founder approval before work starts'
              }
            },

            // ==================== RETROSPECTIVES (RETRO-XXX) ====================
            // Post-completion analysis tickets - Pep Guardiola's domain
            // Output: .editorial/retro.md with what worked/failed + one systemic improvement
            { id: 'RETRO-001', title: 'Sprint 4 Mid-Sprint Retrospective', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Pep Guardiola', retro: 'RETRO-001', progress: 100, tags: ['Retrospective', '‚öΩ Pep', '‚úÖ Complete'], gates: { domain_sanity: 'YES' },
              isRetro: true,
              relatedTickets: ['TKT-064', 'TKT-086', 'TKT-096', 'TKT-085'],
              output: '.editorial/retro_001_sprint4_mid.md',
              context: {
                ask: 'Run retrospective on recently completed Sprint 4 work (TKT-064, TKT-086, TKT-096, TKT-085)',
                goal: 'Document what worked, what failed, and propose one systemic improvement',
                reason: 'Founder directive: Continuous improvement through structured retrospectives',
                audible: 'Completed Feb 6, 2026 - Proposed Review SLA Dashboard widget (TKT-105)'
              }
            },

            // Performance Review & Agent Retraining (TKT-160 to TKT-171) ‚Äî Feb 9, 2026
            { id: 'TKT-160', title: 'Agent Performance Review & Skills Radar ‚Äî Sprint 4.0', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Brad Stevens', epic: 'EPIC-003', progress: 100, tags: ['Review', 'Governance', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'reviews/sprint/brad_stevens_performance_review_020926_v1.md',
              context: { ask: 'Comprehensive performance review of all 14 agents + Founder', goal: 'Ratings, skills radar, tier list, gap analysis, and recommendations', reason: 'Mid-sprint assessment to identify underperformers and retraining needs', audible: 'All 14 agents + Founder rated 1-5. Tier list: Elite (Curry 4.5, Brady 4.5, Purdy 4.5) to Inactive (LeBron 1.0). 11 suggestions generated.' }
            },
            { id: 'TKT-161', title: 'Retrain Virat Kohli as active Editorial Lead', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Virat Kohli', epic: 'EPIC-006', progress: 100, tags: ['Retraining', 'Editorial', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Expand Kohli from passive Tone Guard to active Editorial Lead', goal: 'Agent config updated with editorial production mandate', reason: 'Sprint 4.0 review: 2.5/5 ‚Äî editorial pipeline stalled', audible: 'Mandate expanded: write narrative prose for all 10 stat packs. Target: 4.0/5 by Sprint 5.0.' }
            },
            { id: 'TKT-162', title: 'Activate Pep Guardiola ‚Äî Sprint 4.0 Retrospective', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Pep Guardiola', epic: 'EPIC-003', progress: 100, tags: ['Retrospective', 'Governance', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'reviews/sprint/pep_guardiola_retro_sprint4_020926_v1.md',
              context: { ask: 'Produce formal Sprint 4.0 retrospective', goal: '257-line retro with What Worked / What Didn\'t / Systemic Improvement Proposal', reason: 'Sprint 4.0 review: 2.0/5 ‚Äî zero retrospectives produced', audible: 'Proposed Halftime Rebalancing Gate. 6 Sprint 5.0 recommendations. Honest self-assessment included.' }
            },
            { id: 'TKT-163', title: 'Retrain LeBron James as Reader Perspective Auditor', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'LeBron James', epic: 'EPIC-006', progress: 100, tags: ['Retraining', 'Editorial', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Activate LeBron with Reader Perspective Auditor mandate', goal: 'Agent config updated ‚Äî test stat packs for casual fan readability', reason: 'Sprint 4.0 review: 1.0/5 ‚Äî zero output, fully idle', audible: 'Dual mandate: (1) Reader Perspective Audit, (2) Social Atomization when content flows. Target: 3.5/5 by Sprint 5.0.' }
            },
            { id: 'TKT-164', title: 'Andy Flower training & research ‚Äî level up to 4.5/5', state: 'DONE', priority: 'P0', effort: 'marathon', assignee: 'Andy Flower', epic: 'EPIC-003', progress: 100, tags: ['Retraining', 'Cricket', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'governance/tasks/TKT_164_ANDY_FLOWER_TRAINING_PRD.md',
              context: { ask: 'Expand Andy Flower from passive validator to active Tactical Insights Lead', goal: 'Agent config updated, PRD written, mandate expanded', reason: 'Sprint 4.0 review: 3.5/5 ‚Äî quality excellent but volume low (3 tickets)', audible: 'Three-phase plan: mandate expansion, research depth, process rigor. Target: 4.5/5 by Sprint 5.0, 8+ tickets/sprint.' }
            },
            { id: 'TKT-165', title: 'Expand Andy Flower mandate ‚Äî editorial oversight of tactical insights', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-006', progress: 100, tags: ['Editorial', 'Cricket', 'Tactical', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Andy Flower reviews all 10 stat pack tactical insight sections', goal: 'Comprehensive tactical review with coaching notes per team', reason: 'Tactical insights in stat packs are generic ‚Äî Andy should make them specific', audible: 'Reviewing all 10 stat packs, depth charts, and predicted XIIs for tactical accuracy.' }
            },
            { id: 'TKT-166', title: 'Expand Brock Purdy mandate ‚Äî data monitoring and alerting', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Brock Purdy', epic: 'EPIC-003', progress: 100, tags: ['Config', 'Data', 'Monitoring', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Add data monitoring mandate to Brock Purdy agent config', goal: 'Agent config updated with freshness checks, schema drift detection, null validation', reason: 'Data pipeline has no proactive monitoring ‚Äî reactive only', audible: 'New section: Data Monitoring & Alerting with 7 responsibilities. Integrated with system health score.' }
            },
            { id: 'TKT-167', title: 'Activate Jose Mourinho ‚Äî CricPom prototype research sprint', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Jose Mourinho', epic: 'EPIC-006', progress: 100, tags: ['Analytics', 'Research', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'docs/research/cricpom_prototype_spec_020926_v1.md',
              context: { ask: 'Write CricPom prototype specification ‚Äî cricket adaptation of KenPom', goal: 'Comprehensive spec: metrics, algorithms, data mapping, MVP scope, risk register', reason: 'Sprint 4.0 review: 3.5/5 ‚Äî research output not translated into actionable specs', audible: 'Full spec: AdjSR/AdjEcon/CEM metrics, iterative convergence engine, Four Factors, venue park factors. MVP: IPL 2023-2025, 30-43 hours estimated.' }
            },
            { id: 'TKT-168', title: 'QA Certificate ‚Äî data version 2.0', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: "N'Golo Kant√©", epic: 'EPIC-009', progress: 100, tags: ['QA', 'Data', 'Certificate', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'reviews/domain/QA_CERTIFICATE_v2.0_020926.md',
              context: { ask: 'Produce formal QA certificate for current database state', goal: 'PASS/WARN/FAIL status with evidence for all check categories', reason: 'Sprint 4.0 review: 3.5/5 ‚Äî no formal QA certificate produced yet', audible: 'PASS (with WARN). 12 FK checks: 0 orphans. 52 views: all queryable. 2 WARNs: 17 new IPL 2026 players without historical data (expected), 2 batting_position=12 rows (0.001%).' }
            },
            { id: 'TKT-169', title: 'Fix N\'Golo Kant√© name inconsistency in Mission Control', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Tom Brady', epic: 'EPIC-003', progress: 100, tags: ['Bug Fix', 'Data Quality', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Normalize Kant√© name across all ticket JSON files', goal: '5 files corrected to N\'Golo Kant√©', reason: 'Inconsistent encoding: Kante/Kant√© across tickets', audible: 'Fixed in TKT-136, TKT-139, TKT-155, TKT-160, TKT-164.' }
            },
            { id: 'TKT-170', title: 'Fix mc.py score KeyError bug on unassigned tickets', state: 'DONE', priority: 'P2', effort: 'quick-win', assignee: 'Brad Stevens', epic: 'EPIC-003', progress: 100, tags: ['Bug Fix', 'Mission Control', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Fix two bugs in epic.py preventing mc.py score from running', goal: 'Scoreboard functional again', reason: 'KeyError on owner field + Invalid status IN_PROGRESS in VALID_STATUSES', audible: 'Two fixes: (1) data.get("owner","Unassigned") in from_dict, (2) expanded VALID_STATUSES and JSON schema to include IN_PROGRESS, NOT_STARTED, BACKLOG.' }
            },
            { id: 'TKT-171', title: 'Create Florentino Kill List ‚Äî rejected ideas log', state: 'DONE', priority: 'P2', effort: 'hustle', assignee: 'Florentino Perez', epic: 'EPIC-003', progress: 100, tags: ['Governance', 'Scope', '‚úÖ Done'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', enforcement_check: 'PASS', system_check: 'PASS', founder_validation: 'APPROVED' },
              output: 'governance/florentino_kill_list.md',
              context: { ask: 'Create institutional memory for scope decisions', goal: 'Formal log of killed, deferred, and analytics-only ideas with reasons', reason: 'No formal record of why ideas were rejected ‚Äî agents kept re-proposing killed items', audible: '7 entries: 2 KILLED, 4 DEFERRED, 1 ANALYTICS_ONLY. Single evaluation question: Does this directly improve the paid artifact?' }
            },

            // EPIC-012: The Research Desk ‚Äî Interactive SQL Lab for The Lab
            { id: 'TKT-172', title: 'Export Parquet + View DDL Pipeline', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brock Purdy', epic: 'EPIC-012', progress: 100, tags: ['Data', 'Pipeline', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Export all 15 DuckDB tables as Parquet (ZSTD) and 52 view DDLs as SQL files', goal: 'Browser-loadable data for DuckDB-WASM', reason: 'Research Desk needs full database accessible client-side', audible: ['Export tables to Parquet', 'Extract view DDLs', 'Generate metadata JSON'] }
            },
            { id: 'TKT-173', title: 'DuckDB-WASM Integration', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-012', progress: 100, tags: ['Frontend', 'DuckDB', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Integrate DuckDB-WASM to load Parquet files and recreate views in browser', goal: 'Full SQL engine running client-side', reason: 'Enable interactive queries without a server', audible: ['Load DuckDB-WASM', 'Import Parquet files', 'Recreate 52 views'] }
            },
            { id: 'TKT-174', title: 'SQL Editor & Results Panel', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-012', progress: 100, tags: ['Frontend', 'UI', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Build SQL editor with syntax highlighting, auto-complete, and results table', goal: 'Professional query interface', reason: 'Core feature of the Research Desk', audible: ['Build editor UI', 'Add syntax highlighting', 'Render results table'] }
            },
            { id: 'TKT-175', title: 'Schema Browser Panel', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Kevin de Bruyne', epic: 'EPIC-012', progress: 100, tags: ['Frontend', 'UI', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Build collapsible schema browser showing tables, views, and columns', goal: 'Users can explore available data', reason: 'Users need to know what tables and columns exist', audible: ['Build tree view', 'Show column types', 'Click to insert'] }
            },
            { id: 'TKT-176', title: 'Example Queries Gallery', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Stephen Curry', epic: 'EPIC-012', progress: 100, tags: ['Content', 'UI', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Curate gallery of example SQL queries with descriptions and one-click load', goal: 'Lower barrier to entry for non-SQL users', reason: 'Not everyone knows SQL ‚Äî examples teach by doing', audible: ['Write 15+ example queries', 'Categorize by topic', 'One-click load to editor'] }
            },
            { id: 'TKT-177', title: 'Natural Language Query Engine', state: 'DONE', priority: 'P2', effort: 'marathon', assignee: 'Kevin de Bruyne', epic: 'EPIC-012', progress: 100, tags: ['AI', 'NLP', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Build plain-English search bar that converts natural language to SQL via LLM', goal: 'Ask questions in English, get SQL results', reason: 'USP feature ‚Äî makes data accessible to everyone', audible: ['Build NL input UI', 'Integrate LLM API', 'Display results with insights'] }
            },
            { id: 'TKT-178', title: 'Research Desk ‚Äî Design & Visual Integration', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Kevin de Bruyne', epic: 'EPIC-012', progress: 100, tags: ['Frontend', 'Design', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Build research-desk.html page with consistent design language, nav integration', goal: 'Seamless visual integration with The Lab', reason: 'Must feel like a natural extension, not bolted on', audible: ['Create HTML page', 'Match Lab design', 'Update all nav links'] }
            },
            { id: 'TKT-179', title: 'Document Film Room NL Search Patterns & Example Prompts', state: 'DONE', priority: 'P1', effort: 'hustle', assignee: 'Founder', epic: 'EPIC-012', progress: 100, tags: ['Documentation', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              founderReviewNote: 'Founder-owned task: Document all 11 NL search patterns with example prompts for Film Room users. Create the reference doc when ready.',
              context: { ask: 'Create reference doc listing all 11 NL search patterns with example prompts', goal: 'Help users understand what queries work in the Film Room', reason: 'Users need guidance on NL search capabilities', audible: ['Document 11 patterns', 'Write example prompts', 'Note limitations'] }
            },
            { id: 'TKT-180', title: 'Mobile-First Film Room: Lightweight DuckDB Strategy', state: 'DONE', priority: 'P0', effort: 'deep-work', assignee: 'Brad Stevens', epic: 'EPIC-012', progress: 100, tags: ['Mobile', 'Performance', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: { andy_flower: 'YES' }, system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Implement httpfs remote Parquet for fact_ball on mobile to avoid memory crashes', goal: 'Full Film Room functionality on mobile devices', reason: 'Mobile is primary audience ‚Äî cannot block DuckDB on mobile', audible: ['Implement httpfs strategy', 'HTTP range requests for fact_ball', 'Desktop unchanged'] }
            },
            { id: 'TKT-181', title: 'NL Search Engine: dynamic query builder for Research Desk (Film Room)', state: 'DONE', priority: 'P1', effort: 'marathon', assignee: 'Jose Mourinho', epic: 'EPIC-005', progress: 100, tags: ['Analytics', 'Film Room', 'Research Desk'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Audit all 35+ Film Room SQL views for IPL data scope, create dual-scope naming (_alltime/_since2023), add 13 new tactical views', goal: '80 dual-scope views + all scripts using 2023+ data + SQL editor fixes', reason: 'Data scope clarity is critical ‚Äî 2023+ IPL is the analytical window', audible: ['Create dual-scope views', 'Migrate scripts to _since2023', 'Fix SQL editor escaping', 'Regenerate all outputs'] }
            },
            { id: 'TKT-182', title: 'T20 Fallback Data for Uncapped IPL Players in Stat Packs', state: 'DONE', priority: 'P2', effort: 'deep-work', assignee: 'Stephen Curry', epic: 'EPIC-006', progress: 100, tags: ['Analytics', 'Stat Packs'], gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Add T20 fallback data from other tournaments for 51 uncapped IPL 2026 players', goal: 'Uncapped Watch section in stat packs with T20 profiles for players without IPL history', reason: '34 of 51 uncapped players have meaningful T20 data from BBL, PSL, CPL, etc.', audible: ['Render T20 columns for uncapped players', 'Add Uncapped Watch section', 'Tag uncapped players in player_tags.json'] }
            },
            { id: 'TKT-183', title: 'Tournament Quality Weighting System: 5-Factor Composite', state: 'RUNNING', priority: 'P1', effort: 'marathon', assignee: 'Jose Mourinho', epic: 'EPIC-016', progress: 60, tags: ['Analytics', 'Quant Research'], gates: { florentino_gate: 'APPROVED', founder_prd_approval: 'APPROVED' },
              context: { ask: 'Build 5-factor composite weight system: PQI, Competitiveness, Recency Decay, Conditions Similarity, Sample Size Confidence', goal: 'Tournament quality weights across 426 tournaments / 9,357 matches', reason: 'Analytical credibility requires principled weighting of non-IPL T20 data', audible: ['Phase 1: Data Layer', 'Phase 2: Weight Computation', 'Phase 3: Integration', 'Phase 4: Validation'] },
              documents: [{ title: 'Tournament Quality Weighting Plan (Founder Approved)', path: 'reviews/founder/tournament_weighting_plan_021126_v1.md', status: 'FOUNDER_APPROVED' }]
            },
            // TKT-183 sub-tickets: Tournament Quality Weighting Phases (EPIC-016, 7 tickets: TKT-184 to TKT-190)
            { id: 'TKT-184', title: 'TKT-183.1: Recency Decay Curve Analysis', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Jose Mourinho', epic: 'EPIC-016', progress: 100, tags: ['Analytics', 'Quant Research'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Compute 3-5 candidate exponential decay rates for Factor 3', goal: 'Present decay curves with evidence for Founder selection (Decision #5)', reason: 'Tournament relevance degrades over time ‚Äî need principled decay rate', audible: ['Analyze temporal relevance', 'Model decay curves', 'Present to Founder'] }
            },
            { id: 'TKT-185', title: 'TKT-183.2: Season-Level Competitiveness Index', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Jose Mourinho', epic: 'EPIC-016', progress: 100, tags: ['Analytics', 'Quant Research'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Refine Factor 2 CI from tournament-lifetime to per-season splits', goal: 'Season-level CI scores for 207 tournaments to pair with recency decay', reason: 'Current CI uses all-time aggregates ‚Äî masks season-by-season quality variation', audible: ['Split CI by season', 'Update factor scores JSON', 'Validate against known quality changes'] }
            },
            { id: 'TKT-186', title: 'TKT-183.3: Composite Formula Refinement', state: 'DONE', priority: 'P1', effort: 'deep-work', assignee: 'Jose Mourinho', epic: 'EPIC-016', progress: 100, tags: ['Analytics', 'Quant Research'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              context: { ask: 'Compare weighted avg vs geometric mean vs harmonic mean for composite', goal: 'Identify formula that prevents single high factor from masking weak factors', reason: 'Aggregation method choice materially affects tier assignments', audible: ['Run sensitivity analysis', 'Compare 3 methods', 'Recommend to Founder'] }
            },
            { id: 'TKT-187', title: 'TKT-183.4: Founder Approval Gate ‚Äî Final Weights', state: 'DONE', priority: 'P0', effort: 'hustle', assignee: 'Jose Mourinho', epic: 'EPIC-016', progress: 100, tags: ['Analytics', 'Governance'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED', domain_sanity: 'YES', system_check: 'PASS', founder_validation: 'APPROVED' },
              blockedBy: ['TKT-184', 'TKT-185', 'TKT-186'],
              founderReviewNote: 'HARD GATE (Decision #4): Review and approve final composite weights for all 207 tournaments. Verify tier assignments align with cricket intuition. No Phase 2 work can proceed without sign-off.',
              context: { ask: 'Compile final weights for 207 tournaments and present to Founder', goal: 'Founder sign-off on all weight values (Decision #4 hard gate)', reason: 'No Phase 2 work can begin without Founder approval of derived weights', audible: ['Compile Phase 1 outputs', 'Present tier assignments', 'Obtain Founder sign-off'] }
            },
            { id: 'TKT-188', title: 'TKT-183.5: Phase 2 ‚Äî dim_tournament_weights Table', state: 'IDEA', priority: 'P1', effort: 'marathon', assignee: 'Stephen Curry', epic: 'EPIC-016', progress: 0, tags: ['Analytics', 'Data Pipeline'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED' },
              blockedBy: ['TKT-187'],
              context: { ask: 'Build DuckDB dim_tournament_weights table and weighted views', goal: 'Founder-approved weights materialized in data pipeline', reason: 'Weights must be queryable for downstream analytics', audible: ['Create dim_tournament_weights', 'Build weighted views', 'Update thresholds.yaml'] }
            },
            { id: 'TKT-189', title: 'TKT-183.6: Phase 3 ‚Äî Domain Sanity Validation', state: 'IDEA', priority: 'P1', effort: 'deep-work', assignee: 'Andy Flower', epic: 'EPIC-016', progress: 0, tags: ['Analytics', 'QA'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED' },
              blockedBy: ['TKT-188'],
              context: { ask: 'Domain sanity review of weighted outputs', goal: 'Verify weights produce cricket-sensible results', reason: 'Prevent counter-intuitive rankings or small-sample artifacts', audible: ['Andy Flower domain review', 'Jose statistical robustness', 'Pep edge case analysis'] }
            },
            { id: 'TKT-190', title: 'TKT-183.7: Phase 4 ‚Äî Integration into Models', state: 'IDEA', priority: 'P1', effort: 'marathon', assignee: 'Stephen Curry', epic: 'EPIC-016', progress: 0, tags: ['Analytics', 'Integration'], parent: 'TKT-183', gates: { florentino_gate: 'APPROVED' },
              blockedBy: ['TKT-189'],
              context: { ask: 'Apply tournament weights to clustering, tags, and analytical models', goal: 'Weighted cross-tournament data in all downstream outputs', reason: 'Weights meaningless until integrated into analytical pipeline', audible: ['Update clustering', 'Update player tags', 'Regenerate stat packs + depth charts'] }
            }
        ];

        // ==================== HIERARCHY HELPER FUNCTIONS (TKT-128) ====================
        // Functions for navigating parent-child ticket relationships

        // Get all child tickets for a given parent ticket
        function getChildren(ticketId) {
            return tickets.filter(t => t.parent === ticketId);
        }

        // Get the parent ticket for a child ticket
        function getParent(ticketId) {
            const ticket = tickets.find(t => t.id === ticketId);
            if (ticket && ticket.parent) {
                return tickets.find(t => t.id === ticket.parent);
            }
            return null;
        }

        // Determine ticket type: 'parent', 'child', or 'standalone'
        function getTicketType(ticket) {
            if (ticket.ticketType) return ticket.ticketType;
            if (ticket.parent) return 'child';
            if (getChildren(ticket.id).length > 0) return 'parent';
            return 'standalone';
        }

        // Get all tickets belonging to an EPIC
        function getTicketsByEpic(epicId) {
            return tickets.filter(t => t.epic === epicId);
        }

        // Calculate rollup progress for an EPIC based on its tickets
        function calculateEpicProgress(epicId) {
            const epicTickets = getTicketsByEpic(epicId);
            if (epicTickets.length === 0) return 0;
            const total = epicTickets.reduce((sum, t) => sum + (t.progress || 0), 0);
            return Math.round(total / epicTickets.length);
        }

        // Get hierarchy summary: { epics, parents, children, standalone }
        function getHierarchySummary() {
            const parents = tickets.filter(t => t.ticketType === 'parent' || getChildren(t.id).length > 0);
            const children = tickets.filter(t => t.parent);
            const standalone = tickets.filter(t => !t.parent && !t.ticketType && getChildren(t.id).length === 0);
            return {
                epics: epics.length,
                parents: parents.length,
                children: children.length,
                standalone: standalone.length,
                total: tickets.length
            };
        }

        // TKT-105 Enhancement: Auto-populate entered_review_date for REVIEW tickets
        // This ensures the Review SLA widget works even if the date wasn't manually added
        (function autoPopulateReviewDates() {
            const today = new Date().toISOString().split('T')[0];
            tickets.forEach(t => {
                if (t.state === 'REVIEW' && !t.entered_review_date) {
                    t.entered_review_date = today;
                    console.log(`[TKT-105] Auto-set entered_review_date for ${t.id}: ${today}`);
                }
            });
        })();

        let activeFilter = 'all';
        let activeAgentFilter = null;
        let activePriorityFilter = 'all';
        let activeEffortFilter = 'all';
        let searchQuery = '';

        // Search handler
        function handleTicketSearch(event) {
            searchQuery = event.target.value.toLowerCase().trim();
            renderBoard();
            renderList();
        }

        // Dropdown toggle function
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            const allDropdowns = document.querySelectorAll('.filter-dropdown-menu');

            // Close all other dropdowns first
            allDropdowns.forEach(d => {
                if (d.id !== dropdownId) d.classList.remove('active');
            });

            dropdown.classList.toggle('active');
        }

        // Priority filter function
        function setPriorityFilter(filter) {
            activePriorityFilter = filter;

            // Update active filter for board rendering
            if (filter === 'all' && activeEffortFilter === 'all') {
                activeFilter = 'all';
            } else if (filter !== 'all') {
                activeFilter = filter;
            } else {
                activeFilter = activeEffortFilter;
            }

            // Update label
            const label = document.getElementById('priorityFilterLabel');
            const labels = {
                'all': 'üéØ Priority',
                'p0': 'üî¥ P0',
                'p1': 'üü† P1',
                'p2': 'üü° P2',
                'p3': 'üü¢ P3'
            };
            label.textContent = labels[filter] || 'üéØ Priority';

            // Close dropdown
            document.getElementById('priorityDropdown').classList.remove('active');

            // Update button states
            updateFilterButtons();
            renderBoard();
        }

        // Effort filter function
        function setEffortFilter(filter) {
            activeEffortFilter = filter;

            // Update active filter for board rendering
            if (filter === 'all' && activePriorityFilter === 'all') {
                activeFilter = 'all';
            } else if (filter !== 'all') {
                activeFilter = filter;
            } else {
                activeFilter = activePriorityFilter;
            }

            // Update label
            const label = document.getElementById('effortFilterLabel');
            const labels = {
                'all': 'üí™ Effort',
                'quick-win': '‚ö° Quick Win',
                'hustle': 'üèÉ Hustle',
                'deep-work': 'üß† Deep Work',
                'marathon': 'üèîÔ∏è Marathon'
            };
            label.textContent = labels[filter] || 'üí™ Effort';

            // Close dropdown
            document.getElementById('effortDropdown').classList.remove('active');

            // Update button states
            updateFilterButtons();
            renderBoard();
        }

        // Update "All Tickets" button state
        function updateFilterButtons() {
            const allBtn = document.querySelector('[data-filter="all"]');
            if (activePriorityFilter === 'all' && activeEffortFilter === 'all' && !activeAgentFilter) {
                allBtn.classList.add('active');
            } else {
                allBtn.classList.remove('active');
            }
        }

        // Reset all filters
        function resetFilters() {
            activePriorityFilter = 'all';
            activeEffortFilter = 'all';
            activeFilter = 'all';
            activeAgentFilter = null;
            activeStaleFilter = false;
            searchQuery = '';

            document.getElementById('priorityFilterLabel').textContent = 'üéØ Priority';
            document.getElementById('effortFilterLabel').textContent = 'üí™ Effort';
            document.getElementById('agentFilterLabel').textContent = 'üë• All Agents';
            document.getElementById('ticketSearch').value = '';

            updateFilterButtons();
            renderBoard();
        }

        // TKT-105: Filter to show only stale reviews (>2 days in REVIEW)
        let activeStaleFilter = false;

        function filterStaleReviews() {
            activeStaleFilter = !activeStaleFilter;

            // Update button state
            const btn = document.getElementById('staleReviewsBtn');
            if (activeStaleFilter) {
                btn.classList.add('active');
                // Reset other filters
                activePriorityFilter = 'all';
                activeEffortFilter = 'all';
                activeAgentFilter = null;
                document.getElementById('priorityFilterLabel').textContent = 'üéØ Priority';
                document.getElementById('effortFilterLabel').textContent = 'üí™ Effort';
                document.getElementById('agentFilterLabel').textContent = 'üë• All Agents';
            } else {
                btn.classList.remove('active');
            }

            // Also update the All Tickets button
            const allBtn = document.querySelector('.filter-btn[data-filter="all"]');
            if (allBtn) allBtn.classList.toggle('active', !activeStaleFilter);

            renderBoard();
        }

        function getAgentInfo(name) {
            return agents[name] || { role: 'Unassigned', team: '' };
        }

        function getGateStatus(ticketGates, gateId) {
            if (!ticketGates || !ticketGates[gateId]) return 'waiting';
            const val = ticketGates[gateId];
            if (val === 'APPROVED' || val === 'PASS' || val === 'YES') return 'passed';
            return 'pending';
        }

        // TKT-105: Review Age calculation for SLA tracking
        function getReviewAge(ticket) {
            if (ticket.state !== 'REVIEW' || !ticket.entered_review_date) return null;

            const reviewDate = new Date(ticket.entered_review_date);
            const now = new Date();
            const diffTime = Math.abs(now - reviewDate);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

            return diffDays;
        }

        function getReviewAgeBadge(ticket) {
            const age = getReviewAge(ticket);
            if (age === null) return '';

            let ageClass, icon;
            if (age < 1) {
                ageClass = 'fresh';
                icon = 'üü¢';
            } else if (age <= 2) {
                ageClass = 'aging';
                icon = 'üü°';
            } else {
                ageClass = 'stale';
                icon = 'üî¥';
            }

            const dayText = age === 0 ? '<1d' : `${age}d`;
            return `<span class="review-age-badge ${ageClass}" title="In review for ${age} day(s)">${icon} ${dayText}</span>`;
        }

        function isStaleReview(ticket) {
            const age = getReviewAge(ticket);
            return age !== null && age > 2;
        }

        function showView(view) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.mobile-nav-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(view + 'View').classList.add('active');
            // Update desktop nav
            const desktopTab = document.querySelector(`.nav-tabs [onclick="showView('${view}')"]`);
            if (desktopTab) desktopTab.classList.add('active');
            // Update mobile nav
            const mobileTab = document.querySelector(`.mobile-nav [onclick="showView('${view}')"]`);
            if (mobileTab) mobileTab.classList.add('active');
            // Re-render view-specific content when tab becomes visible
            if (view === 'techHealth') {
                initTechHealth();
            } else if (view === 'roster') {
                renderRosterHero();
            }
        }

        // ==================== TECH HEALTH DASHBOARD ====================
        let healthData = {
            score: 94.0,
            status: 'EXCELLENT',
            target: 85.0,
            baseline: 67.4,
            timestamp: new Date().toISOString(),
            categories: {
                governance: { score: 100, weight: 15, label: 'Governance', findings: ['Constitution has 19 sections (GOOD)', 'Task Integrity Loop fully documented', 'Gate enforcement workflow exists'] },
                code_quality: { score: 90, weight: 20, label: 'Code Quality', findings: ['1 bare except handlers (GOOD)', 'Thresholds centralized in YAML (TKT-132 DONE)', 'No sys.path hacks (EXCELLENT)', 'Type hints: 84% coverage (GOOD)'] },
                data_robustness: { score: 100, weight: 20, label: 'Data Robustness', findings: ['Domain constraints module exists (TKT-133 DONE)', 'Schema validation exists', 'Data lineage tracking present'] },
                ml_rigor: { score: 80, weight: 20, label: 'ML Rigor', findings: ['Model monitoring module exists', 'Baseline comparison exists', 'Model registry missing', 'Feature importance/SHAP present'] },
                testing: { score: 100, weight: 15, label: 'Testing', findings: ['5 test files found (GOOD)', 'Integration tests exist', '265 tests collected (GOOD)'] },
                documentation: { score: 100, weight: 10, label: 'Documentation', findings: ['Core docs: 2/2', 'Thresholds well documented', '8 procedure/methodology docs'] }
            },
            benchmarks: {
                anthropic_ai_safety: 97,
                microsoft_responsible_ai: 90,
                google_ml_practices: 82
            },
            automation: {
                pre_commit_hooks: 95,
                github_actions: 95,
                output_generation: 90,
                dashboard_deploy: 90,
                data_pipeline: 75,
                testing: 70
            }
        };

        async function initTechHealth() {
            // Try to fetch from JSON file (auto-generated by workflows)
            try {
                const response = await fetch('data/health_score.json?t=' + Date.now());
                if (response.ok) {
                    healthData = await response.json();
                }
            } catch (e) {
                console.log('Using default health data');
            }
            updateHealthScore();
            updateHealthCategories();
            updateLastUpdated();
            renderHealthTickets();
            renderWorkflows();

            // Add Jose Mourinho avatar to header (he owns system audits)
            const avatarEl = document.getElementById('scoutingReportAvatar');
            if (avatarEl) {
                avatarEl.innerHTML = getAgentAvatarImg('Jose Mourinho', 'scouting-header-avatar');
            }
        }

        function updateHealthScore() {
            const scoreValue = document.getElementById('healthScoreValue');
            const statusEl = document.getElementById('healthStatus');
            const progressCircle = document.getElementById('scoreProgress');

            if (scoreValue) scoreValue.textContent = healthData.score;
            if (statusEl) {
                statusEl.textContent = healthData.status;
                statusEl.style.color = healthData.score >= 85 ? 'var(--accent-green)' :
                                       healthData.score >= 70 ? 'var(--accent-yellow)' :
                                       'var(--accent-red)';
            }

            // Update circle progress (circumference = 2 * PI * 54 = 339.29)
            if (progressCircle) {
                const circumference = 339.29;
                const offset = circumference - (healthData.score / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
                progressCircle.style.stroke = healthData.score >= 85 ? 'var(--accent-green)' :
                                              healthData.score >= 70 ? 'var(--accent-yellow)' :
                                              'var(--accent-red)';
            }
        }

        function updateHealthCategories() {
            const container = document.getElementById('healthCategories');
            if (!container) return;

            // Helper to create label from key (e.g., 'code_quality' ‚Üí 'Code Quality')
            const formatLabel = (key) => key.split('_').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');

            container.innerHTML = Object.entries(healthData.categories).map(([key, cat]) => {
                const label = cat.label || formatLabel(key);
                const score = cat.score || 0;
                const weight = cat.weight || 0;
                const color = score >= 80 ? 'var(--accent-green)' :
                              score >= 60 ? 'var(--accent-yellow)' :
                              'var(--accent-red)';
                return `
                    <div class="category-item">
                        <div class="category-header">
                            <span class="category-name">${label} (${weight}%)</span>
                            <span class="category-score" style="color: ${color}">${score}%</span>
                        </div>
                        <div class="category-bar">
                            <div class="category-fill" style="width: ${score}%; background: ${color}"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateLastUpdated() {
            const el = document.getElementById('healthLastUpdated');
            if (el) {
                el.textContent = new Date(healthData.timestamp).toLocaleString();
            }
        }

        function refreshHealthData() {
            // In production, this would fetch from an API or JSON file
            // For now, update the timestamp
            healthData.timestamp = new Date().toISOString();
            initTechHealth();
            alert('Health data refreshed! In production, this will fetch from auto-generated JSON.');
        }

        function renderHealthTickets() {
            // Dynamically render EPIC-014 tickets that are NOT DONE
            const container = document.getElementById('healthTicketsList');
            if (!container) return;

            // Filter EPIC-014 tickets excluding DONE state
            const activeHealthTickets = tickets.filter(t =>
                t.epic === 'EPIC-014' && t.state !== 'DONE'
            );

            if (activeHealthTickets.length === 0) {
                container.innerHTML = '<span class="ticket-chip done">All tickets completed!</span>';
                return;
            }

            // Sort: RUNNING first, then REVIEW/VALIDATION, then BACKLOG
            const stateOrder = { 'RUNNING': 0, 'REVIEW': 1, 'VALIDATION': 2, 'READY': 3, 'BACKLOG': 4, 'IDEA': 5 };
            activeHealthTickets.sort((a, b) => (stateOrder[a.state] || 9) - (stateOrder[b.state] || 9));

            container.innerHTML = activeHealthTickets.map(t => {
                const stateClass = t.state.toLowerCase().replace('_', '-');
                const shortTitle = t.title.length > 25 ? t.title.substring(0, 25) + '...' : t.title;
                return `<span class="ticket-chip ${stateClass}" onclick="showView('board')" title="${t.title}">${t.id} ${shortTitle}</span>`;
            }).join('');
        }

        // ================================================================
        // TOKEN USAGE TIMELINE GRAPH + COMMENTARY BOX
        // ================================================================

        // Build activity data from TOKEN_DATA (loaded from data/token_usage.js)
        const activityData = (function() {
            const td = (typeof TOKEN_DATA !== 'undefined') ? TOKEN_DATA : null;
            if (!td || !td.daily || td.daily.length === 0) return [];

            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

            return td.daily.map(d => {
                const dt = new Date(d.date + 'T00:00:00');
                return {
                    rawDate: d.date,
                    dateStr: `${monthNames[dt.getMonth()]} ${dt.getDate()}`,
                    dayName: dayNames[dt.getDay()],
                    messages: d.messages,
                    sessions: d.sessions,
                    tools: d.tools,
                    tokens: d.tokens,
                    commits: d.commits || 0,
                    source: d.source || 'stats-cache'
                };
            });
        })();

        // Keep backward compat for Commentary Box
        const dailyUsageData = { week: activityData.map(d => ({ date: d.dateStr, tokens: Math.round(d.tokens / 1000), label: d.dayName, sessions: d.sessions })) };

        // ================================================================
        // TOKEN DATA INITIALIZATION - Populate all token metrics from TOKEN_DATA
        // ================================================================
        function initTokenData() {
            const td = (typeof TOKEN_DATA !== 'undefined') ? TOKEN_DATA : null;
            if (!td) return;

            const s = td.summary;
            const fmt = (typeof formatTokens === 'function') ? formatTokens : (n) => n.toLocaleString();

            // --- Top metric cards ---
            const tokensUsedEl = document.getElementById('tokensUsedValue');
            if (tokensUsedEl) tokensUsedEl.textContent = fmt(s.totalTokens);

            const sessionsEl = document.getElementById('tokensRemainingValue');
            if (sessionsEl) sessionsEl.textContent = s.totalSessions + ' / ' + s.projectSessions;

            const avgDailyEl = document.getElementById('avgDailyValue');
            if (avgDailyEl) avgDailyEl.textContent = '~' + fmt(s.avgDailyTokens);

            const daysLeftEl = document.getElementById('daysLeftValue');
            if (daysLeftEl && td.billingEstimate) daysLeftEl.textContent = td.billingEstimate.daysRemaining;

            // --- Progress bar ---
            // For Claude Max there's no hard limit, so show days elapsed in billing cycle
            const progressText = document.getElementById('tokenProgressText');
            const progressFill = document.getElementById('tokenProgressFill');
            if (progressText && td.billingEstimate) {
                const cycleStart = new Date(td.billingEstimate.cycleStart);
                const cycleEnd = new Date(td.billingEstimate.cycleEnd);
                const totalDays = Math.max(1, (cycleEnd - cycleStart) / (1000 * 60 * 60 * 24));
                const elapsed = totalDays - td.billingEstimate.daysRemaining;
                const pct = Math.min(100, Math.round((elapsed / totalDays) * 100));
                progressText.textContent = pct + '% of billing cycle elapsed \u2022 ' + td.billingEstimate.plan;
                if (progressFill) progressFill.style.width = pct + '%';
            }

            // --- Last synced timestamp ---
            const syncEl = document.getElementById('tokenSyncTime');
            if (syncEl && s.lastUpdated) {
                const dt = new Date(s.lastUpdated);
                syncEl.textContent = 'Last synced: ' + dt.toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' }) + ' IST';
            }

            // --- Usage Pace Analysis ---
            const paceEl = document.getElementById('usagePaceContent');
            if (paceEl) {
                const avgDaily = fmt(s.avgDailyTokens);
                const totalMsgs = s.totalMessages.toLocaleString();
                paceEl.innerHTML = `At current pace of <strong>~${avgDaily} tokens/day</strong> across <strong>${s.daysActive} active days</strong>, the project has consumed <strong>${fmt(s.totalTokens)}</strong> tokens total.<br><br>` +
                    `<strong>Messages:</strong> ${totalMsgs} \u2022 <strong>Sessions:</strong> ${s.totalSessions} global / ${s.projectSessions} project`;
            }

            // --- Model Breakdown ---
            const modelEl = document.getElementById('modelBreakdownContent');
            if (modelEl && td.byModel) {
                const totalAll = s.totalTokens || 1;
                let html = '';
                // Sort by total descending
                const models = Object.entries(td.byModel).sort((a, b) => {
                    const ta = a[1].input + a[1].output + a[1].cacheRead + a[1].cacheCreation;
                    const tb = b[1].input + b[1].output + b[1].cacheRead + b[1].cacheCreation;
                    return tb - ta;
                });
                models.forEach(([name, u]) => {
                    const modelTotal = u.input + u.output + u.cacheRead + u.cacheCreation;
                    const pct = ((modelTotal / totalAll) * 100).toFixed(1);
                    html += `<div style="margin-bottom: 8px;">` +
                        `<div style="display: flex; justify-content: space-between; margin-bottom: 3px;">` +
                        `<strong>${name}</strong> <span style="color: var(--text-tertiary);">${fmt(modelTotal)} (${pct}%)</span></div>` +
                        `<div style="height: 6px; background: var(--bg-elevated); border-radius: 3px; overflow: hidden;">` +
                        `<div style="width: ${pct}%; height: 100%; background: linear-gradient(90deg, #0a84ff, #5e5ce6); border-radius: 3px;"></div>` +
                        `</div></div>`;
                });
                modelEl.innerHTML = html;
            }

            // --- Input vs Output Breakdown ---
            const ioEl = document.getElementById('inputOutputContent');
            if (ioEl) {
                const totalIO = s.inputTokens + s.outputTokens + s.cacheReadTokens + s.cacheCreationTokens || 1;
                const inputPct = ((s.inputTokens / totalIO) * 100).toFixed(1);
                const outputPct = ((s.outputTokens / totalIO) * 100).toFixed(1);
                const cacheReadPct = ((s.cacheReadTokens / totalIO) * 100).toFixed(1);
                const cacheCreatePct = ((s.cacheCreationTokens / totalIO) * 100).toFixed(1);

                // Avg per message
                const avgIn = s.totalMessages > 0 ? Math.round(s.inputTokens / s.totalMessages) : 0;
                const avgOut = s.totalMessages > 0 ? Math.round(s.outputTokens / s.totalMessages) : 0;

                ioEl.innerHTML =
                    `<div style="margin-bottom: 10px; font-size: 11px; color: var(--text-tertiary);">Token breakdown across ${fmt(totalIO)} total:</div>` +
                    _barRow('üì• Input (Prompts)', s.inputTokens, inputPct, '#0a84ff', '#5e5ce6') +
                    _barRow('üì§ Output (Responses)', s.outputTokens, outputPct, '#30d158', '#34c759') +
                    _barRow('üíæ Cache Read', s.cacheReadTokens, cacheReadPct, '#ff9f0a', '#ff9500') +
                    _barRow('üîß Cache Creation', s.cacheCreationTokens, cacheCreatePct, '#af52de', '#5856d6') +
                    `<div style="padding-top: 8px; border-top: 1px dashed var(--border); font-size: 11px; color: var(--text-tertiary);">` +
                    `<strong>Avg per Message:</strong> ~${avgIn} in \u2192 ~${avgOut} out</div>`;
            }

            // --- Billing Cycle ---
            const billingEl = document.getElementById('billingCycleContent');
            if (billingEl && td.billingEstimate) {
                const b = td.billingEstimate;
                const startDt = b.cycleStart ? new Date(b.cycleStart + 'T00:00:00') : null;
                const endDt = b.cycleEnd ? new Date(b.cycleEnd + 'T00:00:00') : null;
                const startStr = startDt ? startDt.toLocaleDateString('en-IN', { month: 'short', day: 'numeric', year: 'numeric' }) : '--';
                const endStr = endDt ? endDt.toLocaleDateString('en-IN', { month: 'short', day: 'numeric', year: 'numeric' }) : '--';
                const firstSession = s.firstSession ? new Date(s.firstSession).toLocaleDateString('en-IN', { month: 'short', day: 'numeric', year: 'numeric' }) : '--';
                billingEl.innerHTML =
                    `<strong>Plan:</strong> ${b.plan}<br>` +
                    `<strong>Current Period:</strong> ${startStr} - ${endStr}<br>` +
                    `<strong>Days Remaining:</strong> ${b.daysRemaining} days<br>` +
                    `<strong>First Session:</strong> ${firstSession}<br>` +
                    `<strong>Total Sessions:</strong> ${s.totalSessions} (${s.projectSessions} project JSONL files)<br>` +
                    `<strong>Note:</strong> ${b.note}`;
            }
        }

        // Helper for input/output bar rows
        function _barRow(label, value, pct, color1, color2) {
            const fmtFn = (typeof formatTokens === 'function') ? formatTokens : (n) => n.toLocaleString();
            return `<div style="margin-bottom: 12px;">` +
                `<div style="display: flex; justify-content: space-between; margin-bottom: 4px;">` +
                `<span style="font-size: 12px;">${label}</span>` +
                `<span style="font-size: 12px; font-weight: 600;">${fmtFn(value)} <span style="color: var(--text-tertiary);">(${pct}%)</span></span>` +
                `</div>` +
                `<div style="height: 8px; background: var(--bg-elevated); border-radius: 4px; overflow: hidden;">` +
                `<div style="width: ${Math.max(1, parseFloat(pct))}%; height: 100%; background: linear-gradient(90deg, ${color1}, ${color2}); border-radius: 4px;"></div>` +
                `</div></div>`;
        }

        let currentMetric = 'messages';

        function setUsageMetric(metric) {
            currentMetric = metric;
            document.querySelectorAll('.usage-tab').forEach(t => {
                t.style.background = 'transparent';
                t.style.color = 'var(--text-secondary)';
            });
            const activeTab = document.getElementById('tab-' + metric);
            if (activeTab) {
                activeTab.style.background = 'var(--accent-blue)';
                activeTab.style.color = 'white';
            }
            renderActivityTimeline();
        }

        function renderActivityTimeline() {
            const container = document.getElementById('activityTimeline');
            const summaryEl = document.getElementById('activitySummary');
            if (!container || !activityData.length) {
                if (container) container.innerHTML = '<div style="text-align: center; color: var(--text-tertiary); font-size: 11px; padding: 20px;">No activity data. Run: python scripts/mission_control/generate_token_data.py</div>';
                return;
            }

            const metric = currentMetric;
            const fmt = (typeof formatTokens === 'function') ? formatTokens : (n) => n.toLocaleString();

            // For git-log entries, use commits as the bar value; for stats-cache, use selected metric
            function getBarVal(d) {
                if (d.source === 'git-log') return d.commits;
                return d[metric];
            }

            // Separate max values for each source type so bars are proportional within their group
            const cacheEntries = activityData.filter(d => d.source === 'stats-cache');
            const gitEntries = activityData.filter(d => d.source === 'git-log');
            const maxCache = cacheEntries.length ? Math.max(...cacheEntries.map(d => d[metric])) : 1;
            const maxGit = gitEntries.length ? Math.max(...gitEntries.map(d => d.commits)) : 1;
            const globalMax = Math.max(maxCache, maxGit, 1);

            // Color gradient based on relative intensity
            function barColor(val, maxVal) {
                const pct = val / maxVal;
                if (pct > 0.75) return { bg: 'linear-gradient(90deg, #ff453a, #ff6961)', tag: 'Peak', tagColor: '#ff453a' };
                if (pct > 0.45) return { bg: 'linear-gradient(90deg, #ff9f0a, #ffb340)', tag: 'High', tagColor: '#ff9f0a' };
                if (pct > 0.2)  return { bg: 'linear-gradient(90deg, #0a84ff, #409cff)', tag: '', tagColor: '' };
                return { bg: 'linear-gradient(90deg, #30d158, #63d97c)', tag: '', tagColor: '' };
            }

            // Format value based on metric
            function fmtVal(val) {
                if (metric === 'tokens') return fmt(val);
                return val.toLocaleString();
            }

            // Compute day gaps between entries
            function daysBetween(dateA, dateB) {
                const a = new Date(dateA + 'T00:00:00'), b = new Date(dateB + 'T00:00:00');
                return Math.round((b - a) / (1000 * 60 * 60 * 24));
            }

            // Legend header
            const cacheDays = cacheEntries.length;
            const gitDays = gitEntries.length;
            let html = `<div style="font-size: 10px; color: var(--text-tertiary); margin-bottom: 10px; line-height: 1.6;">`;
            html += `<span style="display: inline-block; width: 8px; height: 8px; background: var(--accent-blue); border-radius: 2px; margin-right: 4px;"></span>Full telemetry (${cacheDays} days)`;
            if (gitDays > 0) {
                html += `<span style="margin: 0 8px; opacity: 0.4;">|</span>`;
                html += `<span style="display: inline-block; width: 8px; height: 8px; border: 1.5px dashed #af52de; border-radius: 2px; margin-right: 4px;"></span>Git commits only (${gitDays} days ‚Äî stats-cache gap)`;
            }
            html += `</div>`;

            activityData.forEach((d, i) => {
                const isGitOnly = d.source === 'git-log';

                // Gap indicator between non-consecutive days
                if (i > 0) {
                    const gap = daysBetween(activityData[i - 1].rawDate, d.rawDate);
                    if (gap > 1) {
                        html += `<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px; opacity: 0.4;">`;
                        html += `<div style="min-width: 62px;"></div>`;
                        html += `<div style="flex: 1; display: flex; align-items: center; gap: 8px;">`;
                        html += `<div style="flex: 1; border-top: 1px dashed var(--border);"></div>`;
                        html += `<span style="font-size: 9px; color: var(--text-tertiary); white-space: nowrap;">${gap - 1}d gap</span>`;
                        html += `<div style="flex: 1; border-top: 1px dashed var(--border);"></div>`;
                        html += `</div></div>`;
                    }
                }

                // For git-log entries: show commits bar. For stats-cache: show selected metric bar.
                const val = isGitOnly ? d.commits : d[metric];
                const refMax = isGitOnly ? maxGit : maxCache;
                const pct = Math.max(3, (val / Math.max(refMax, 1)) * 100);
                const color = isGitOnly
                    ? { bg: 'linear-gradient(90deg, #af52de, #bf6ee0)', tag: '', tagColor: '' }
                    : barColor(val, maxCache);

                html += `<div style="display: flex; align-items: center; gap: 8px; margin-bottom: ${i < activityData.length - 1 ? '6' : '0'}px;${isGitOnly ? ' opacity: 0.75;' : ''}" class="activity-row">`;

                // Date column
                html += `<div style="min-width: 62px; text-align: right;">`;
                html += `<div style="font-size: 11px; font-weight: 600; color: var(--text-primary);">${d.dateStr}</div>`;
                html += `<div style="font-size: 9px; color: var(--text-tertiary);">${d.dayName}</div>`;
                html += `</div>`;

                // Bar + value
                html += `<div style="flex: 1;">`;
                html += `<div style="display: flex; align-items: center; gap: 6px;">`;
                html += `<div style="flex: 1; height: 20px; background: var(--bg-elevated); border-radius: 6px; overflow: hidden;${isGitOnly ? ' border: 1px dashed rgba(175,82,222,0.4);' : ''}">`;
                html += `<div style="width: ${pct}%; height: 100%; background: ${color.bg}; border-radius: 5px; transition: width 0.4s ease;"></div>`;
                html += `</div>`;

                // Value label
                if (isGitOnly) {
                    html += `<div style="min-width: 60px; text-align: right; font-size: 10px; font-weight: 600; font-variant-numeric: tabular-nums; color: #af52de;">${d.commits} commits</div>`;
                } else {
                    html += `<div style="min-width: 55px; text-align: right; font-size: 11px; font-weight: 600; font-variant-numeric: tabular-nums; color: var(--text-primary);">${fmtVal(val)}</div>`;
                }
                html += `</div>`;

                // Sub-stats row
                const subParts = [];
                if (isGitOnly) {
                    subParts.push('stats-cache gap');
                    subParts.push(`${d.commits} git commits`);
                } else {
                    if (metric !== 'messages') subParts.push(`${d.messages.toLocaleString()} msgs`);
                    if (metric !== 'tools') subParts.push(`${d.tools.toLocaleString()} tools`);
                    subParts.push(`${d.sessions} session${d.sessions !== 1 ? 's' : ''}`);
                    if (metric !== 'tokens') subParts.push(`${fmt(d.tokens)} tokens`);
                    if (d.commits) subParts.push(`${d.commits} commits`);
                }
                const tagHtml = (!isGitOnly && color.tag) ? ` <span style="color: ${color.tagColor}; font-weight: 600;">‚óè ${color.tag}</span>` : '';
                html += `<div style="font-size: 9px; color: var(--text-tertiary); margin-top: 1px;">${subParts.join(' ¬∑ ')}${tagHtml}</div>`;

                html += `</div>`;
                html += `</div>`;
            });

            container.innerHTML = html;

            // Summary bar
            if (summaryEl) {
                const totalMsgs = activityData.reduce((s, d) => s + d.messages, 0);
                const totalTools = activityData.reduce((s, d) => s + d.tools, 0);
                const totalCommits = activityData.reduce((s, d) => s + d.commits, 0);
                summaryEl.innerHTML = `<span>${activityData.length} active days</span><span>${totalMsgs.toLocaleString()} msgs tracked</span><span>${totalCommits} total commits</span><span>${gitDays} days gap-filled</span>`;
            }
        }

        // The Commentary Box - Fun descriptions based on daily usage
        function generateCommentary() {
            const box = document.getElementById('commentaryBox');
            if (!box) return;

            const weekArr = dailyUsageData.week;
            if (!weekArr || weekArr.length === 0) { box.innerHTML = '<em>No usage data available yet. Run the token data generator.</em>'; return; }
            const todayData = weekArr[weekArr.length - 1];
            const tokens = todayData.tokens;
            const sessions = todayData.sessions;

            // Get IST time
            const now = new Date();
            const istHour = (now.getUTCHours() + 5) % 24 + (now.getUTCMinutes() >= 30 ? 0.5 : 0);
            const hourIST = Math.floor(istHour >= 0 ? istHour : istHour + 24);

            // Commentary templates based on usage patterns
            const commentaries = {
                blazing: [  // >700K tokens
                    `üèà <strong>Bill Belichick Mode ACTIVATED.</strong> The Founder is running the two-minute drill. 5 sessions, ${tokens}K tokens - this is the kind of ruthless efficiency that wins Super Bowls. No timeouts wasted, every play calculated. "Do your job" has never been more literal.`,
                    `üèè <strong>Virat Kohli "Chase Mode" engaged.</strong> ${tokens}K tokens consumed today with the hunger of Kohli chasing 370 at Wankhede. Each session more aggressive than the last. The required rate is climbing but the Founder refuses to let the asking rate spiral. Pure adrenaline coding.`,
                    `üèÄ <strong>LeBron "Playoff" Performance.</strong> ${tokens}K tokens across ${sessions} sessions. This is Game 7, elimination mode. The Founder is operating at peak efficiency - like LeBron going 40-15-10 because the season depends on it. Every token is a statement.`,
                ],
                heavy: [  // 400-700K
                    `üèà <strong>Tom Brady Sunday Afternoon Vibes.</strong> ${tokens}K tokens in ${sessions} sessions - a classic Brady 2-minute drill. Methodical, precise, and relentless. Driving down the field with no-huddle efficiency. This isn't panic - this is preparation meeting opportunity.`,
                    `‚öΩ <strong>Pep Guardiola "Tiki-Taka" Day.</strong> ${tokens}K tokens flowing like a City possession phase. Short passes, constant movement, always progressing. The Founder is controlling the midfield of code with 78% possession.`,
                    `üèè <strong>Rahul Dravid Building His Innings.</strong> ${tokens}K tokens - not flashy, but every single one counts. Like Dravid at the crease, the Founder is rotating the strike, pushing singles, and waiting for the bad ball to punish. The Wall doesn't crumble.`,
                ],
                moderate: [  // 200-400K
                    `üèÄ <strong>Stephen Curry Off-Ball Movement.</strong> ${tokens}K tokens - moving without the ball, setting screens, reading the defense. Not every possession needs a 3-pointer. Sometimes the gravity alone changes the game.`,
                    `‚öΩ <strong>N'Golo Kant√© Quiet Excellence.</strong> ${tokens}K tokens - like Kant√© covering 12.3km without anyone noticing. The Founder is everywhere, doing the unglamorous work that makes everything else possible.`,
                    `üèè <strong>MS Dhoni "Cool Captain" Energy.</strong> ${tokens}K tokens deployed with the calm of Dhoni at the death. No rush, no panic. Just calculated decisions at the right moment. Finishing things off in style.`,
                ],
                light: [  // <200K
                    `üèà <strong>Bye Week Recovery.</strong> Only ${tokens}K tokens today. The Founder is in recovery mode - reviewing game film, not playing. Even Belichick takes a day to study tape before the next offensive.`,
                    `üèè <strong>Rest Day at the Nets.</strong> ${tokens}K tokens - just a light net session. Like Andy Flower giving the boys a day off before the Test match. Recovery is part of the plan.`,
                    `‚öΩ <strong>Jos√© Mourinho "Parking the Bus."</strong> ${tokens}K tokens - conserving energy, holding the line. The Special One knows when to attack and when to consolidate. Today is consolidation day.`,
                ]
            };

            // Time-based additions
            let timeNote = '';
            if (hourIST >= 0 && hourIST < 6) timeNote = ' üåô <em>Late night session? The Founder codes when the world sleeps.</em>';
            else if (hourIST >= 6 && hourIST < 10) timeNote = ' ‚òÄÔ∏è <em>Morning session. Fresh mind, fresh code.</em>';
            else if (hourIST >= 22) timeNote = ' ü¶â <em>Night owl mode activated. Peak creativity hours.</em>';

            let category;
            if (tokens > 700) category = 'blazing';
            else if (tokens > 400) category = 'heavy';
            else if (tokens > 200) category = 'moderate';
            else category = 'light';

            const options = commentaries[category];
            const randomIndex = Math.floor(Math.random() * options.length);
            box.innerHTML = options[randomIndex] + timeNote;
        }

        // Initialize on load
        setTimeout(() => {
            initTokenData();
            renderActivityTimeline();
            generateCommentary();
        }, 500);

        // Redraw graph on window resize
        window.addEventListener('resize', () => { renderActivityTimeline(); renderRosterHero(); });

        // Workflow data with owners for dynamic rendering with avatars
        const workflows = [
            { name: 'ci.yml', status: 'active', trigger: 'Push/PR', owner: 'Brad Stevens' },
            { name: 'gate-check.yml', status: 'active', trigger: 'Push/PR', owner: 'Brad Stevens' },
            { name: 'generate-outputs.yml', status: 'scheduled', trigger: 'Daily 2AM UTC', owner: 'Brad Stevens' },
            { name: 'deploy-dashboard.yml', status: 'chained', trigger: 'Post-outputs', owner: 'Brad Stevens' },
            { name: 'ingest.yml', status: 'scheduled', trigger: 'Weekly Sun 3AM', owner: 'Brock Purdy' },
            { name: 'ml-health-check.yml', status: 'scheduled', trigger: 'Weekly + Push', owner: 'Ime Udoka' }
        ];

        function renderWorkflows() {
            const container = document.getElementById('workflowList');
            if (!container) return;

            container.innerHTML = workflows.map(wf => `
                <div class="workflow-item">
                    <span class="workflow-status ${wf.status}">‚óè</span>
                    <span class="workflow-name">${wf.name}</span>
                    <span class="workflow-trigger">${wf.trigger}</span>
                    <span class="workflow-owner">
                        ${getAgentAvatarImg(wf.owner, 'workflow-owner-avatar')}
                        <span>${wf.owner.split(' ')[0]}</span>
                    </span>
                </div>
            `).join('');
        }

        function initBoard() {
            const kanban = document.getElementById('kanban');
            const isMobile = window.innerWidth <= 600;

            kanban.innerHTML = columns.map(col => {
                const isCollapsible = col.collapsible && isMobile;
                const isCollapsed = isCollapsible && col.defaultCollapsed;
                const collapsibleClass = isCollapsible ? `collapsible${isCollapsed ? ' collapsed' : ''}` : '';
                const toggleChevron = isCollapsible ? '<span class="column-toggle">‚ñº</span>' : '';
                const headerClick = isCollapsible ? `onclick="toggleColumn('${col.id}')"` : '';

                return `
                <div class="column ${col.isFounder ? 'founder-column' : ''} ${collapsibleClass}" data-state="${col.id}">
                    <div class="column-header" ${headerClick}>
                        <span class="column-name">
                            <span class="column-dot ${col.dot}"></span>
                            ${col.name}
                            ${toggleChevron}
                        </span>
                        <span class="column-count" id="count-${col.id}">0</span>
                    </div>
                    <div class="column-body" id="col-${col.id}"></div>
                </div>
            `}).join('');

        }

        // Mobile collapsible columns toggle
        function toggleColumn(columnId) {
            const column = document.querySelector(`.column[data-state="${columnId}"]`);
            if (column && column.classList.contains('collapsible')) {
                column.classList.toggle('collapsed');
            }
        }

        // ==================== AGENT MODAL (Multi-Select) ====================
        let selectedAgents = new Set(); // Multi-select support

        function openAgentModal() {
            const grid = document.getElementById('agentGrid');
            const agentCounts = {};
            tickets.forEach(t => {
                if (t.assignee) agentCounts[t.assignee] = (agentCounts[t.assignee] || 0) + 1;
            });

            // Build grid with all agents
            grid.innerHTML = Object.keys(agents).filter(a => agentCounts[a]).map(name => `
                <div class="agent-grid-item ${selectedAgents.has(name) ? 'selected' : ''}"
                     onclick="toggleAgentSelection('${name}')">
                    <div class="agent-grid-avatar">${getAgentAvatarImg(name)}</div>
                    <span class="agent-grid-name">${name.split(' ')[0]}</span>
                    <span class="agent-grid-count">${agentCounts[name] || 0}</span>
                </div>
            `).join('');

            document.getElementById('agentModal').classList.add('active');
            document.body.classList.add('modal-open');  // Lock body scroll
        }

        function closeAgentModal() {
            document.getElementById('agentModal').classList.remove('active');
            document.body.classList.remove('modal-open');  // Unlock body scroll
        }

        function closeAgentModalOnBackdrop(event) {
            if (event.target === event.currentTarget) {
                closeAgentModal();
            }
        }

        function toggleAgentSelection(name) {
            if (selectedAgents.has(name)) {
                selectedAgents.delete(name);
            } else {
                selectedAgents.add(name);
            }
            // Update visual state
            const items = document.querySelectorAll('.agent-grid-item');
            items.forEach(item => {
                const itemName = item.querySelector('.agent-grid-name').textContent;
                const fullName = Object.keys(agents).find(a => a.split(' ')[0] === itemName);
                if (fullName && selectedAgents.has(fullName)) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
        }

        function clearAgentSelection() {
            selectedAgents.clear();
            document.querySelectorAll('.agent-grid-item').forEach(item => {
                item.classList.remove('selected');
            });
        }

        function applyAgentFilter() {
            // Update the filter label
            const count = selectedAgents.size;
            const label = document.getElementById('agentFilterLabel');
            if (count === 0) {
                label.textContent = 'üë• All Agents';
                activeAgentFilter = null;
            } else if (count === 1) {
                const name = [...selectedAgents][0];
                label.textContent = `üë§ ${name.split(' ')[0]}`;
                activeAgentFilter = name;
            } else {
                label.textContent = `üë• ${count} Agents`;
                activeAgentFilter = [...selectedAgents]; // Array for multi-select
            }

            closeAgentModal();
            updateFilterButtons();
            renderBoard();
            renderList();
        }

        // Legacy support - used by roster view agent cards
        function filterByAgent(agentName) {
            selectedAgents.clear();
            if (agentName) {
                selectedAgents.add(agentName);
                activeAgentFilter = agentName;
                document.getElementById('agentFilterLabel').textContent = `üë§ ${agentName.split(' ')[0]}`;
            } else {
                activeAgentFilter = null;
                document.getElementById('agentFilterLabel').textContent = 'üë• All Agents';
            }
            updateFilterButtons();
            renderBoard();
            renderList();
        }

        document.addEventListener('click', (e) => {
            // Close priority and effort dropdowns
            if (!e.target.closest('.filter-dropdown')) {
                document.querySelectorAll('.filter-dropdown-menu').forEach(d => d.classList.remove('active'));
            }
        });

        function renderBoard() {
            columns.forEach(col => {
                const container = document.getElementById(`col-${col.id}`);
                let colTickets = tickets.filter(t => t.state === col.id);
                document.getElementById(`count-${col.id}`).textContent = colTickets.length;

                // Sort tickets: P0 first, stale reviews second, then by recency (higher ID = newer)
                colTickets.sort((a, b) => {
                    // P0 tickets always first
                    if (a.priority === 'P0' && b.priority !== 'P0') return -1;
                    if (b.priority === 'P0' && a.priority !== 'P0') return 1;

                    // Stale reviews (>2 days) second
                    const aStale = isStaleReview(a);
                    const bStale = isStaleReview(b);
                    if (aStale && !bStale) return -1;
                    if (bStale && !aStale) return 1;

                    // Then by ticket ID descending (newer tickets first)
                    const aNum = parseInt(a.id.replace(/\D/g, '')) || 0;
                    const bNum = parseInt(b.id.replace(/\D/g, '')) || 0;
                    return bNum - aNum;
                });

                if (colTickets.length === 0) {
                    container.innerHTML = '<div class="empty-state">No tickets</div>';
                } else {
                    container.innerHTML = colTickets.map(t => {
                        // Search filter
                        let isFiltered = false;
                        if (searchQuery) {
                            const searchTarget = `${t.id} ${t.title} ${t.assignee || ''} ${t.tags.join(' ')}`.toLowerCase();
                            isFiltered = !searchTarget.includes(searchQuery);
                        }

                        // Agent filter (supports multi-select)
                        if (activeAgentFilter) {
                            if (Array.isArray(activeAgentFilter)) {
                                // Multi-select: show if assignee is in the array
                                isFiltered = isFiltered || !activeAgentFilter.includes(t.assignee);
                            } else {
                                // Single select: exact match
                                isFiltered = isFiltered || t.assignee !== activeAgentFilter;
                            }
                        }

                        // Priority and effort filters
                        if (activeFilter !== 'all') {
                            const priorityFilters = ['p0', 'p1', 'p2', 'p3'];
                            const effortFilters = ['quick-win', 'hustle', 'deep-work', 'marathon'];

                            if (priorityFilters.includes(activeFilter)) {
                                // Filter by priority
                                isFiltered = isFiltered || t.priority.toLowerCase() !== activeFilter;
                            } else if (effortFilters.includes(activeFilter)) {
                                // Filter by effort
                                isFiltered = isFiltered || t.effort !== activeFilter;
                            }
                        }

                        // TKT-105: Stale Reviews filter - show only tickets >2 days in REVIEW
                        if (activeStaleFilter) {
                            isFiltered = isFiltered || !isStaleReview(t);
                        }

                        return renderTicket(t, isFiltered);
                    }).join('');
                }
            });
            updateStats();
        }

        function renderTicket(t, isFiltered = false) {
            const passedGates = gates.filter(g => getGateStatus(t.gates, g.id) === 'passed').length;

            // Time tracking
            const timeClass = t.daysSpent <= 1 ? 'fast' : t.daysSpent <= 3 ? 'medium' : 'slow';
            const timeBadge = t.daysSpent != null ? `<span class="time-badge ${timeClass}">‚è±Ô∏è ${t.daysSpent}d</span>` : '';

            // TKT-105: Review Age Badge for tickets in REVIEW state
            const reviewAgeBadge = getReviewAgeBadge(t);

            // RETRO ticket styling
            const isRetro = t.id.startsWith('RETRO-') || t.isRetro;
            const retroClass = isRetro ? 'is-retro' : '';

            // Sport icon based on assignee
            const sport = agentSports[t.assignee] || 'cricket';
            const sportClass = `sport-${sport}`;

            // Agent border color
            const agentClass = agentClasses[t.assignee] || '';

            // Illini badge for tickets needing Founder review
            // Shows on: tickets assigned to Founder (not DONE), tickets with plans awaiting approval,
            // VALIDATION state, or REVIEW state ready for Founder
            const needsFounderReview = (t.assignee === 'Founder' && t.state !== 'DONE') ||
                t.plan || t.state === 'VALIDATION' ||
                (t.state === 'REVIEW' && t.gates?.domain_sanity === 'YES' && t.gates?.system_check === 'PASS');
            const founderClass = needsFounderReview ? 'needs-founder-review' : '';

            return `
                <div class="ticket ${isFiltered ? 'filtered-out' : ''} ${retroClass} ${sportClass} ${agentClass} ${founderClass}" data-priority="${t.priority}" onclick="openModal('${t.id}')">
                    <div class="ticket-top">
                        <div class="agent-avatar" title="${t.assignee || 'Unassigned'}">${getAgentAvatarImg(t.assignee)}</div>
                        <div class="ticket-info">
                            <div class="ticket-id">${t.id} ${timeBadge}${reviewAgeBadge}</div>
                            <div class="ticket-title">${t.title}</div>
                            <div class="ticket-agent">${t.assignee || 'Unassigned'}</div>
                        </div>
                    </div>
                    <div class="ticket-meta">
                        <span class="priority priority-${t.priority.toLowerCase()}">${t.priority}</span>
                        ${t.effort ? `<span class="effort effort-${t.effort}">${effortLevels[t.effort]?.name || t.effort}</span>` : ''}
                        ${t.tags.slice(0, 2).map(tag => `<span class="tag ${getTagClass(tag)}">${tag}</span>`).join('')}
                    </div>
                    ${t.prd || t.output || t.review || t.branch ? `
                        <div class="ticket-links">
                            ${t.branch ? `<a href="https://github.com/dwijesh-r/cricket-playbook/tree/${t.branch}" target="_blank" rel="noopener" class="link-btn branch-btn" onclick="event.stopPropagation()">üåø ${t.branch.replace('feature/', '').substring(0, 20)}</a>` : ''}
                            ${t.prd ? `<a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/${t.prd}" target="_blank" rel="noopener" class="link-btn" onclick="event.stopPropagation()">üìÑ PRD</a>` : ''}
                            ${t.output ? `<a href="https://github.com/dwijesh-r/cricket-playbook/tree/main/${t.output}" target="_blank" rel="noopener" class="link-btn" onclick="event.stopPropagation()">üìÅ Output</a>` : ''}
                            ${t.review ? `<a href="https://github.com/dwijesh-r/cricket-playbook/tree/main/${t.review}" target="_blank" rel="noopener" class="link-btn review-btn" onclick="event.stopPropagation()">üåπ Review</a>` : ''}
                        </div>
                    ` : ''}
                    <div class="gate-progress">
                        ${gates.map((g, i) => `<div class="gate-step ${i < passedGates ? 'passed' : i === passedGates ? 'current' : ''}"></div>`).join('')}
                    </div>
                </div>
            `;
        }

        function renderRosterHero() {
            const hero = document.getElementById('rosterHero');
            const founderTickets = tickets.filter(t => t.assignee === 'Founder');
            const approvedCount = tickets.filter(t => t.gates && (t.gates.florentino_gate === 'APPROVED' || t.gates.founder_validation === 'APPROVED')).length;
            const validationCount = tickets.filter(t => t.state === 'VALIDATION').length;
            const doneCount = tickets.filter(t => t.state === 'DONE').length;

            // Compute team skill categories ‚Äî use max score per category for cleaner radar
            const skillCategories = {
                'Leadership': { agents: ['Tom Brady', 'Florentino Perez'], skills: ['Leadership', 'Planning', 'Vision', 'Authority', 'Strategy'] },
                'Engineering': { agents: ['Stephen Curry', 'Brad Stevens', 'Brock Purdy'], skills: ['Python', 'Architecture', 'CI_CD', 'Data_Pipeline', 'DuckDB', 'Systems'] },
                'Analytics': { agents: ['Stephen Curry', 'Jose Mourinho', 'Pep Guardiola'], skills: ['Analytics', 'Analysis', 'ML_Ops', 'Patterns', 'Matchups'] },
                'DevOps': { agents: ['Ime Udoka', 'Brad Stevens'], skills: ['DevOps', 'Automation', 'MLOps', 'Monitoring', 'Deployment'] },
                'Quality': { agents: ["N'Golo Kant√©", 'Brad Stevens', 'Jayson Tatum'], skills: ['QA', 'Testing', 'Coverage', 'Quality', 'Diligence', 'Audit'] },
                'Design': { agents: ['Kevin de Bruyne', 'Jayson Tatum'], skills: ['Visualization', 'UI_Design', 'CSS', 'Creativity', 'JavaScript', 'UX', 'Readability'] },
                'Domain': { agents: ['Andy Flower', 'Virat Kohli', 'Pep Guardiola'], skills: ['Cricket', 'Domain', 'Tactics', 'Editorial', 'Writing'] },
                'Comms': { agents: ['LeBron James', 'Tom Brady'], skills: ['Communication', 'Marketing', 'Social', 'Branding'] }
            };

            // Per-agent, per-category scores for overlay chart
            const agentCategoryData = {};
            const agentColorMap = {
                'Tom Brady': '#0a84ff', 'Stephen Curry': '#ffc72c', 'Kevin de Bruyne': '#6cabdd',
                'Jose Mourinho': '#5e5ce6', 'LeBron James': '#bf5af2', 'Brad Stevens': '#30d158',
                'Brock Purdy': '#ff453a', "N'Golo Kant√©": '#64d2ff', 'Pep Guardiola': '#00c7be',
                'Florentino Perez': '#ffd60a', 'Ime Udoka': '#ff9f0a', 'Andy Flower': '#ff375f',
                'Virat Kohli': '#ff6b35', 'Jayson Tatum': '#32d74b'
            };
            const categories = Object.keys(skillCategories);
            Object.keys(agents).forEach(name => {
                if (!agentSkills[name] || name === 'Founder') return;
                agentCategoryData[name] = {};
                categories.forEach(cat => {
                    const info = skillCategories[cat];
                    const matching = [];
                    Object.entries(agentSkills[name].skills).forEach(([skill, score]) => {
                        if (info.skills.includes(skill)) matching.push(score);
                    });
                    agentCategoryData[name][cat] = matching.length > 0
                        ? matching.reduce((a, b) => a + b, 0) / matching.length : 0;
                });
            });
            // Also compute aggregate for reference
            const categoryAgentCount = {};
            categories.forEach(cat => {
                categoryAgentCount[cat] = skillCategories[cat].agents.length;
            });

            hero.innerHTML = `
                <div class="founder-card">
                    <div class="founder-avatar">${getAgentAvatarImg('Founder')}</div>
                    <div class="founder-name">The Founder</div>
                    <div class="founder-role">Il Padrino</div>
                    <div class="founder-desc">
                        The Founder sits at the apex of every decision. No ticket ships without passing
                        through the Founder's Gate ‚Äî a four-checkpoint validation ensuring domain sanity,
                        system integrity, and strategic alignment. When agents hit blockers or need
                        cross-team arbitration, the Founder steps in as the final authority. From greenlighting
                        EPICs to breaking deadlocks between competing priorities, every major call flows
                        through this desk.
                    </div>
                    <div class="founder-stat-row">
                        <div class="founder-stat">
                            <div class="founder-stat-val">${approvedCount}</div>
                            <div class="founder-stat-lbl">Approved</div>
                        </div>
                        <div class="founder-stat">
                            <div class="founder-stat-val">${validationCount}</div>
                            <div class="founder-stat-lbl">Awaiting</div>
                        </div>
                        <div class="founder-stat">
                            <div class="founder-stat-val">${doneCount}</div>
                            <div class="founder-stat-lbl">Delivered</div>
                        </div>
                    </div>
                    <div class="founder-quote">"I'm gonna make them an offer they can't refuse."</div>
                </div>
                <div class="spider-card">
                    <div class="spider-title">Team Skill Map</div>
                    <div class="spider-subtitle">Coverage depth across 8 skill areas ‚Äî who covers what</div>
                    <div class="skill-map-grid" id="skillMapGrid"></div>
                </div>
            `;

            // Render skill map tiles
            renderSkillMap(categories, skillCategories, agentCategoryData, agentColorMap, categoryAgentCount);
        }

        function renderSkillMap(categories, skillCats, agentData, colorMap, agentCounts) {
            const grid = document.getElementById('skillMapGrid');
            if (!grid) return;

            grid.innerHTML = categories.map(cat => {
                const info = skillCats[cat];
                const count = agentCounts[cat] || 0;
                const depth = count >= 3 ? 'good' : count === 2 ? 'moderate' : 'thin';
                const depthLabel = count >= 3 ? 'Deep' : count === 2 ? 'OK' : 'Thin';
                const badgeClass = count >= 3 ? 'badge-good' : count === 2 ? 'badge-moderate' : 'badge-thin';

                // Compute avg score for this category
                const vals = info.agents.map(name => {
                    if (!agentData[name]) return 0;
                    return agentData[name][cat] || 0;
                }).filter(v => v > 0);
                const avgScore = vals.length > 0 ? vals.reduce((a, b) => a + b, 0) / vals.length : 0;

                // Score bar: percentage on 6-10 scale
                const barPct = Math.max(0, Math.min(100, ((avgScore - 6) / 4) * 100));
                const barClass = avgScore >= 9 ? 'bar-green' : avgScore >= 8 ? 'bar-amber' : 'bar-red';

                // Agent avatars
                const avatarHtml = info.agents.map(name => {
                    const color = colorMap[name] || 'var(--border)';
                    return `<div class="skill-tile-avatar" title="${name}" style="border-color: ${color}">${getAgentAvatarImg(name)}</div>`;
                }).join('');

                return `<div class="skill-tile" data-depth="${depth}">
                    <div class="skill-tile-header">
                        <span class="skill-tile-name">${cat}</span>
                        <span class="skill-tile-score">${avgScore.toFixed(1)}</span>
                    </div>
                    <div class="skill-tile-bar"><div class="skill-tile-bar-fill ${barClass}" style="width: ${barPct}%"></div></div>
                    <div class="skill-tile-agents">
                        ${avatarHtml}
                        <span class="skill-tile-depth-badge ${badgeClass}">${depthLabel}</span>
                    </div>
                </div>`;
            }).join('');
        }

        function renderRoster() {
            renderRosterHero();
            const grid = document.getElementById('rosterGrid');
            const agentStats = {};

            Object.keys(agents).forEach(name => {
                const agentTickets = tickets.filter(t => t.assignee === name);
                const done = agentTickets.filter(t => t.state === 'DONE');

                agentStats[name] = {
                    total: agentTickets.length,
                    done: done.length,
                    running: agentTickets.filter(t => t.state === 'RUNNING').length,
                    blocked: agentTickets.filter(t => t.state === 'BLOCKED').length,
                    p0: agentTickets.filter(t => t.priority === 'P0').length,
                    p1: agentTickets.filter(t => t.priority === 'P1').length,
                    p2: agentTickets.filter(t => t.priority === 'P2').length,
                    p3: agentTickets.filter(t => t.priority === 'P3').length,
                    tickets: agentTickets.slice(0, 3)
                };
            });

            grid.innerHTML = Object.entries(agents)
                .filter(([name]) => !['Florentino P√©rez', 'Founder'].includes(name)) // Avoid duplicates; Founder shown in hero
                .sort((a, b) => {
                    // Agents with tickets first, then by total count
                    const aTotal = agentStats[a[0]]?.total || 0;
                    const bTotal = agentStats[b[0]]?.total || 0;
                    if (aTotal === 0 && bTotal > 0) return 1;
                    if (bTotal === 0 && aTotal > 0) return -1;
                    return bTotal - aTotal;
                })
                .map(([name, info]) => {
                    const stats = agentStats[name] || { total: 0, done: 0, running: 0, blocked: 0, p0: 0, p1: 0, p2: 0, p3: 0, tickets: [] };
                    const completionRate = stats.total ? Math.round((stats.done / stats.total) * 100) : 0;
                    const isAvailable = stats.total === 0;

                    return `
                        <div class="agent-card ${isAvailable ? 'agent-available' : ''}" onclick="filterByAgent('${name}'); showView('board');">
                            <div class="agent-card-header">
                                <div class="agent-card-avatar">${getAgentAvatarImg(name)}</div>
                                <div class="agent-card-info">
                                    <h3>${name}</h3>
                                    <div class="agent-card-role">${info.role}</div>
                                    <div class="agent-card-team">${info.team}</div>
                                </div>
                                ${isAvailable ? '<div class="available-badge">‚ú® Available</div>' : ''}
                            </div>

                            ${isAvailable ? `
                            <div class="agent-available-message">
                                <p>üéØ Ready for new assignments</p>
                            </div>
                            ` : `
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">${stats.total}</div>
                                    <div class="agent-stat-label">Tickets</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value" style="color: var(--accent-green)">${stats.done}</div>
                                    <div class="agent-stat-label">Done</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value" style="color: var(--accent-blue)">${stats.running}</div>
                                    <div class="agent-stat-label">Running</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value" style="color: var(--accent-red)">${stats.blocked}</div>
                                    <div class="agent-stat-label">Blocked</div>
                                </div>
                            </div>

                            <div class="agent-priority-breakdown">
                                <div class="priority-chip p0">P0: ${stats.p0}</div>
                                <div class="priority-chip p1">P1: ${stats.p1}</div>
                                <div class="priority-chip p2">P2: ${stats.p2}</div>
                            </div>

                            <div class="agent-progress">
                                <div class="agent-progress-label">
                                    <span>Completion Rate</span>
                                    <span style="color: var(--accent-green)">${completionRate}%</span>
                                </div>
                                <div class="agent-progress-bar">
                                    <div class="agent-progress-fill" style="width: ${completionRate}%"></div>
                                </div>
                            </div>
                            `}

                            ${stats.tickets.length ? `
                                <div class="agent-recent">
                                    <div class="agent-recent-title">Recent Tickets</div>
                                    ${stats.tickets.map(t => `
                                        <div class="agent-recent-item">
                                            <div class="recent-status ${t.state.toLowerCase()}"></div>
                                            <div class="recent-title">${t.title}</div>
                                            <div class="recent-effort">${t.effort ? effortLevels[t.effort]?.name || t.effort : ''}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}

                            ${agentSkills[name] ? `
                            <div class="agent-skills">
                                <div class="skills-header">
                                    <span class="skills-title">üéØ Skill Ratings</span>
                                </div>
                                <div class="skills-grid">
                                    ${Object.entries(agentSkills[name].skills).slice(0, 5).map(([skill, score]) => {
                                        const scoreClass = score >= 9 ? 'high' : score >= 7 ? 'medium' : 'low';
                                        const color = score >= 9 ? 'var(--accent-green)' : score >= 7 ? 'var(--accent-yellow)' : 'var(--accent-red)';
                                        return `
                                        <div class="skill-row">
                                            <span class="skill-name">${skill.replace(/_/g, ' ')}</span>
                                            <div class="skill-bar">
                                                <div class="skill-fill" style="width: ${score * 10}%; background: ${color}"></div>
                                            </div>
                                            <span class="skill-score ${scoreClass}">${score}/10</span>
                                        </div>
                                        `;
                                    }).join('')}
                                </div>
                                <div class="agent-traits">
                                    ${agentSkills[name].strengths.slice(0, 2).map(s => `<span class="trait-chip strength">‚úì ${s}</span>`).join('')}
                                    ${agentSkills[name].weaknesses.slice(0, 1).map(w => `<span class="trait-chip weakness">‚ñ≥ ${w}</span>`).join('')}
                                </div>
                            </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
        }

        // ==================== EPIC VIEW (TKT-129) ====================
        let epicFilter = 'all';
        let epicSearchQuery = '';
        let epicSummaryFilter = null; // null = show all, 'active' | 'stale' | 'complete' | 'incomplete'

        function handleEpicSearch(query) {
            epicSearchQuery = query.toLowerCase().trim();
            renderEpicView();
        }

        function filterEpics(type) {
            epicFilter = type;
            epicSummaryFilter = null; // Reset summary filter when type filter changes
            // Update filter button states
            document.querySelectorAll('.epic-filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.toLowerCase() === type || (type === 'all' && btn.textContent === 'All')) {
                    btn.classList.add('active');
                }
            });
            renderEpicView();
        }

        function setEpicSummaryFilter(filter) {
            epicSummaryFilter = epicSummaryFilter === filter ? null : filter; // Toggle off if same
            renderEpicView();
        }

        function toggleEpicCard(epicId) {
            const card = document.querySelector(`.epic-card[data-epic="${epicId}"]`);
            if (card) {
                card.classList.toggle('expanded');
            }
        }

        function getStateClass(state) {
            const stateMap = {
                'DONE': 'done',
                'IN_PROGRESS': 'in-progress',
                'RUNNING': 'in-progress',
                'REVIEW': 'review',
                'VALIDATION': 'validation',
                'TODO': 'todo',
                'BACKLOG': 'todo',
                'BLOCKED': 'todo',
                'IDEA': 'todo'
            };
            return stateMap[state] || 'todo';
        }

        function getStateLabel(state) {
            const labelMap = {
                'DONE': '‚úì Done',
                'IN_PROGRESS': '‚ñ∂ In Progress',
                'RUNNING': '‚ñ∂ Running',
                'REVIEW': 'üåπ Review',
                'VALIDATION': 'üîç Validation',
                'TODO': '‚óã Todo',
                'BACKLOG': '‚óã Backlog',
                'BLOCKED': '‚ö† Blocked',
                'IDEA': 'üí° Idea'
            };
            return labelMap[state] || state;
        }

        function renderEpicView() {
            const summaryEl = document.getElementById('epicSummary');
            const treeEl = document.getElementById('epicTree');

            // Calculate summary stats
            const summary = getHierarchySummary();
            const doneTickets = tickets.filter(t => t.state === 'DONE').length;
            const overallProgress = Math.round((doneTickets / tickets.length) * 100);
            const staleReviews = tickets.filter(t => isStaleReview(t)).length;
            const activeTickets = tickets.filter(t => ['RUNNING', 'IN_PROGRESS'].includes(t.state)).length;

            summaryEl.innerHTML = `
                <div class="epic-summary-card ${epicSummaryFilter === null ? 'active-filter' : ''}" onclick="setEpicSummaryFilter(null)">
                    <div class="epic-summary-value">${summary.epics}</div>
                    <div class="epic-summary-label">All EPICs</div>
                </div>
                <div class="epic-summary-card ${epicSummaryFilter === 'active' ? 'active-filter' : ''}" onclick="setEpicSummaryFilter('active')">
                    <div class="epic-summary-value">${activeTickets}</div>
                    <div class="epic-summary-label">In Progress</div>
                </div>
                <div class="epic-summary-card ${staleReviews > 0 ? 'has-warning' : ''} ${epicSummaryFilter === 'stale' ? 'active-filter' : ''}" onclick="setEpicSummaryFilter('stale')">
                    <div class="epic-summary-value">${staleReviews}</div>
                    <div class="epic-summary-label">Stale Reviews</div>
                </div>
                <div class="epic-summary-card ${epicSummaryFilter === 'incomplete' ? 'active-filter' : ''}" onclick="setEpicSummaryFilter('incomplete')">
                    <div class="epic-summary-value">${overallProgress}%</div>
                    <div class="epic-summary-label">Overall Progress</div>
                </div>
            `;

            // Filter EPICs by type
            let filteredEpics = epicFilter === 'all'
                ? [...epics]
                : epics.filter(e => e.type === epicFilter);

            // Filter EPICs by search query
            if (epicSearchQuery) {
                filteredEpics = filteredEpics.filter(epic => {
                    const epicTickets = getTicketsByEpic(epic.id);
                    const matchesEpic = epic.id.toLowerCase().includes(epicSearchQuery) ||
                        epic.title.toLowerCase().includes(epicSearchQuery) ||
                        epic.owner.toLowerCase().includes(epicSearchQuery) ||
                        epic.goal.toLowerCase().includes(epicSearchQuery);
                    const matchesTicket = epicTickets.some(t =>
                        t.id.toLowerCase().includes(epicSearchQuery) ||
                        t.title.toLowerCase().includes(epicSearchQuery) ||
                        (t.assignee && t.assignee.toLowerCase().includes(epicSearchQuery))
                    );
                    return matchesEpic || matchesTicket;
                });
            }

            // Apply summary card filter
            if (epicSummaryFilter === 'active') {
                filteredEpics = filteredEpics.filter(epic => {
                    const et = getTicketsByEpic(epic.id);
                    return et.some(t => ['RUNNING', 'IN_PROGRESS'].includes(t.state));
                });
            } else if (epicSummaryFilter === 'stale') {
                filteredEpics = filteredEpics.filter(epic => {
                    const et = getTicketsByEpic(epic.id);
                    return et.some(t => isStaleReview(t));
                });
            } else if (epicSummaryFilter === 'incomplete') {
                filteredEpics = filteredEpics.filter(epic => {
                    const progress = calculateEpicProgress(epic.id);
                    return progress < 100;
                });
            }

            // Sort EPICs: Active first, then by progress (incomplete first), 100% complete last
            const activeStates = ['IN_PROGRESS', 'RUNNING', 'REVIEW', 'VALIDATION'];
            filteredEpics.sort((a, b) => {
                const aTickets = getTicketsByEpic(a.id);
                const bTickets = getTicketsByEpic(b.id);
                const aProgress = calculateEpicProgress(a.id);
                const bProgress = calculateEpicProgress(b.id);
                const aActive = aTickets.some(t => activeStates.includes(t.state));
                const bActive = bTickets.some(t => activeStates.includes(t.state));

                // Active EPICs first
                if (aActive && !bActive) return -1;
                if (!aActive && bActive) return 1;

                // 100% complete EPICs last
                if (aProgress === 100 && bProgress < 100) return 1;
                if (bProgress === 100 && aProgress < 100) return -1;

                // Then by progress (lower progress = more work = higher priority)
                if (aProgress !== bProgress) return aProgress - bProgress;

                // Finally by ticket count (more tickets = more complex = higher visibility)
                return bTickets.length - aTickets.length;
            });

            // Render EPIC cards
            treeEl.innerHTML = filteredEpics.map(epic => {
                const epicTickets = getTicketsByEpic(epic.id);
                const progress = calculateEpicProgress(epic.id);
                const ticketCount = epicTickets.length;

                // Group tickets into parent tickets (with children) and standalone
                const parentTickets = epicTickets.filter(t => t.ticketType === 'parent' || getChildren(t.id).length > 0);
                const childTicketIds = new Set(epicTickets.filter(t => t.parent).map(t => t.id));
                const standaloneTickets = epicTickets.filter(t => !t.parent && !parentTickets.includes(t));

                // Build hierarchical ticket list
                let ticketListHtml = '';

                // Render parent tickets with their children
                parentTickets.forEach(parent => {
                    const children = getChildren(parent.id);
                    ticketListHtml += `
                        <div class="epic-ticket is-parent">
                            <span class="epic-ticket-id">${parent.id}</span>
                            <span class="epic-ticket-title">${parent.title}</span>
                            <span class="epic-ticket-state ${getStateClass(parent.state)}">${getStateLabel(parent.state)}</span>
                        </div>
                    `;
                    children.forEach(child => {
                        ticketListHtml += `
                            <div class="epic-ticket is-child">
                                <span class="epic-ticket-id">${child.id}</span>
                                <span class="epic-ticket-title">${child.title}</span>
                                <span class="epic-ticket-state ${getStateClass(child.state)}">${getStateLabel(child.state)}</span>
                            </div>
                        `;
                    });
                });

                // Render standalone tickets
                standaloneTickets.forEach(ticket => {
                    if (!childTicketIds.has(ticket.id)) {
                        ticketListHtml += `
                            <div class="epic-ticket">
                                <span class="epic-ticket-id">${ticket.id}</span>
                                <span class="epic-ticket-title">${ticket.title}</span>
                                <span class="epic-ticket-state ${getStateClass(ticket.state)}">${getStateLabel(ticket.state)}</span>
                            </div>
                        `;
                    }
                });

                return `
                    <div class="epic-card" data-epic="${epic.id}">
                        <div class="epic-card-header" onclick="toggleEpicCard('${epic.id}')">
                            <div class="epic-card-info">
                                <div class="epic-card-title">
                                    <span class="epic-id">${epic.id}</span>
                                    ${epic.title}
                                </div>
                                <div class="epic-card-meta">
                                    <span class="epic-type-badge ${epic.type}">${epic.type}</span>
                                    <span>${getAgentAvatarImg(epic.owner, 'epic-owner-avatar')} ${epic.owner}</span>
                                    <span>üìã ${ticketCount} tickets</span>
                                </div>
                            </div>
                            <div class="epic-progress-container">
                                <div class="epic-progress-bar">
                                    <div class="epic-progress-fill" style="width: ${progress}%"></div>
                                </div>
                                <div class="epic-progress-text">${progress}%</div>
                            </div>
                            <span class="epic-card-toggle">‚ñº</span>
                        </div>
                        <div class="epic-card-body">
                            <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 12px;">
                                <strong>Goal:</strong> ${epic.goal}
                            </div>
                            <div class="epic-ticket-list">
                                ${ticketListHtml || '<div style="color: var(--text-tertiary); padding: 12px;">No tickets in this EPIC</div>'}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateStats() {
            document.getElementById('statTotal').textContent = tickets.length;
            document.getElementById('statBacklog').textContent = tickets.filter(t => t.state === 'BACKLOG').length;
            document.getElementById('statRunning').textContent = tickets.filter(t => t.state === 'RUNNING').length;
            document.getElementById('statReview').textContent = tickets.filter(t => t.state === 'REVIEW').length;
            document.getElementById('statFounder').textContent = tickets.filter(t => t.state === 'VALIDATION').length;
            document.getElementById('statDone').textContent = tickets.filter(t => t.state === 'DONE').length;
        }

        function openModal(ticketId) {
            const t = tickets.find(x => x.id === ticketId);
            if (!t) return;

            document.getElementById('modalAvatar').innerHTML = getAgentAvatarImg(t.assignee);
            document.getElementById('modalTitle').textContent = t.title;
            document.getElementById('modalSubtitle').textContent = `${t.id} ¬∑ ${t.priority} ¬∑ ${t.assignee || 'Unassigned'}`;

            // Render context (Ask/Goal/Reason/Audible)
            const ctx = t.context || {};
            document.getElementById('modalContext').innerHTML = `
                <div class="context-card ask">
                    <div class="context-label">Ask</div>
                    <div class="context-text">${ctx.ask || 'Not defined'}</div>
                </div>
                <div class="context-card goal">
                    <div class="context-label">Goal</div>
                    <div class="context-text">${ctx.goal || 'Not defined'}</div>
                </div>
                <div class="context-card reason">
                    <div class="context-label">Reason</div>
                    <div class="context-text">${ctx.reason || 'Not defined'}</div>
                </div>
                <div class="context-card audible">
                    <div class="context-label">Audible</div>
                    <div class="context-text">${ctx.audible || 'Not defined'}</div>
                </div>
            `;

            document.getElementById('modalGates').innerHTML = gates.map(g => {
                const status = getGateStatus(t.gates, g.id);
                const icon = status === 'passed' ? '‚úì' : status === 'pending' ? '‚óê' : '‚óã';
                return `
                    <div class="gate-item">
                        <div class="gate-icon ${status}">${icon}</div>
                        <div class="gate-info">
                            <div class="gate-name">Step ${g.step}: ${g.name}</div>
                            <div class="gate-approver">${g.approver}</div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('modalDetails').innerHTML = `
                <div class="detail-item">
                    <div class="detail-label">Epic</div>
                    <div class="detail-value">${t.epic || '‚Äî'}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Progress</div>
                    <div class="detail-value">${t.progress}%</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Days Spent</div>
                    <div class="detail-value">${t.daysSpent != null ? t.daysSpent + ' days' : 'N/A'}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Iterations</div>
                    <div class="detail-value">${t.iterations != null ? t.iterations : 'N/A'}</div>
                </div>
            `;

            // Build structured link categories
            const hasPrd = !!t.prd || !!t.plan;
            const hasOutput = !!t.output;
            const hasReview = !!t.review || (t.documents && t.documents.length > 0);
            const hasCustomLinks = t.links && t.links.length > 0;

            // Count links per category
            const prdCount = (t.prd ? 1 : 0) + (t.plan ? 1 : 0);
            const outputCount = t.output ? 1 : 0;
            const reviewCount = (t.review ? 1 : 0) + (t.documents ? t.documents.length : 0);
            const customCount = t.links ? t.links.length : 0;

            // Render founder review instruction bubble if present
            const founderBubbleHtml = t.founderReviewNote ? `
                <div class="founder-instruction-bubble">
                    <div class="founder-instruction-header">
                        <span class="founder-instruction-icon">üåπ</span>
                        <span class="founder-instruction-label">Founder Review Required</span>
                    </div>
                    <div class="founder-instruction-text">${t.founderReviewNote}</div>
                </div>
            ` : '';

            document.getElementById('modalLinks').innerHTML = `
                ${founderBubbleHtml}
                <!-- PRD & Documentation -->
                <div class="link-category cat-prd ${hasPrd ? 'open has-content' : ''}" onclick="this.classList.toggle('open')">
                    <div class="link-category-header">
                        <span class="link-category-icon">üìÑ</span>
                        <span class="link-category-title">PRD & Documentation</span>
                        <span class="link-category-count">${prdCount}</span>
                        <span class="link-category-chevron">‚ñº</span>
                    </div>
                    <div class="link-category-content">
                        ${t.prd
                            ? `<a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/${t.prd}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">üìã</span><span class="modal-link-text">PRD Document</span><span class="modal-link-arrow">‚Üí</span></a>`
                            : ''}
                        ${t.plan
                            ? (t.plan.includes('/') && !t.plan.startsWith('1.')
                                ? `<a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/${t.plan}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">üìù</span><span class="modal-link-text">Implementation Plan</span><span class="modal-link-arrow">‚Üí</span></a>`
                                : `<div class="modal-plan-inline"><span class="modal-link-icon">üìù</span><span class="modal-plan-text">${t.plan}</span></div>`)
                            : ''}
                        ${!hasPrd ? '<div class="link-category-empty">No documentation available yet</div>' : ''}
                    </div>
                </div>

                <!-- Outputs & Artifacts -->
                <div class="link-category cat-output ${hasOutput ? 'open has-content' : ''}" onclick="this.classList.toggle('open')">
                    <div class="link-category-header">
                        <span class="link-category-icon">üìÅ</span>
                        <span class="link-category-title">Outputs & Artifacts</span>
                        <span class="link-category-count">${outputCount}</span>
                        <span class="link-category-chevron">‚ñº</span>
                    </div>
                    <div class="link-category-content">
                        ${t.output
                            ? `<a href="https://github.com/dwijesh-r/cricket-playbook/tree/main/${t.output}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">üìÇ</span><span class="modal-link-text">Output Directory</span><span class="modal-link-arrow">‚Üí</span></a>`
                            : '<div class="link-category-empty">No outputs generated yet</div>'}
                    </div>
                </div>

                <!-- Founder Review -->
                <div class="link-category cat-review ${hasReview ? 'open has-content' : ''}" onclick="this.classList.toggle('open')">
                    <div class="link-category-header">
                        <span class="link-category-icon">üåπ</span>
                        <span class="link-category-title">Founder Review</span>
                        <span class="link-category-count">${reviewCount}</span>
                        <span class="link-category-chevron">‚ñº</span>
                    </div>
                    <div class="link-category-content">
                        ${t.review
                            ? `<a href="https://github.com/dwijesh-r/cricket-playbook/tree/main/${t.review}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">‚úçÔ∏è</span><span class="modal-link-text">Review Document</span><span class="modal-link-arrow">‚Üí</span></a>`
                            : ''}
                        ${t.documents ? t.documents.map(doc => `<a href="https://github.com/dwijesh-r/cricket-playbook/blob/main/${doc.path}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">üìã</span><span class="modal-link-text">${doc.title}</span><span class="modal-link-arrow">‚Üí</span></a>`).join('') : ''}
                        ${!t.review && !(t.documents && t.documents.length) ? '<div class="link-category-empty">Pending founder sign-off</div>' : ''}
                    </div>
                </div>

                <!-- Related Links (custom links array) -->
                ${hasCustomLinks ? `
                <div class="link-category cat-links has-content" onclick="this.classList.toggle('open')">
                    <div class="link-category-header">
                        <span class="link-category-icon">üîó</span>
                        <span class="link-category-title">Related Links</span>
                        <span class="link-category-count">${customCount}</span>
                        <span class="link-category-chevron">‚ñº</span>
                    </div>
                    <div class="link-category-content">
                        ${t.links.map(link => `<a href="${link.url}" target="_blank" rel="noopener" class="modal-link" onclick="event.stopPropagation()"><span class="modal-link-icon">üîó</span><span class="modal-link-text">${link.label}</span><span class="modal-link-arrow">‚Üí</span></a>`).join('')}
                    </div>
                </div>
                ` : ''}
            `;

            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        function updateTime() {
            document.getElementById('navTime').textContent = new Date().toLocaleTimeString('en-US', { hour12: false });
        }

        function renderList() {
            // Filter tickets based on search query
            let filteredTickets = searchQuery ? tickets.filter(t => {
                const searchTarget = `${t.id} ${t.title} ${t.assignee || ''} ${t.tags.join(' ')}`.toLowerCase();
                return searchTarget.includes(searchQuery);
            }) : [...tickets];

            // Sort: P0 first, stale reviews second, then by recency (newer first)
            filteredTickets.sort((a, b) => {
                // P0 tickets first
                if (a.priority === 'P0' && b.priority !== 'P0') return -1;
                if (b.priority === 'P0' && a.priority !== 'P0') return 1;

                // Stale reviews second
                const aStale = isStaleReview(a);
                const bStale = isStaleReview(b);
                if (aStale && !bStale) return -1;
                if (bStale && !aStale) return 1;

                // Then by ticket ID descending (newer first)
                const aNum = parseInt(a.id.replace(/\D/g, '')) || 0;
                const bNum = parseInt(b.id.replace(/\D/g, '')) || 0;
                return bNum - aNum;
            });

            // Desktop Table
            const tbody = document.getElementById('ticketTableBody');
            tbody.innerHTML = filteredTickets.map(t => `
                <tr onclick="openModal('${t.id}')">
                    <td><span class="table-id">${t.id}</span></td>
                    <td><span class="table-title" title="${t.title}">${t.title}</span></td>
                    <td>
                        <div class="table-agent-cell">
                            <div class="table-avatar">${getAgentAvatarImg(t.assignee)}</div>
                            <span class="table-agent-name">${t.assignee || 'Unassigned'}</span>
                        </div>
                    </td>
                    <td><span class="table-state state-${t.state.toLowerCase()}">${t.state}</span></td>
                    <td><span class="table-sprint">${t.epic || '‚Äî'}</span></td>
                    <td><span class="table-priority priority-${t.priority.toLowerCase()}">${t.priority}</span></td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="flex: 1; height: 6px; background: var(--bg-tertiary); border-radius: 3px; overflow: hidden;">
                                <div style="height: 100%; width: ${t.progress}%; background: var(--accent-green); border-radius: 3px;"></div>
                            </div>
                            <span style="font-size: 12px; color: var(--text-secondary); min-width: 32px;">${t.progress}%</span>
                        </div>
                    </td>
                </tr>
            `).join('');

            // Mobile Cards
            const mobileCards = document.getElementById('mobileCards');
            mobileCards.innerHTML = filteredTickets.map(t => `
                <div class="mobile-card" onclick="openModal('${t.id}')">
                    <div class="mobile-card-header">
                        <div class="mobile-card-avatar">${getAgentAvatarImg(t.assignee)}</div>
                        <div class="mobile-card-main">
                            <div class="mobile-card-id">${t.id}</div>
                            <div class="mobile-card-title">${t.title}</div>
                        </div>
                    </div>
                    <div class="mobile-card-meta">
                        <span class="table-state state-${t.state.toLowerCase()}">${t.state}</span>
                        <span class="table-priority priority-${t.priority.toLowerCase()}">${t.priority}</span>
                    </div>
                    <div class="mobile-card-row">
                        <span class="mobile-card-label">Agent</span>
                        <span class="mobile-card-value">${t.assignee || 'Unassigned'}</span>
                    </div>
                    <div class="mobile-card-row">
                        <span class="mobile-card-label">Sprint / Epic</span>
                        <span class="mobile-card-value">${t.epic || '‚Äî'}</span>
                    </div>
                    <div class="mobile-card-row">
                        <span class="mobile-card-label">Progress</span>
                        <span class="mobile-card-value" style="color: var(--accent-green)">${t.progress}%</span>
                    </div>
                </div>
            `).join('');
        }

        function loadData() {
            renderBoard();
            renderList();
            renderRoster();
            renderEpicView();
            updateTime();
        }

        // Filter buttons
        document.querySelectorAll('.filter-btn[data-filter]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn[data-filter]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                activeFilter = btn.dataset.filter;
                renderBoard();
            });
        });

        // Init
        initTheme();
        initSportsBg();
        initBoard();
        loadData();
        setInterval(updateTime, 1000);

        // Handle resize for mobile collapsible columns
        let lastMobileState = window.innerWidth <= 600;
        window.addEventListener('resize', () => {
            const isMobile = window.innerWidth <= 600;
            if (isMobile !== lastMobileState) {
                lastMobileState = isMobile;
                initBoard();
                renderBoard();
                renderList();
            }
        });

        // Navigation Guide
        function toggleNavGuide() { document.getElementById('nav-guide-overlay').classList.toggle('active'); }
        function closeNavGuide(e) { if (e.target === e.currentTarget) toggleNavGuide(); }
    </script>

    <!-- Navigation Guide Button -->
    <button class="nav-guide-btn" onclick="toggleNavGuide()" title="Quick Navigation Guide">‚ùì</button>

    <!-- Navigation Guide Modal -->
    <div class="nav-guide-overlay" id="nav-guide-overlay" onclick="closeNavGuide(event)">
        <div class="nav-guide-modal" onclick="event.stopPropagation()">
            <button class="nav-guide-close" onclick="toggleNavGuide()">‚úï</button>
            <div class="nav-guide-header">
                <h3>üè¢ The Boardroom Playbook</h3>
                <p>Your executive briefing from the front office</p>
            </div>
            <a href="#" class="nav-guide-item nav-guide-start" style="text-decoration: none; color: inherit;" onclick="showView('board'); toggleNavGuide(); return false;">
                <div class="nav-guide-icon">üìã</div>
                <div class="nav-guide-text">
                    <h4>Board View ‚Äî "The war room"</h4>
                    <p>Florentino's Kanban board. All tickets by state ‚Äî IDEA ‚Üí DONE.</p>
                </div>
            </a>
            <a href="#" class="nav-guide-item" style="text-decoration: none; color: inherit;" onclick="showView('list'); toggleNavGuide(); return false;">
                <div class="nav-guide-icon">üìä</div>
                <div class="nav-guide-text">
                    <h4>List View ‚Äî "The spreadsheet"</h4>
                    <p>All tickets in table format. Sort, search, filter like Brad Stevens.</p>
                </div>
            </a>
            <a href="#" class="nav-guide-item" style="text-decoration: none; color: inherit;" onclick="showView('epic'); toggleNavGuide(); return false;">
                <div class="nav-guide-icon">üèõÔ∏è</div>
                <div class="nav-guide-text">
                    <h4>Epic View ‚Äî "The season blueprint"</h4>
                    <p>High-level epics with ticket breakdowns. See the strategic roadmap.</p>
                </div>
            </a>
            <a href="#" class="nav-guide-item" style="text-decoration: none; color: inherit;" onclick="showView('roster'); toggleNavGuide(); return false;">
                <div class="nav-guide-icon">üë•</div>
                <div class="nav-guide-text">
                    <h4>Roster View ‚Äî "The lineup card"</h4>
                    <p>Meet the agents. See who's on what tickets. The team's stats.</p>
                </div>
            </a>
            <a href="#" class="nav-guide-item" style="text-decoration: none; color: inherit;" onclick="showView('techHealth'); toggleNavGuide(); return false;">
                <div class="nav-guide-icon">üìä</div>
                <div class="nav-guide-text">
                    <h4>Tech Health ‚Äî "The scouting report"</h4>
                    <p>System health score, code quality, ML rigor, benchmarks, token usage.</p>
                </div>
            </a>
            <a href="sprints.html" class="nav-guide-item" style="text-decoration: none; color: inherit;">
                <div class="nav-guide-icon">üìÖ</div>
                <div class="nav-guide-text">
                    <h4>Sprints ‚Äî "The season schedule"</h4>
                    <p>Sprint history, timeline, velocity tracking.</p>
                </div>
            </a>
            <a href="about.html" class="nav-guide-item" style="text-decoration: none; color: inherit;">
                <div class="nav-guide-icon">‚ÑπÔ∏è</div>
                <div class="nav-guide-text">
                    <h4>About ‚Äî "The front office explainer"</h4>
                    <p>How Mission Control works. Task Integrity Loop. The process.</p>
                </div>
            </a>
            <a href="../../the_lab/dashboard/index.html" class="nav-guide-item" style="text-decoration: none; color: inherit;">
                <div class="nav-guide-icon">üî¨</div>
                <div class="nav-guide-text">
                    <h4>The Lab ‚Äî "The analytics wing"</h4>
                    <p>Cricket analytics. Teams, stat packs, predicted XIs. The research arm.</p>
                </div>
            </a>
        </div>
    </div>
</body>
</html>
