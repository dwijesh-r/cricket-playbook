{
  "id": "TKT-205",
  "epic_id": "EPIC-018",
  "title": "Research & define win probability model architecture",
  "description": "Survey existing win probability models in cricket (CricViz WinViz, WASP, Asif & McHale dynamic logistic regression, recent 2024 ML papers). Inventory DuckDB data (fact_ball: 278K IPL balls, 1,169 matches, 18 seasons). Define feature set (49 features in 8 categories), model architecture (two-model LightGBM split by innings), evaluation metrics (Brier score primary), and training strategy (season-grouped 5-fold CV). Produce comprehensive architecture document for Sprint 5 implementation.",
  "state": "DONE",
  "priority": "P0",
  "size": "M",
  "progress_pct": 100,
  "owner": "Ime Udoka",
  "assignee": "Ime Udoka",
  "reviewer": "Jose Mourinho",
  "sprint_id": "SPRINT-005",
  "effort": "Deep Work",
  "tags": ["ML", "Research", "Architecture", "Win Probability"],
  "gates": {
    "florentino_gate": {
      "status": "APPROVED",
      "reason": "Win probability is a Sprint 5 interactive feature for historical replay. Not a prediction/betting product.",
      "date": "2026-02-15"
    },
    "build": "DONE",
    "domain_sanity": {
      "jose_mourinho": {
        "status": "APPROVED",
        "notes": "Statistical methodology is sound. Two-model architecture justified by innings asymmetry. Brier score is the correct primary metric. Feature-to-sample ratio (1:5,700) is healthy. First innings noise acknowledged honestly."
      },
      "andy_flower": {
        "status": "APPROVED",
        "notes": "Cricket feature coverage is comprehensive. Resources remaining, required run rate pressure, and momentum features capture what matters in T20. Phase-specific evaluation is critical and correctly specified. Suggested v2 additions noted (partnership duration, in-match batter form, handedness matchups)."
      }
    },
    "enforcement": "DONE"
  },
  "deliverables": [
    "docs/ml/research/win_probability_architecture_v1.md"
  ],
  "artifact_link": "docs/ml/research/win_probability_architecture_v1.md",
  "progress_notes": {
    "2026-02-15T08:00:00Z": "Step 0 (PRD): Research scope defined — survey existing models, define feature set, model architecture, evaluation metrics.",
    "2026-02-15T08:05:00Z": "Step 1 (Florentino Gate): APPROVED. Win probability is Sprint 5 interactive feature for historical match replay.",
    "2026-02-15T08:30:00Z": "Step 2 (Build Phase 1 — Literature): Surveyed CricViz WinViz (DLS + AI), WASP (dynamic programming, Brooker & Hogan 2012), Asif & McHale 2016 dynamic logistic regression (25 params, validated vs betting market), Chakraborty et al. 2024 (RF/XGBoost top performers on T20), Part-Time Analyst T20 WPA (open source XGBoost). Consensus: ensemble methods + DLS-inspired resource features dominate.",
    "2026-02-15T08:45:00Z": "Step 2 (Build Phase 2 — Data): fact_ball has 278,034 IPL balls across 1,169 matches (2008-2025). 24 columns including match_phase, is_wicket, total_runs. dim_match provides winner_id, toss, venue, stage. Rich analytics views: venue_profile, innings_progression, team_phase_scoring, batter/bowler_phase. 63 distinct IPL venues. Avg 1st innings: 167.0. Chasing wins: 52.6%.",
    "2026-02-15T09:30:00Z": "Step 2 (Build Phase 3 — Architecture): Document written with 11 sections. 49 features in 8 categories (match state, phase, batting/bowling strength, venue, toss, momentum, context). Two-model LightGBM (1st/2nd innings split). Brier score primary metric. Season-grouped 5-fold CV. 4-phase roadmap (TKT-206 through TKT-209).",
    "2026-02-15T09:45:00Z": "Step 3 (Domain Sanity): Jose Mourinho APPROVED — methodology sound, metrics appropriate. Andy Flower APPROVED — cricket features comprehensive, phase evaluation critical.",
    "2026-02-15T09:50:00Z": "Step 4 (Enforcement): Architecture document complete. All 11 sections written. Deliverable at docs/ml/research/win_probability_architecture_v1.md.",
    "2026-02-15T09:55:00Z": "Step 5 (Ship): Document written. Ticket updated to DONE.",
    "2026-02-15T10:00:00Z": "Step 6 (Post Note): KEY INSIGHT — DLS resource percentage is the single most powerful feature. It compresses balls_remaining + wickets_in_hand into one domain-informed composite. Combined with required_run_rate (2nd innings), these explain ~60% of win probability variance.",
    "2026-02-15T10:05:00Z": "Step 7 (System Check): Document follows ML documentation standards. Feature set references thresholds.yaml for sample size minimums. No code produced (research ticket). Ready for Phase 1 (TKT-206)."
  },
  "key_insight": "The DLS resource percentage (a function of balls_remaining and wickets_in_hand) is the single most powerful feature for cricket win probability. Combined with required_run_rate for 2nd innings, these two features alone explain approximately 60% of win probability variance. Our 278K IPL ball samples across 1,169 matches provide sufficient data for a well-calibrated LightGBM model.",
  "created_at": "2026-02-14T01:40:00Z",
  "updated_at": "2026-02-15T10:05:00Z"
}
